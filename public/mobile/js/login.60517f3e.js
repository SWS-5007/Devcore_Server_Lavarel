(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login","home"],{2367:function(e,t,r){},"9a92":function(e,t,r){"use strict";r("2367")},a55b:function(e,t,r){"use strict";r.r(t);var a=r("8336"),s=r("62ad"),o=r("a523"),n=r("4bd4"),i=r("132d"),c=r("0fd9"),l=r("7e85"),u=r("e516"),d=r("8654"),m=(r("498a"),function(){var e=this,t=e._self._c;return t("external-layout",[e.form.busy||2!==e.step?e._e():t(a["a"],{staticClass:"back-btn animated fadeIn",attrs:{icon:""},on:{click:e.previous}},[t(i["a"],[e._v("mdi-arrow-left")])],1),t("input",{ref:"focus",staticClass:"focus-placeholder",attrs:{type:"text",autofocus:""}}),t(o["a"],{staticClass:"animated slideInRight faster",staticStyle:{padding:"0"}},[e.showRegister?e._e():t(n["a"],{staticClass:"w-100 fill-height",on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t(l["a"],{staticClass:"stepper",staticStyle:{"margin-top":"150px","box-shadow":"none",padding:"0"},attrs:{"show-arrows":!1,light:!0,height:"100%","hide-delimiters":"",continuous:!1},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t(u["a"],{attrs:{step:1}},[t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],ref:"username",staticClass:"large",attrs:{disabled:e.form.busy,name:"username",error:e.$validateState("username",e.form),"error-messages":e.$displayError("username",e.form),"aria-autocomplete":"new-username",placeholder:e.$t("Your email")},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),t(s["a"],{attrs:{cols:"12"}},[t(a["a"],{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",color:"primary",rounded:""},on:{click:e.next}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+"   "),t(i["a"],[e._v("mdi-arrow-right")])],1)],1)],1)],1),t(u["a"],{attrs:{step:2}},[t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],ref:"password",staticClass:"large",attrs:{disabled:e.form.busy,name:"password",color:"primary",type:e.showPassword?"text":"password",error:e.$validateState("password",e.form),"error-messages":e.$displayError("password",e.form),"aria-autocomplete":"new-password",placeholder:e.$t("Your password"),"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off"},on:{blur:e.focusLost,"click:append":function(){return e.showPassword=!e.showPassword}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t(s["a"],{attrs:{cols:"12"}},[t(a["a"],{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",disabled:e.form.busy||e.vErrors.any(),loading:e.form.busy,color:"primary",rounded:""},on:{click:e.next}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+"   "),t(i["a"],[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1),e.shareLink?t("div",{staticClass:"text-center mb-2"},[e._v(" New to DevCore? "),t("a",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:e.toggleRegister}},[e._v("Register")])]):e._e(),t("div",{staticClass:"text-center"},[t("router-link",{staticClass:"text-sm",attrs:{to:{name:"forgot-password"}}},[e._v(e._s(e.$t("Forgot your password?")))])],1)],1),e.showRegister&&e.shareLink?t("div",{},[t("register-form",{attrs:{callback:e.toggleRegister}})],1):e._e()],1)],1)}),p=[],f=r("c7eb"),h=r("1da1"),v=r("5530"),w=(r("14d9"),r("ac1f"),r("5319"),r("7db0"),r("d3b7"),r("9fee")),x=r("2f62"),b=function(){var e=this,t=e._self._c;return t(o["a"],{staticClass:"animated slideInRight faster",staticStyle:{padding:"0","margin-top":"100px","box-shadow":"none","max-height":"70vh","overflow-y":"auto"}},[t(n["a"],{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}}},[t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"firstName",staticClass:"large",attrs:{disabled:e.form.busy,name:"firstName",error:e.$validateState("firstName",e.form),"error-messages":e.$displayError("firstName",e.form),placeholder:e.$t("First Name")},model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName","string"===typeof t?t.trim():t)},expression:"form.firstName"}})],1)],1),t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"lastName",staticClass:"large",attrs:{disabled:e.form.busy,name:"lastName",error:e.$validateState("lastName",e.form),"error-messages":e.$displayError("lastName",e.form),placeholder:e.$t("Last Name")},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName","string"===typeof t?t.trim():t)},expression:"form.lastName"}})],1)],1),t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{ref:"phone",staticClass:"large",attrs:{disabled:e.form.busy,name:"phone",error:e.$validateState("phone",e.form),"error-messages":e.$displayError("phone",e.form),placeholder:e.$t("Mobile No.")},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1)],1),t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],ref:"email",staticClass:"large",attrs:{disabled:e.form.busy,name:"email",error:e.$validateState("email",e.form),"error-messages":e.$displayError("email",e.form),placeholder:e.$t("Your email")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1)],1),t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],ref:"password",staticClass:"large",attrs:{type:"password",disabled:e.form.busy,name:"password",error:e.$validateState("password",e.form),"error-messages":e.$displayError("password",e.form),placeholder:e.$t("Password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1)],1),t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:{min:6,confirmed:"password"},expression:"{\n                        min: 6,\n                        confirmed: 'password',\n                      }"}],ref:"passwordConfirmation",staticClass:"large",attrs:{type:"password",disabled:e.form.busy,name:"passwordConfirmation",error:e.$validateState("passwordConfirmation",e.form),"error-messages":e.$displayError("passwordConfirmation",e.form),placeholder:e.$t("Confirm Password")},model:{value:e.passwordConfirmation,callback:function(t){e.passwordConfirmation="string"===typeof t?t.trim():t},expression:"passwordConfirmation"}})],1)],1),t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(a["a"],{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",color:"primary",rounded:"",type:"submit"}},[e._v(" "+e._s(e.$t("Register"))+" ")])],1)],1),t("div",{staticClass:"text-center"},[e._v(" Already have an account? "),t("a",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:e.showLogin}},[e._v("Login")])])],1)],1)},g=[],y=r("b279"),$={props:{callback:null},data:function(){return{form:new w["a"]({firstName:null,lastName:null,email:null,phone:null,password:null,companyRoleId:null,companyId:null,projectId:null}),passwordConfirmation:""}},computed:Object(v["a"])({},Object(x["b"])({shareLink:"app/shared"})),mounted:function(){var e=this;return Object(h["a"])(Object(f["a"])().mark((function t(){return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.companyRoleId=e.shareLink.companyRoleId,e.form.companyId=e.shareLink.companyId,e.form.projectId=e.shareLink.projectId;case 3:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){this.form=new w["a"]({firstName:null,lastName:null,email:null,phone:null,password:""})},showLogin:function(){this.callback()},save:function(){var e=Object(h["a"])(Object(f["a"])().mark((function e(){var t;return Object(f["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(this.vErrors.any()){e.next=30;break}return e.next=5,this.$validator.reset();case 5:return e.next=7,this.$store.dispatch("user/register",this.form);case 7:return new w["a"]({username:this.form.email,password:this.form.password,remember:!1}),e.prev=8,e.next=11,this.$store.dispatch("auth/login",this.form);case 11:if(t=this.$store.getters["app/deviceToken"],null==t){e.next=15;break}return e.next=15,this.$store.dispatch("app/updateDeviceToken",new w["a"]({id:this.user.id,deviceToken:t,type:"android"}));case 15:return this.disable=!0,e.next=18,this.$router.replace(this.$store.getters["app/intented_route"]||defaultRoute);case 18:e.next=25;break;case 20:if(e.prev=20,e.t0=e["catch"](8),!e.t0.code||"MUST_VERIFY_EMAIL"!==e.t0.code){e.next=25;break}return e.next=25,this.$router.push({name:"send-email-verification",query:{email:this.form.username}});case 25:return e.prev=25,Object(y["i"])(),e.finish(25);case 28:this.$emit("input",this.input),this.$emit("done");case 30:case"end":return e.stop()}}),e,this,[[8,20,25,28]])})));function t(){return e.apply(this,arguments)}return t}()}},k=$,C=r("2877"),_=Object(C["a"])(k,b,g,!1,null,null,null),j=_.exports,N={data:function(){return{error:"",disable:!1,step:1,showPassword:!1,showRegister:!1,form:new w["a"]({username:"",password:"",remember:!0})}},components:{"register-form":j},computed:Object(v["a"])(Object(v["a"])({},Object(x["b"])({user:"auth/user",shareLink:"app/shared"})),{},{nextBtnTxt:{get:function(){return this.step<2?"Next":"Login"}}}),beforeDestroy:function(){document.removeEventListener("keypress",this.nextOnEnter)},mounted:function(){var e=this;this.$nextTick((function(){document.addEventListener("keypress",e.nextOnEnter)})),this.$nextTick((function(){setTimeout((function(){e.$refs.username.$refs.input.focus()}))}))},methods:{nextOnEnter:function(e){13===e.keyCode&&this.next()},previous:function(){1===this.step?this.$router.push({name:"home"}):(this.step--,this.stepChange(this.step))},next:function(){var e=this;return Object(h["a"])(Object(f["a"])().mark((function t(){return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e.step){t.next=6;break}return t.next=3,e.$validator.validate("username");case 3:e.vErrors.any()?e.$refs["username"].focus():(e.step++,e.stepChange(e.step)),t.next=9;break;case 6:return t.next=8,e.$validator.validate("password");case 8:e.vErrors.any()?e.$refs["password"].focus():e.login();case 9:case"end":return t.stop()}}),t)})))()},stepChange:function(e){var t=this;try{setTimeout((function(){e>0&&!t.disable?t.$refs["password"].focus():t.$refs["username"].focus()}),100)}catch(r){console.log(r)}},focusLost:function(){try{this.$refs["focus"].focus()}catch(e){console.log(e)}},login:function(){var e=this;return Object(h["a"])(Object(f["a"])().mark((function t(){var r,a,s;return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.error="",t.next=4,e.$store.dispatch("auth/login",e.form);case 4:if(r=e.$store.getters["app/deviceToken"],null==r){t.next=8;break}return t.next=8,e.$store.dispatch("app/updateDeviceToken",new w["a"]({id:e.user.id,deviceToken:r,type:"android"}));case 8:return e.disable=!0,t.next=11,e.$router.replace(e.$store.getters["app/intented_route"]||"/");case 11:t.next=22;break;case 13:if(t.prev=13,t.t0=t["catch"](0),!t.t0||!t.t0.code||"MUST_VERIFY_EMAIL"!==t.t0.code){t.next=20;break}return t.next=18,e.$router.push({name:"send-email-verification",query:{email:e.form.username}});case 18:t.next=21;break;case 20:t.t0&&t.t0.message&&(a="username",s=e.$validator.fields.find({name:a,scope:e.$options.scope}),s&&(e.$validator.errors.add({id:s.id,field:a,msg:t.t0.message,scope:e.$options.scope}),s.setFlags({invalid:!0,valid:!1,validated:!0})));case 21:e.previous();case 22:case"end":return t.stop()}}),t,null,[[0,13]])})))()},toggleRegister:function(){this.showRegister=!this.showRegister}}},O=N,E=(r("9a92"),Object(C["a"])(O,m,p,!1,null,null,null));t["default"]=E.exports},f243:function(e,t,r){"use strict";r.r(t);var a=r("8336"),s=r("62ad"),o=r("a523"),n=r("4bd4"),i=r("132d"),c=r("0fd9"),l=r("7e85"),u=r("e516"),d=r("8654"),m=function(){var e=this,t=e._self._c;return t("external-layout",[e.form.busy?e._e():t(a["a"],{staticClass:"back-btn animated fadeIn",attrs:{icon:""},on:{click:e.previous}},[t(i["a"],[e._v("mdi-arrow-left")])],1),t("input",{ref:"focus",staticClass:"focus-placeholder",attrs:{type:"text",autofocus:""}}),t(o["a"],{staticClass:"animated slideInRight faster",staticStyle:{padding:"0"},attrs:{"fill-height":""}},[t(n["a"],{staticClass:"w-100 fill-height"},[t(l["a"],{staticStyle:{"margin-top":"150px","box-shadow":"none",padding:"0"},attrs:{"show-arrows":!1,light:!0,"hide-delimiters":"",continuous:!1},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[t(u["a"],{attrs:{step:0}},[t(n["a"],{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),e.sendInstructions.apply(null,arguments)}}},[t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],ref:"username",staticClass:"large",attrs:{disabled:e.form.busy,name:"username",error:e.$validateState("username",e.form),"error-messages":e.$displayError("username",e.form),"aria-autocomplete":"new-username",placeholder:e.$t("Your email")},on:{blur:e.focusLost},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t(s["a"],{attrs:{cols:"12"}},[t(a["a"],{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",color:"primary",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,rounded:""},on:{click:e.sendInstructions}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+"   "),t(i["a"],[e._v("mdi-arrow-right")])],1)],1),t(s["a"],{attrs:{cols:"12"}},[t("div",{staticClass:"text-center mt-4"},[t("router-link",{staticClass:"text-sm",attrs:{to:{name:"login"}}},[e._v(e._s(e.$t("Login")))])],1)])],1)],1)],1),t(u["a"],{attrs:{step:1}},[t(n["a"],{staticClass:"w-100",on:{submit:function(t){return t.preventDefault(),e.sendInstructions.apply(null,arguments)}}},[t(c["a"],{staticClass:"w-100 px-5",attrs:{justify:"center","no-gutters":""}},[t(s["a"],{attrs:{cols:"12"}},[t(d["a"],{directives:[{name:"validate",rawName:"v-validate",value:"required|length:6",expression:"'required|length:6'"}],ref:"code",staticClass:"large",attrs:{disabled:e.form.busy,name:"code",type:"code",color:"primary",error:e.$validateState("code",e.form),"error-messages":e.$displayError("code",e.form),placeholder:e.$t("Received code")},on:{blur:e.focusLost},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),t(s["a"],{attrs:{cols:"12"}},[e.showResend?t("p",{staticClass:"text-center"},[t("small",[e._v(" "+e._s(e.$t("Didn't get the email?"))+" "),t("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.resend.apply(null,arguments)}}},[e._v(e._s(e.$t("Try again")))])])]):e._e(),t(a["a"],{staticClass:"mb-4 mx-0 px-0 text-uppercase",attrs:{"x-large":"",block:"",disabled:e.form.busy||e.vErrors.any(),loading:e.form.busy,color:"primary",rounded:""},on:{click:e.verify}},[e._v(" "+e._s(e.$t(e.nextBtnTxt))+"   "),t(i["a"],[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},p=[],f=r("c7eb"),h=r("1da1"),v=(r("14d9"),r("9fee")),w={data:function(){return{error:"",step:0,sent:!1,showResend:!1,haveCode:!1,form:new v["a"]({username:"",code:null})}},mounted:function(){var e=this;setTimeout((function(){e.$refs["username"].focus();var t=document.querySelectorAll(".slider .wrapper .item");for(var r in t)t[r]&&t[r].style&&(t[r].style.width=e.$refs["slider"].clientWidth+"px")}),1)},computed:{nextBtnTxt:{get:function(){return this.step<1?"Next":"Reset password"}}},methods:{focusLost:function(){try{this.$refs["focus"].focus()}catch(e){}},focusStep:function(){},previous:function(){0===this.step?this.$router.push({name:"login"}):(this.step--,this.stepChange(this.step))},next:function(){var e=this;return Object(h["a"])(Object(f["a"])().mark((function t(){return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===e.step&&(e.step++,e.stepChange(e.step));case 1:case"end":return t.stop()}}),t)})))()},stepChange:function(e){var t=this;setTimeout((function(){e>0?t.$refs["code"].focus():t.$refs["username"].focus()}),100)},verify:function(){var e=this;return Object(h["a"])(Object(f["a"])().mark((function t(){return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$validator.validate("code");case 3:if(!e.vErrors.any()){t.next=6;break}return e.$refs["code"].focus(),t.abrupt("return");case 6:return e.$validator.reset(),t.next=9,e.$store.dispatch("auth/resetPassword",e.form);case 9:window.location.reload(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),"TOKEN_EXPIRED"===t.t0.code&&e.resend();case 15:return t.prev=15,t.finish(15);case 17:case"end":return t.stop()}}),t,null,[[0,12,15,17]])})))()},resend:function(){this.$validator.reset(),this.previous()},sendInstructions:function(){var e=this;return Object(h["a"])(Object(f["a"])().mark((function t(){return Object(f["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$validator.validate("username");case 3:if(!e.vErrors.any()){t.next=6;break}return e.$refs["username"].focus(),t.abrupt("return");case 6:return e.$validator.reset(),e.form.fields.code=null,e.showResend=!1,t.next=11,e.$store.dispatch("auth/requestResetPassword",e.form);case 11:e.next(),e.sent=!0,setTimeout((function(){e.showResend=!0}),3e4),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0);case 19:return t.prev=19,e.$validator.reset(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,16,19,22]])})))()}}},x=w,b=r("2877"),g=Object(b["a"])(x,m,p,!1,null,null,null);t["default"]=g.exports}}]);