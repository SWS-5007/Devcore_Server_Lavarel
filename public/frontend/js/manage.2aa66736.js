(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["manage","chunk-2d21eb64","chunk-2d0ac391"],{"023d":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return e.$can("auth/user/create")?t("div",{staticClass:"ml-3"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-uppercase",attrs:{id:"btnNew",size:"sm",variant:"primary",title:e.$t("Create New")+" "+e.$t("User")},on:{click:e.togglePopOver}},[t("i",{staticClass:"mdi mdi-plus"}),e._v(" "+e._s(e.$t("New"))+" ")]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnNew",show:e.showPopOver,placement:"bottom"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("area-form",{on:{done:e.togglePopOver}})],1)],1)],1)],1):e._e()},i=[],a=s("e67d"),n=s.n(a),o=s("f713"),c={directives:{ClickOutside:n.a},components:{"area-form":o["a"]},data:function(){return{option:!1,showPopOver:!1}},methods:{togglePopOver:function(){this.showPopOver=!this.showPopOver,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver})}}},l=c,u=s("2877"),d=Object(u["a"])(l,r,i,!1,null,null,null);t["default"]=d.exports},"031b":function(e,t,s){},"0481":function(e,t,s){"use strict";var r=s("23e7"),i=s("a2bf"),a=s("7b0b"),n=s("07fa"),o=s("5926"),c=s("65f0");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),s=n(t),r=c(t,0);return r.length=i(r,t,t,s,0,void 0===e?1:o(e)),r}})},"0544":function(e,t,s){"use strict";s("b300")},"06a7":function(e,t,s){},"07cc":function(e,t,s){"use strict";s("14a0")},"0e15":function(e,t,s){"use strict";s("5c05")},"0e94":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search roles")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])({},Object(c["b"])({items:"companyRole/filteredItems",filter:"companyRole/filter"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("companyRole/filter",e);case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},"0f21":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("process-selector",{attrs:{"max-level":"process","show-count":"projects",section:"projects","on-apply":e.onApply}})],1)},i=[],a=s("c7eb"),n=s("1da1"),o={methods:{onApply:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.process){s.next=5;break}return s.next=3,t.$store.dispatch("process/findById",{id:e.process.id});case 3:return s.next=5,t.$store.dispatch("project/findByProcess",{id:e.process.id});case 5:case"end":return s.stop()}}),s)})))()}}},c=o,l=s("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},"120c":function(e,t,s){"use strict";s("4b66")},"127f":function(e,t,s){},"14a0":function(e,t,s){},"160d":function(e,t,s){},1923:function(e,t,s){},"192e":function(e,t,s){"use strict";s.r(t);s("498a"),s("a4d3"),s("e01a");var r=function(){var e=this,t=e._self._c;return t("div",[e.form?t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.saveItem.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-card",{staticClass:"d-block",attrs:{"no-body":""}},[t("b-card-body",{staticClass:"p-0",class:{"p-3":"edit"===e.mode}},[t("div",{staticClass:"form-group"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"},{name:"autofocus",rawName:"v-autofocus"}],attrs:{id:"title",disabled:e.form.busy,placeholder:e.$t("Idea title"),type:"text",name:"title",autocomplete:"off",autofocus:"",state:e.$validateState("title",e.form)},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"===typeof t?t.trim():t)},expression:"form.title"}}),t("label",{attrs:{for:"title"}},[e._v(e._s(e.$t("Idea title")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("title",e.form)))])],1),"TOOL"===e.form.type?t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"text-capitalize",class:{"is-invalid":!1===e.$validateState("tool",e.form),"is-valid":!0===e.$validateState("tool",e.form)},attrs:{label:"name","data-vv-name":"tool",placeholder:e.$t("Tool"),reduce:function(e){return e.id},options:e.tools},model:{value:e.form.companyToolId,callback:function(t){e.$set(e.form,"companyToolId",t)},expression:"form.companyToolId"}}),t("label",{attrs:{for:"stage"}},[e._v(e._s(e.$t("Tool")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("tool",e.form)))])],1):e._e(),t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"text-capitalize",class:{"is-invalid":!1===e.$validateState("stage",e.form),"is-valid":!0===e.$validateState("stage",e.form)},attrs:{label:"title",disabled:"NEW"!=e.form.status,"data-vv-name":"stage",placeholder:e.$t("Stage"),reduce:function(e){return e.id},options:e.process.process.stages},on:{input:e.changeStage},model:{value:e.form.stageId,callback:function(t){e.$set(e.form,"stageId",t)},expression:"form.stageId"}}),t("label",{attrs:{for:"stage"}},[e._v(e._s(e.$t("Stage")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("stage_id",e.form)))])],1),e.form.stageId?t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"text-capitalize",class:{"is-invalid":!1===e.$validateState("operation",e.form),"is-valid":!0===e.$validateState("operation",e.form)},attrs:{label:"title",disabled:"NEW"!=e.form.status,"data-vv-name":"operation_id",placeholder:e.$t("Operation"),reduce:function(e){return e.id},options:e.operations},on:{input:e.changeOperation},model:{value:e.form.operationId,callback:function(t){e.$set(e.form,"operationId",t)},expression:"form.operationId"}}),t("label",{attrs:{for:"operation"}},[e._v(e._s(e.$t("Operation")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("operation_id",e.form)))])],1):e._e(),e.form.operationId?t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"text-capitalize",class:{"is-invalid":!1===e.$validateState("phase",e.form),"is-valid":!0===e.$validateState("phase",e.form)},attrs:{label:"title",disabled:"NEW"!=e.form.status,"data-vv-name":"phase",placeholder:e.$t("Phase"),reduce:function(e){return e.id},options:e.phases},model:{value:e.form.phaseId,callback:function(t){e.$set(e.form,"phaseId",t)},expression:"form.phaseId"}}),t("label",{attrs:{for:"phase"}},[e._v(e._s(e.$t("Phase")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("phase",e.form)))])],1):e._e(),t("div",{staticClass:"form-label-group select required"},[t("b-form-textarea",{directives:[{name:"autoresize",rawName:"v-autoresize"},{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticStyle:{"max-height":"150px"},attrs:{id:"description",disabled:e.form.busy,placeholder:e.$t("Idea description"),name:"description",state:e.$validateState("description",e.form)},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),t("label",{attrs:{for:"description"}},[e._v(e._s(e.$t("Idea description")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("description",e.form)))])],1)]),t("b-card-footer",{class:{"px-0":"create"===e.mode}},[t("loading-button",{attrs:{disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,size:"lg",block:"",type:"submit"}},[e._v(e._s(e.$t("Save changes")))])],1)],1)],1):e._e()],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("7db0"),s("d3b7"),s("159b"),s("4de4"),s("b64b"),s("2f62")),l=s("9fee"),u={props:{item:null,section:{required:!1,type:String,default:function(){return"ideas"}},formFrom:{required:!1,type:String,default:function(){return"idea"}},type:{required:!1,type:String,default:function(){return"PROCESS"}},issueIdea:{required:!1,type:Object}},data:function(){return{input:null,currentFile:null,storeName:"idea",form:new l["a"]({id:void 0,title:null,processId:null,stageId:null,operationId:null,phaseId:null,description:null,companyToolId:null,removeFileIds:[],file:[],removeFile:!1,sourceId:null,sourceType:null,status:"NEW",type:"PROCESS"})}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({currentProcess:"process/current",currentTool:"companyTool/current",tools:"companyTool/all"})),{},{process:{get:function(){return this.currentProcess(this.section)}},stages:{get:function(){return this.process.process.stages||[]}},operations:{get:function(){var e=this;if(!this.form.stageId||!this.stages)return[];var t=this.stages.find((function(t){return t.id==e.form.stageId}));return(null===t||void 0===t?void 0:t.operations)||[]}},phases:{get:function(){var e=this;return this.form.operationId&&this.operations&&this.operations.find((function(t){return t.id==e.form.operationId})).phases||[]}},currentProcessSection:{get:function(){return this.process.phase||this.process.operation||this.process.stage||this.process.process}},currentProcessSectionName:{get:function(){return this.process.phase?"phase":this.process.operation?"operation":this.process.stage?"stage":this.process.process?"process":null}},mode:{get:function(){return this.item&&this.item.id?"edit":"create"}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.input=e.item,e.item&&e.item.file&&(e.currentFile=e.item.file),"create"===e.mode&&e.currentTool("toolIdeas")&&"toolIdeas"==e.section&&(e.form.companyToolId=e.currentTool("toolIdeas").id),!e.process){t.next=6;break}return t.next=6,e.$store.dispatch("process/findById",{id:e.process.process.id});case 6:e.initForm(),e.storeName="PROCESS"===e.form.type?"idea":"toolIdea";case 8:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){var e,t,s,r=this;if("issues"===this.section&&this.issueIdea)return this.form.processId=this.issueIdea.processId,this.form.stageId=this.issueIdea.stageId,this.form.operationId=this.issueIdea.operationId,void(this.form.phaseId=this.issueIdea.phaseId);this.input.id||(this.input.type=this.input.type||"PROCESS",this.input.processId=this.input.processId||this.process.process.id,this.input.stageId=this.input.stageId||this.process.stage?null===(e=this.process.stage)||void 0===e?void 0:e.id:null,this.input.operationId=this.input.operationId||this.process.operation?null===(t=this.process.operation)||void 0===t?void 0:t.id:null,this.input.phaseId=this.input.phaseId||this.process.phase?null===(s=this.process.phase)||void 0===s?void 0:s.id:null);if(Object.keys(this.input||{}).filter((function(e){return e in r.form})).forEach((function(e){return r.form[e]=r.input[e]})),this.form.type=this.input.type,this.form.stageId=this.input.stageId,this.form.operationId=this.input.operationId,this.form.phaseId=this.input.phaseId,"issues"===this.section&&(this.form.stageId=this.input.stageId,this.form.operationId=this.input.operationId,this.form.phaseId=this.input.phaseId),this.input.sourceType&&"idea_issue"===this.input.sourceType){var i=this.input.parent.__typename;"ProcessPhase"===i?(this.form.stageId=this.input.parent.operation.stageId,this.form.phaseId=this.input.parent.id,this.form.operationId=this.input.parent.operationId):"ProcessOperation"===i?(this.form.operationId=this.input.parent.id,this.form.stageId=this.input.parent.stageId):this.form.stageId=this.input.parent.id}},changeStage:function(){this.form.operationId=null,this.form.phaseId=null},changeOperation:function(){this.form.phaseId=null},cancel:function(){this.$emit("cancel")},fileChanged:function(){this.form.files?this.form.removeFile=!1:(this.form.removeFile=!0,this.currentFile=null)},saveItem:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){var s,r,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(e.vErrors.any()){t.next=31;break}if(e.$validator.reset(),t.prev=4,"edit"!==e.mode){t.next=10;break}return t.next=8,e.$store.dispatch("".concat(e.storeName,"/update"),e.form);case 8:t.next=14;break;case 10:return t.next=12,e.$store.dispatch("".concat(e.storeName,"/create"),e.form);case 12:return t.next=14,e.$store.dispatch("".concat(e.storeName,"/setIdeaTab"),{tab:"New"});case 14:if(e.$emit("done"),"improveIdea"===e.formFrom&&e.$emit("reload"),"issues"!=e.section){t.next=18;break}return t.abrupt("return");case 18:return t.next=20,e.$store.dispatch("process/setCurrentProcess",{section:e.section,process:e.process.process,stage:null===(s=e.stages)||void 0===s?void 0:s.filter((function(t){return t.id===e.form.stageId}))[0],operation:null===(r=e.operations)||void 0===r?void 0:r.filter((function(t){return t.id===e.form.operationId}))[0],phase:null===(i=e.phases)||void 0===i?void 0:i.filter((function(t){return t.id===e.form.phaseId}))[0]});case 20:return t.next=22,e.$store.dispatch("process/findById",{id:e.form.processId,force:!0});case 22:return t.next=24,e.$store.dispatch("".concat(e.storeName,"/findByProcess"),{id:e.form.processId,force:!0});case 24:t.next=31;break;case 26:return t.prev=26,t.t0=t["catch"](4),console.log(t.t0),t.next=31,e.$validator.reset();case 31:case"end":return t.stop()}}),t,null,[[4,26]])})))()}}},d=u,p=s("2877"),m=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=m.exports},"1bd2":function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[c,l],attrs:Object.assign({viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},a.concat([s("path",{attrs:{d:"M9.58 8.655H.765a.332.332 0 00-.33.33.337.337 0 00.33.33h8.825a.332.332 0 00.33-.33.339.339 0 00-.338-.33zM.434 5.73L.426 7.3a.341.341 0 00.334.342l1.563-.008a.323.323 0 00.234-.1l5.4-5.4a.341.341 0 000-.475L6.406.099a.341.341 0 00-.48 0l-1.08 1.089L.526 5.5a.359.359 0 00-.1.234l.008-.004zM6.172.806L7.26 1.894l-.613.613-1.087-1.09.613-.612h-.001zm-5.07 5.069l3.982-3.981 1.088 1.088L2.19 6.955l-1.1.008.012-1.088z",fill:"#4294D0"}})]))}}},"1d08":function(e,t,s){},2241:function(e,t,s){"use strict";s("527d")},2262:function(e,t,s){"use strict";s("127f")},2397:function(e,t,s){"use strict";s("c573")},"29df":function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[c,l],attrs:Object.assign({viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},a.concat([s("path",{attrs:{d:"M21.75 17.989a.398.398 0 00-.398.398v3.534c0 .66-.535 1.193-1.194 1.194H8.99c-.66 0-1.193-.535-1.194-1.194V11.549c0-.659.535-1.193 1.194-1.194h3.534a.398.398 0 100-.796H8.99A1.992 1.992 0 007 11.55v10.372a1.992 1.992 0 001.99 1.99h11.168a1.992 1.992 0 001.99-1.99v-3.534a.398.398 0 00-.398-.398z",fill:"#000"}}),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.457 8.535c.7-.7 1.833-.7 2.533 0l.467.467c.698.7.698 1.833 0 2.533l-7.1 7.1a.398.398 0 01-.176.103l-3.371.934a.398.398 0 01-.49-.49l.934-3.371a.397.397 0 01.102-.175l7.1-7.101zm-.422 1.548l-5.812 5.811 1.874 1.875 5.812-5.812-1.874-1.874zm-6.186 6.563l1.497 1.497-2.07.574.573-2.071zm8.623-5.252l.422-.422a.996.996 0 000-1.407l-.467-.467a.995.995 0 00-1.407 0l-.422.422 1.874 1.874z",fill:"#000"}})]))}}},"2aa6":function(e,t,s){},"2b3eb":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("process-selector",{attrs:{"max-level":"process","show-count":"items",section:e.section,"allow-edit":!0,"on-apply":e.onApply},on:{nullifyProcess:function(t){e.section=null}}})],1)},i=[],a=s("c7eb"),n=s("1da1"),o={data:function(){return{section:"process"}},methods:{onApply:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.process){s.next=3;break}return s.next=3,t.$store.dispatch("process/findById",{id:e.process.id});case 3:case"end":return s.stop()}}),s)})))()}}},c=o,l=s("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},"2d43":function(e,t,s){"use strict";s("a9cd")},"3c65":function(e,t,s){"use strict";var r=s("23e7"),i=s("7b0b"),a=s("07fa"),n=s("3a349"),o=s("083a"),c=s("3511"),l=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},d=l||!u();r({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(e){var t=i(this),s=a(t),r=arguments.length;if(r){c(s+r);var l=s;while(l--){var u=l+r;l in t?t[u]=t[l]:o(t,u)}for(var d=0;d<r;d++)t[d]=arguments[d]}return n(t,s+r)}})},"3f7c":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return e.$can("core/company/create")?t("div",{staticClass:"ml-3"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-uppercase",attrs:{id:"btnNew",size:"sm",variant:"primary",title:e.$t("Create New")+" "+e.$t("Company")},on:{click:e.togglePopOver}},[t("i",{staticClass:"mdi mdi-plus"}),e._v(" "+e._s(e.$t("New"))+" ")]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnNew",show:e.showPopOver,placement:"bottom"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("area-form",{on:{done:e.togglePopOver}})],1)],1)],1)],1):e._e()},i=[],a=s("5530"),n=s("2f62"),o=s("e67d"),c=s.n(o),l=(s("b0c0"),function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{id:"name",disabled:e.form.busy,placeholder:e.$t("Company Name"),type:"text",name:"name",state:e.$validateState("name",e.form),autofocus:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("label",{attrs:{for:"name"}},[e._v(e._s(e.$t("Company Name")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("name",e.form)))])],1)]),t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("b-form-input",{attrs:{id:"adminEmail",disabled:e.form.busy,placeholder:e.$t("Admin Email"),type:"text",name:"adminEmail",state:e.$validateState("adminEmail",e.form),autofocus:""},model:{value:e.form.adminEmail,callback:function(t){e.$set(e.form,"adminEmail",t)},expression:"form.adminEmail"}}),t("label",{attrs:{for:"name"}},[e._v(e._s(e.$t("Admin Email")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("adminEmail",e.form)))])],1)]),t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"currencyCode",disabled:e.form.busy,placeholder:e.$t("Currency"),type:"text",name:"currencyCode",state:e.$validateState("currencyCode",e.form)},model:{value:e.form.currencyCode,callback:function(t){e.$set(e.form,"currencyCode",t)},expression:"form.currencyCode"}},[t("option",{domProps:{value:null}},[e._v("--- "+e._s(e.$t("None"))+" ---")]),e._l(e.currencies,(function(s,r){return t("option",{key:r,domProps:{value:s.code}},[e._v(e._s(s.name)+" | "+e._s(s.symbol)+" ("+e._s(s.code)+")")])}))],2),t("label",{attrs:{for:"currencyCode"}},[e._v(e._s(e.$t("Currency Code")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("currencyCode",e.form)))])],1)]),t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":!1===e.$validateState("lang",e.form),"is-valid":!0===e.$validateState("lang",e.form)},attrs:{label:"text","data-vv-name":"value",placeholder:e.$t("Language"),options:e.getAssignableLanguages,reduce:function(e){return e.value},disabled:e.form.busy},model:{value:e.form.lang,callback:function(t){e.$set(e.form,"lang",t)},expression:"form.lang"}}),t("label",{attrs:{for:"lang"}},[e._v(e._s(e.$t("Language")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("lang",e.form)))])],1)])],1),t("b-row",[t("b-col",[t("hr"),t("loading-button",{attrs:{block:"",size:"lg",type:"submit",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,variant:"primary"}},[e._v(e._s(e.$t("Save changes")))]),"edit"===e.mode?t("div",{staticClass:"mt-3 text-center"},[t("hr"),t("b-button",{staticClass:"text-danger",attrs:{variant:"link",type:"button",block:""},on:{click:function(t){return t.preventDefault(),e.resetPassword.apply(null,arguments)}}},[e._v(e._s(e.$t("Reset password")))])],1):e._e()],1)],1)],1)}),u=[],d=s("c7eb"),p=s("1da1"),m=(s("d3b7"),s("159b"),s("14d9"),s("4de4"),s("b64b"),s("9fee")),f=s("3a34"),v=s("b279"),h={props:{value:{type:Object,required:!1,default:function(){return new f["C"]}},mode:{type:String,required:!1,default:"create"}},data:function(){return{input:null,form:new m["a"]({id:null,name:null,currencyCode:null,adminEmail:null,lang:null})}},computed:Object(a["a"])(Object(a["a"])({},Object(n["b"])({roles:"role/all",companyRoles:"companyRole/all",currentUser:"auth/user",currencies:"currency/all"})),{},{getAssignableLanguages:function(){var e=[],t=Object(v["b"])();return t.forEach((function(t){e.push({text:t.name,value:t.code})})),e}}),mounted:function(){var e=this;return Object(p["a"])(Object(d["a"])().mark((function t(){return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.input=e.value,t.next=3,e.initForm();case 3:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){var e=this;return Object(p["a"])(Object(d["a"])().mark((function t(){return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.keys(e.input).filter((function(t){return t in e.form})).forEach((function(t){return e.form[t]=e.input[t]}));case 1:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(p["a"])(Object(d["a"])().mark((function t(){return Object(d["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$validator.validateAll();case 3:if(e.vErrors.any()){t.next=19;break}return t.next=6,e.$validator.reset();case 6:if("edit"!==e.mode){t.next=12;break}return t.next=9,e.$store.dispatch("company/update",e.form);case 9:e.input=t.sent,t.next=15;break;case 12:return t.next=14,e.$store.dispatch("company/create",e.form);case 14:e.input=t.sent;case 15:return t.next=17,e.initForm();case 17:e.$emit("input",e.input),e.$emit("done");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.error(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()}}},b=h,g=s("2877"),y=Object(g["a"])(b,l,u,!1,null,null,null),w=y.exports,_={directives:{ClickOutside:c.a},components:{"area-form":w},data:function(){return{option:!1,showPopOver:!1}},computed:Object(a["a"])({},Object(n["b"])({loaded:"app/loaded",user:"auth/user"})),methods:{togglePopOver:function(){this.showPopOver=!this.showPopOver,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver})}}},x=_,I=Object(g["a"])(x,r,i,!1,null,null,null);t["default"]=I.exports},"3fe5":function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[{"-ms-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)"},c,l],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",style:"-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg)",viewBox:"0 0 24 24",transform:"rotate(360)"},u),...d},a.concat([s("path",{attrs:{d:"M12 9a3 3 0 00-3 3 3 3 0 003 3 3 3 0 003-3 3 3 0 00-3-3m0 8a5 5 0 01-5-5 5 5 0 015-5 5 5 0 015 5 5 5 0 01-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5z",fill:"#626262"}})]))}}},4069:function(e,t,s){var r=s("44d2");r("flat")},4293:function(e,t,s){"use strict";s("aacc")},4802:function(e,t,s){"use strict";s("1923")},"480b":function(e,t,s){},"492e":function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7"),s("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[e.currentItem||e.currentRowDetails||e.resetingPassword?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop||e.resetingPassword},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"container-fluid"},[t("b-card",[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"fullName",busy:e.filter.busy,"primary-key":"id",hover:"",fields:e.fields,items:e.items,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"editing":null}},scopedSlots:e._u([{key:"table-colgroup",fn:function(e){return[t("col",{staticStyle:{width:"30%"}}),t("col",{staticStyle:{width:"15%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"5%"}}),t("col",{staticStyle:{width:"250px"}})]}},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm}},[t("span",[t("img",{staticClass:"border rounded-circle",attrs:{src:s.item.logoUrl,height:"30px"}}),e._v(" "+e._s(s.item.name)+" ")]),e.isRowEditing(s)?t("template",{slot:"editing"},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"flex-grow-1 mr-1",staticStyle:{position:"relative"}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{name:"name",size:"sm",state:e.$validateState("name",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("name",e.updateForm)))])],1)])]):e._e()],2)]}},{key:"cell(currencyCode)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"currencyCode","static-value":s.item.currencyCode}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"currencyCode",disabled:e.updateForm.busy,placeholder:e.$t("Currency"),type:"text",name:"currencyCode",state:e.$validateState("currencyCode",e.updateForm)},model:{value:e.updateForm.currencyCode,callback:function(t){e.$set(e.updateForm,"currencyCode",t)},expression:"updateForm.currencyCode"}},[t("option",{domProps:{value:null}},[e._v("--- "+e._s(e.$t("None"))+" ---")]),e._l(e.currencies,(function(s,r){return t("option",{key:r,domProps:{value:s.code}},[e._v(e._s(s.name)+" | "+e._s(s.symbol)+" ("+e._s(s.code)+")")])}))],2),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("currencyCode",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right"},[t("table-edit-tools-buttons",{attrs:{item:s.item,"show-save-button":e.$can("core/company/update",s.item),"disable-save-button":e.vErrors.any()||e.updateForm.busy,"show-delete-button":e.$can("core/company/delete",s.item),loading:e.updateForm.busy,store:"company"},on:{cancel:function(t){return e.toggleItem(s.item)},delete:function(t){return e.toggleItem(null)},save:function(t){return e.saveItem(e.updateForm)}}})],1):t("table-tools-buttons",{attrs:{item:s.item,"show-edit-button":e.$can("core/company/update",s.item),"show-delete-button":e.$can("core/company/delete",s.item),store:"company"},on:{editItem:function(t){return e.toggleItem(s.item)}}})]}}])})],1)],1)])},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=s("2f62"),l=s("9fee"),u={components:{},data:function(){return{currentItem:null,currentRowDetails:null,resetingPassword:!1,updateForm:null,filter:{busy:!1}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({items:"company/filteredItems",currencies:"currency/all",showInnerOverlayOnTop:"app/show_inner_overlay_on_top"})),{},{fields:{get:function(){return[{key:"name",label:this.$t("name"),sortable:!0},{key:"currencyCode",label:this.$t("Currency"),sortable:!0},{key:"actions",label:this.$t("Manage"),class:"actions"}]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("company/findAll",{force:!0,filter:e.filter});case 1:case"end":return t.stop()}}),t)})))()},methods:{isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},overlayClick:function(){this.currentItem&&this.toggleItem(null)},toggleItem:function(e){this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.id===e.id?(this.currentItem=null,this.updateForm=null):(this.updateForm=new l["a"]({id:e.id,name:e.name,currencyCode:e.currencyCode}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=9;break}return s.next=5,t.$validator.reset();case 5:return e.yearlyCosts*=100,s.next=8,t.$store.dispatch("company/update",e);case 8:t.toggleItem(null);case 9:case"end":return s.stop()}}),s)})))()}}},d=u,p=s("2877"),m=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=m.exports},"49ad":function(e,t,s){"use strict";s("ff0c")},"4b66":function(e,t,s){},"519e":function(e,t,s){"use strict";s("480b")},"523d":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search projects")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({filter:"project/filter",currentProcess:"process/current"})),{},{process:{get:function(){return this.currentProcess("projects").process||null}},items:{get:function(){return this.process?this.$store.getters["project/filteredByprocess"](this.process.id):[]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("project/filter",e);case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},"527d":function(e,t,s){},"529a":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return e.$can("core/companyRole/create")?t("div",{staticClass:"ml-3"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-uppercase",attrs:{id:"btnNew",size:"sm",variant:"primary",title:e.$t("Create New")+" "+e.$t("Role")},on:{click:e.togglePopOver}},[t("i",{staticClass:"mdi mdi-plus"}),e._v(" "+e._s(e.$t("New"))+" ")]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnNew",show:e.showPopOver,placement:"bottom"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("area-form",{on:{done:e.togglePopOver}})],1)],1)],1)],1):e._e()},i=[],a=s("e67d"),n=s.n(a),o=s("0416"),c={directives:{ClickOutside:n.a},components:{"area-form":o["a"]},data:function(){return{option:!1,showPopOver:!1}},methods:{togglePopOver:function(){this.showPopOver=!this.showPopOver,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver})}}},l=c,u=s("2877"),d=Object(u["a"])(l,r,i,!1,null,null,null);t["default"]=d.exports},5696:function(e,t,s){},"58ef":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return e.$can("core/project/create")&&e.process&&e.process.stages.length>0?t("div",{staticClass:"ml-3"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-uppercase",attrs:{id:"btnNew",size:"sm",variant:"primary",title:e.$t("action.create",{name:e.$t("project")})},on:{click:e.togglePopOver}},[t("i",{staticClass:"mdi mdi-plus"}),e._v(" "+e._s(e.$t("New"))+" ")]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnNew",show:e.showPopOver,placement:"bottom"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("project-form",{on:{done:e.togglePopOver},model:{value:e.item,callback:function(t){e.item=t},expression:"item"}})],1)],1)],1)],1):e._e()},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=s("2f62"),l=s("b90e"),u={components:{"project-form":l["a"]},data:function(){return{option:!1,intent:null,showPopOver:!1,item:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({currentProcess:"process/current"})),{},{process:{get:function(){return this.currentProcess("projects")?this.currentProcess("projects").process:null}}}),methods:{togglePopOver:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.intent=Math.random(),e.item={},e.showPopOver=!e.showPopOver,e.$store.dispatch("app/showOverlay",{show:e.showPopOver,onClick:e.togglePopOver});case 4:case"end":return t.stop()}}),t)})))()}}},d=u,p=s("2877"),m=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=m.exports},"5b21":function(e,t,s){"use strict";s("1d08")},"5c05":function(e,t,s){},"5cf1":function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7"),s("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[e.currentItem||e.currentRowDetails?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"container-fluid"},[t("b-card",[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"name",busy:e.filter.busy,"primary-key":"id",hover:"",fields:e.fields,items:e.items,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"editing":null}},scopedSlots:e._u([{key:"table-colgroup",fn:function(e){return[t("col"),t("col",{staticStyle:{width:"300px"}})]}},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"name","static-value":s.item.name}},[t("span",[t("img",{staticClass:"border rounded-circle",attrs:{src:s.item.getAvatarUrl("50x50"),height:"25px"}}),e._v(" "+e._s(s.item.name)+" ")]),e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{name:"name",size:"sm",disabled:e.updateForm.busy,state:e.$validateState("name",e.updateForm)},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("name",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right"},[t("table-edit-tools-buttons",{attrs:{item:s.item,"show-save-button":e.$can("core/companyRole/update",s.item),"disable-save-button":e.vErrors.any()||e.updateForm.busy,"show-delete-button":e.$can("core/companyRole/delete",s.item)&&0===s.item.users.length,loading:e.updateForm.busy,store:"companyRole"},on:{cancel:function(t){return e.toggleItem(s.item)},delete:function(t){return e.toggleItem(null)},save:function(t){return e.saveItem(e.updateForm)}}})],1):t("table-tools-buttons",{attrs:{item:s.item,"show-edit-button":e.$can("core/companyRole/update",s.item),"show-delete-button":e.$can("core/companyRole/delete",s.item)&&0===s.item.users.length,store:"companyRole"},on:{editItem:function(t){return e.toggleItem(s.item)}}})]}}])})],1)],1)])},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=s("2f62"),l=s("9fee"),u={components:{},data:function(){return{currentItem:null,currentRowDetails:null,updateForm:null,filter:{busy:!1}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({items:"companyRole/filteredItems",showInnerOverlayOnTop:"app/show_inner_overlay_on_top"})),{},{fields:{get:function(){return[{key:"name",label:this.$t("Name"),sortable:!0},{key:"actions",label:this.$t("Manage"),class:"actions"}]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("companyRole/findAll",{force:!0,filter:e.filter});case 1:case"end":return t.stop()}}),t)})))()},methods:{isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},overlayClick:function(){this.currentItem&&this.toggleItem(null)},toggleItem:function(e){this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.id===e.id?(this.currentItem=null,this.updateForm=null):(this.updateForm=new l["a"]({id:e.id,name:e.name}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=8;break}return s.next=5,t.$validator.reset();case 5:return s.next=7,t.$store.dispatch("companyRole/update",e);case 7:t.toggleItem(null);case 8:case"end":return s.stop()}}),s)})))()}}},d=u,p=s("2877"),m=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=m.exports},"624f":function(e,t,s){"use strict";s("031b")},"6c03":function(e,t,s){"use strict";s("7c9f")},"6eee":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search process")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])({},Object(c["b"])({items:"process/filteredItems",filter:"process/filter"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return window.vm.$emit("process_filterChange"),s.next=3,t.$store.dispatch("process/filter",e);case 3:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},"705f":function(e,t,s){"use strict";s("2aa6")},"73de":function(e,t,s){},"73f0":function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7"),s("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[e.currentItem||e.currentRowDetails?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"container-fluid"},[t("b-card",[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"name",busy:e.filter.busy,"primary-key":"id",hover:"",fields:e.fields,items:e.tableItems,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"editing":null}},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"70%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"300px"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"name","static-value":s.item.name}},[t("span",[t("img",{staticClass:"border rounded-circle",attrs:{src:s.item.getAvatarUrl("50x50"),height:"25px"}}),e._v(" "+e._s(s.item.name)+" ")]),e.isRowEditing(s)?t("template",{slot:"editing"},[t("suggestions",{staticClass:"sm",attrs:{name:"tool",options:{debounce:250,inputClass:"form-control form-control-sm",autofocus:!0},state:e.$validateState("tool",e.updateForm),"on-input-change":e.onToolInputChange,"on-item-selected":e.onToolSelected},scopedSlots:e._u([{key:"item",fn:function(s){return t("div",{staticClass:"single-item"},[t("span",{staticClass:"name"},[e._v(e._s(s.item.name))])])}}],null,!0),model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("tool",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(yearlyCosts)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"yearlyCosts","static-value":e.$currency(e.calculateModulesTotal(s.item))}},[e.isRowEditing(s)?t("template",{slot:"editing"},[e._v(" "+e._s(e.$currency(e.calculateModulesTotal(s.item)))+" "),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("yearlyCosts",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right"},[t("table-edit-tools-buttons",{attrs:{item:s.item,"show-save-button":e.$can("core/companyTool/update",s.item),"disable-save-button":e.vErrors.any()||e.updateForm.busy,loading:e.updateForm.busy,"show-delete-button":e.$can("core/companyTool/delete",s.item),store:"companyTool"},on:{cancel:function(t){return e.toggleItem(s.item)},delete:function(t){return e.toggleItem(null)},save:function(t){return e.saveItem(e.updateForm)}}})],1):t("div",{staticClass:"d-flex"},[t("table-tools-buttons",{staticClass:"flex-grow-1 mr-2",staticStyle:{"max-width":"100px"},attrs:{store:"companyTool",item:s.item,"show-delete-button":!1,"show-edit-button":e.$can("core/companyTool/update",s.item)&&(!e.currentRowDetails||e.currentRowDetails.item.id!=s.item.id)},on:{editItem:e.toggleItem}}),t("div",{staticClass:"flex-grow-1"},[e.$can("core/companyTool/manage")?t("b-button",{staticClass:"btn-primary btn-expand btn-block text-uppercase",class:{expanded:e.currentRowDetails&&e.currentRowDetails.item.id===s.item.id},staticStyle:{"font-size":"1.2rem",padding:"3px"},attrs:{size:"xs",variant:"action"},on:{click:function(t){return e.showDetails(s)}}},[e._v(e._s(e.currentRowDetails&&e.currentRowDetails.item.id===s.item.id?e.$t("Close"):e.$t("Details")))]):e._e()],1)],1)]}},{key:"row-details",fn:function(s){return[t("div",{staticClass:"row-details"},[t("modules-table",{ref:"modulesTable",attrs:{"category-id":s.item.id,items:s.item.modules,"company-tool":s.item,busy:e.loadingItem},on:{itemChanged:function(t){return e.itemChanged(s.item)},priceChanged:function(t){return e.itemChanged(s.item)}}})],1)]}}])})],1)],1)])},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("d81d"),s("7db0"),s("498a"),s("2f62")),l=function(){var e=this,t=e._self._c;return t("div",[e.currentItem||e.currentRowDetails?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"table-responsive",staticStyle:{overflow:"visible"}},[t("b-table",{staticClass:"t02",attrs:{"sort-icon-left":"","sort-by":"name",busy:e.busy,"primary-key":"id",hover:"",fields:e.fields,items:e.tableItems,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"editing":null}},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"45%"}}),t("col",{staticStyle:{width:"20%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"300px"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"head(actions)",fn:function(){return[t("div",{staticClass:"text-right",staticStyle:{position:"relative"}},[t("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.currentItem&&e.$can("core/companyTool/create"),expression:"!currentItem && $can('core/companyTool/create')"}],ref:"btnNewProduct",staticClass:"px-3",staticStyle:{position:"absolute",top:"-14px",right:"0"},attrs:{variant:"primary btn-action",size:"xs"},on:{click:e.togglePopOver}},[e._v(" "+e._s(e.$t("New")))])],1),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return e.$refs.btnNewProduct},show:e.showPopOver,placement:"bottom",boundary:"viewport"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{"max-width":"300px"},attrs:{"no-body":""}},[t("b-card-body",[e.newItem?t("module-form",{attrs:{"company-tool":e.companyTool},on:{done:e.formDone},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}}):e._e()],1)],1)],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"name","static-value":s.item.info.name}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("suggestions",{staticClass:"sm",class:{"is-invalid":!1===e.$validateState("toolModule",e.updateForm),"is-valid":!0===e.$validateState("toolModule",e.updateForm)},attrs:{"v-validate":"required",options:{debounce:250,inputClass:"form-control form-control-sm",autofocus:!0,placeholder:e.$t("Name")},state:e.$validateState("toolModule",e.updateForm),"on-input-change":e.onToolModuleInputChange,"on-item-selected":e.onToolModuleSelected},scopedSlots:e._u([{key:"item",fn:function(s){return t("div",{staticClass:"single-item"},[t("span",{staticClass:"name"},[e._v(e._s(s.item.name))])])}}],null,!0),model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("toolModule",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(status)",fn:function(s){return[t("b-button-group",[t("b-button",{staticClass:"outline-none",class:{active:"INACTIVE"===s.item.info.status},attrs:{variant:"outline-danger"},on:{click:function(t){return e.changeStatus(s.item.info,"INACTIVE")}}},[e._v(e._s(e.$t("INACTIVE")))]),t("b-button",{staticClass:"outline-none",class:{active:"ACTIVE"===s.item.info.status},attrs:{variant:"outline-primary"},on:{click:function(t){return e.changeStatus(s.item.info,"ACTIVE")}}},[e._v(e._s(e.$t("ACTIVE")))])],1)]}},{key:"cell(yearlyCosts)",fn:function(t){return[e._v(e._s(e.$currency(e.calculateModulesTotal(t.item))))]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right d-flex justify-content-end"},[t("table-edit-tools-buttons",{ref:"editButtons",attrs:{item:s.item,"show-save-button":e.$can("core/companyTool/update",s.item),"disable-save-button":e.vErrors.any()||e.updateForm.busy,loading:e.updateForm.busy,"show-delete-button":e.$can("core/companyTool/delete",s.item),store:"companyTool","delete-confirm-boundary":"viewport"},on:{cancel:function(t){return e.toggleItem(s.item.info)},delete:e.itemDeleted,save:function(t){return e.saveItem(e.updateForm)}}})],1):t("div",{staticClass:"d-flex"},[t("div",{staticClass:"flex-grow-1 mr-2",staticStyle:{width:"50%"}},[e.currentRowDetails&&e.currentRowDetails.item.id===s.item.id?e._e():t("table-tools-buttons",{attrs:{item:s.item,"show-edit-button":e.$can("core/companyTool/update",s.item),"btn-edit-class":"btn-white btn-sm border-0 text-primary","show-delete-button":!1,store:"companyTool"},on:{editItem:function(t){return e.toggleItem(s.item.info)},delete:e.itemDeleted}})],1),t("div",{staticClass:"flex-grow-1",staticStyle:{width:"50%"}},[e.$can("core/companyTool/manage")?t("b-button",{staticClass:"btn-primary btn-expand btn-block text-uppercase",class:{expanded:e.currentRowDetails&&e.currentRowDetails.item.id===s.item.id},staticStyle:{"font-size":"1.2rem",padding:"3px"},attrs:{size:"xs",variant:"action"},on:{click:function(t){return e.showDetails(s)}}},[e._v(e._s(e.currentRowDetails&&e.currentRowDetails.item.id===s.item.id?e.$t("Close"):e.$t("Prices")))]):e._e()],1)])]}},{key:"row-details",fn:function(s){return[t("div",{staticClass:"row-details"},[t("price-table",{attrs:{"tool-module":s.item.info},on:{itemChanged:e.priceChanged}})],1)]}}])})],1)])},u=[],d=(s("159b"),s("14d9"),function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("suggestions",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:1",expression:"'required|min:1'"}],staticClass:"sm",class:{"is-invalid":!1===e.$validateState("priceModel",e.form),"is-valid":!0===e.$validateState("priceModel",e.form)},attrs:{options:{debounce:250,inputClass:"form-control form-control-sm",autofocus:!0,placeholder:e.$t("Module Name")},state:e.$validateState("toolModule",e.form),"on-input-change":e.onToolModuleInputChange,"on-item-selected":e.onToolModuleSelected},scopedSlots:e._u([{key:"item",fn:function(s){return t("div",{staticClass:"single-item"},[t("span",{staticClass:"name"},[e._v(e._s(s.item.name))])])}}]),model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("toolModule",e.form)))])],1)])],1),t("b-row",[t("b-col",{staticClass:"col-12"},[t("hr",{staticClass:"mt-0"}),t("loading-button",{style:e.form.name?"cursor:pointer":"cursor:not-allowed",attrs:{size:"lg",block:"",type:"submit",disabled:e.vErrors.any()||e.form.busy||!e.form.name,loading:e.form.busy,variant:"primary"}},[e._v(e._s(e.$t("Save changes"))+" ")]),"edit"===e.mode&&e.$can("tool/toolModule/delete",e.input)?t("div",{staticClass:"mt-3 text-center"},[t("hr"),t("b-button",{attrs:{variant:"outline-danger",type:"button",block:""},on:{click:function(t){return t.preventDefault(),e.deleteItem.apply(null,arguments)}}},[t("i",{staticClass:"mdi mdi-trash-can"}),e._v(" "+e._s(e.$t("Delete"))+" ")])],1):e._e()],1)],1)],1)}),p=[],m=(s("b64b"),s("9fee")),f={props:{value:{type:Object,required:!1},mode:{type:String,required:!1,default:"create"},companyTool:{type:Object,required:!0}},data:function(){return{input:null,form:new m["a"]({id:null,name:null,companyToolId:null,toolId:null,yearlyCosts:null,priceModel:null})}},computed:Object(o["a"])({},Object(c["b"])({currentUser:"auth/user",priceModels:"priceModel/all"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.input=e.value,t.next=3,e.initForm();case 3:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.keys(e.input||{}).filter((function(t){return t in e.form})).forEach((function(t){return e.form[t]=e.input[t]})),e.form.companyToolId=e.companyTool.id;case 2:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$validator.validateAll();case 3:if(e.vErrors.any()){t.next=19;break}return t.next=6,e.$validator.reset();case 6:if("edit"!==e.mode){t.next=12;break}return t.next=9,e.$store.dispatch("companyTool/update",e.form);case 9:e.input=t.sent,t.next=15;break;case 12:return t.next=14,e.$store.dispatch("companyTool/create",e.form);case 14:e.input=t.sent;case 15:return t.next=17,e.initForm();case 17:e.$emit("input",e.input),e.$emit("done");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.error(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},deleteItem:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$can("core/tool/delete",e.input)){t.next=3;break}return t.next=3,e.$swal({title:e.$t("Are you sure?"),text:e.$t("You won't be able to revert this!"),type:"warning",showCancelButton:!0,confirmButtonText:e.$t("Yes, delete it!"),showLoaderOnConfirm:!0,preConfirm:function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("companyTool/delete",new m["a"]({id:e.input.id},null));case 3:return s=t.sent,e.$emit("done"),t.abrupt("return",s);case 6:return t.prev=6,e.$swal.close(),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[0,,6,9]])})));function s(){return t.apply(this,arguments)}return s}()});case 3:case"end":return t.stop()}}),t)})))()},onToolModuleSelected:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.form.toolId=e.id,t.form.name=e.name;case 2:case"end":return s.stop()}}),s)})))()},onToolModuleInputChange:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.form.toolId=null,!(e.trim().length<2)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("tool/findAll",{where:{and:[{field:"tool_id",op:"eq",value:t.companyTool.toolId},{field:"name",op:"cn",value:e}]}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()}}},v=f,h=s("2877"),b=Object(h["a"])(v,d,p,!1,null,null,null),g=b.exports,y=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"table-responsive",staticStyle:{overflow:"visible"}},[t("b-table",{staticClass:"t02",attrs:{"sort-icon-left":"","sort-by":"name","primary-key":"id",hover:"",fields:e.fields,items:e.toolModule.prices,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"editing":null}},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"35%"}}),t("col",{staticStyle:{width:"20%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"300px"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"head(actions)",fn:function(){return[t("div",{staticClass:"text-right",staticStyle:{position:"relative"}},[t("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.currentItem&&e.$can("core/companyTool/create"),expression:"!currentItem && $can('core/companyTool/create')"}],ref:"btnNewProduct",staticClass:"px-3",staticStyle:{position:"absolute",top:"-14px",right:"0"},attrs:{variant:"primary btn-action",size:"xs"},on:{click:e.togglePopOver}},[e._v("+ "+e._s(e.$t("New")))])],1),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return e.$refs.btnNewProduct},show:e.showPopOver,placement:"bottom",boundary:"viewport"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{"max-width":"300px"},attrs:{"no-body":""}},[t("b-card-body",[e.newItem?t("price-form",{attrs:{"company-tool":e.toolModule},on:{done:e.formDone},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}}):e._e()],1)],1)],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"name","static-value":"PROJECT"!=s.item.priceModel?s.item.name:s.item.parent.name}},[e.isRowEditing(s)?t("template",{slot:"editing"},["PROJECT"!=e.updateForm.priceModel?t("div",[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{id:"name",disabled:e.updateForm.busy,placeholder:e.$t("Price name"),type:"text",name:"name",state:e.$validateState("name",e.updateForm)},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("name",e.updateForm)))])],1):t("div",[t("b-select",{attrs:{name:"parentId",size:"sm",state:e.$validateState("parentId",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.parentId,callback:function(t){e.$set(e.updateForm,"parentId",t)},expression:"updateForm.parentId"}},e._l(e.projects,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(e._s(s.name))])})),0),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("parentId",e.updateForm)))])],1)]):e._e()],2)]}},{key:"cell(priceModel)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"priceModel","static-value":e.$t("priceModel."+s.item.priceModel)}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-select",{attrs:{name:"priceModel",size:"sm",state:e.$validateState("priceModel",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.priceModel,callback:function(t){e.$set(e.updateForm,"priceModel",t)},expression:"updateForm.priceModel"}},e._l(e.priceModels,(function(s){return t("option",{key:s.id,domProps:{value:s.name}},[e._v(e._s(e.$t("priceModel."+s.id)))])})),0),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("priceModel",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(yearlyCosts)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"yearlyCosts","static-value":e.$currency(s.item.yearlyCosts/100)}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:0",expression:"'required|numeric|min:0'"}],attrs:{name:"price",type:"number",size:"sm",disabled:e.updateForm.busy,state:e.$validateState("price",e.updateForm)},on:{change:e.changePrice},model:{value:e.price,callback:function(t){e.price=e._n(t)},expression:"price"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("price",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(expiration)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"yearlyCosts","static-value":e.formatDate(s.item.expiration)}},[e.isRowEditing(s)?t("template",{slot:"editing"},["LICENSE"===e.updateForm.priceModel?t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"expiration",type:"date",size:"sm",disabled:e.updateForm.busy,state:e.$validateState("expiration",e.updateForm)},on:{change:e.changePrice},model:{value:e.updateForm.expiration,callback:function(t){e.$set(e.updateForm,"expiration",t)},expression:"updateForm.expiration"}}):e._e(),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("expiration",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right d-flex justify-content-end"},[t("table-edit-tools-buttons",{ref:"editButtons",attrs:{item:s.item,"show-save-button":e.$can("core/companyTool/update",s.item),"disable-save-button":e.vErrors.any()||e.updateForm.busy,loading:e.updateForm.busy,"show-delete-button":e.$can("core/companyTool/delete",s.item),store:"companyToolPrice","delete-confirm-boundary":"viewport"},on:{cancel:function(t){return e.toggleItem(s.item)},deleted:e.itemDeleted,save:function(t){return e.saveItem(e.updateForm)}}})],1):t("div",{staticClass:"d-flex justify-content-end"},[t("div",{staticClass:"float-right"},[t("table-tools-buttons",{attrs:{item:s.item,"show-edit-button":e.$can("core/companyTool/update",s.item),"btn-edit-class":"btn-white btn-sm border-0 text-primary","btn-delete-class":"btn-white btn-sm border-0 text-danger","show-delete-button":e.$can("core/companyTool/delete",s.item),store:"companyToolPrice"},on:{deleted:e.itemDeleted,editItem:function(t){return e.toggleItem(s.item)}}})],1)])]}}])})],1)])},w=[],_=s("c1df"),x=s.n(_),I=s("3a34"),O=function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"autofocus",rawName:"v-autofocus"}],class:{"is-invalid":!1===e.$validateState("priceModel",e.form),"is-valid":!0===e.$validateState("priceModel",e.form)},attrs:{label:"name","data-vv-name":"priceModel",placeholder:e.$t("Price model"),reduce:function(e){return e.id},options:e.priceModels,state:e.$validateState("priceModel",e.form)},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e._v(e._s(e.$t("priceModel."+t.name)))]}},{key:"option",fn:function(t){return[e._v(e._s(e.$t("priceModel."+t.name)))]}}]),model:{value:e.form.priceModel,callback:function(t){e.$set(e.form,"priceModel",t)},expression:"form.priceModel"}}),t("label",{attrs:{for:"priceModel"}},[e._v(e._s(e.$t("Price model")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("priceModels")))])],1)]),"PROJECT"!==e.form.priceModel?t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{id:"name",disabled:e.form.busy,placeholder:e.$t("Price name"),type:"text",name:"name",state:e.$validateState("name",e.form)},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),t("label",{attrs:{for:"name"}},[e._v(e._s(e.$t("Name")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("name",e.form)))])],1)]):e._e(),"PROJECT"===e.form.priceModel?t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":!1===e.$validateState("project",e.form),"is-valid":!0===e.$validateState("project",e.form)},attrs:{label:"name","data-vv-name":"project",placeholder:e.$t("Project"),reduce:function(e){return e.id},options:e.projects},scopedSlots:e._u([{key:"selected-option",fn:function(t){return[e._v(e._s(t.name))]}},{key:"option",fn:function(t){return[e._v(e._s(t.name))]}}],null,!1,3567324205),model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}}),t("label",{attrs:{for:"project"}},[e._v(e._s(e.$t("Project")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("project",e.form)))])],1)]):e._e(),"LICENSE"===e.form.priceModel?t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("b-form-datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"expiration",name:"expiration",disabled:e.form.busy,"menu-class":"w-100","date-format-options":{year:"numeric",month:"numeric",day:"numeric",weekday:void 0},"reset-button":"",placeholder:e.$t("Expiration"),"calendar-width":"100%"},on:{input:e.dateChanged},model:{value:e.form.expiration,callback:function(t){e.$set(e.form,"expiration",t)},expression:"form.expiration"}}),t("label",{attrs:{for:"expiration"}},[e._v(e._s(e.$t("Yearly Costs")+(e.currentUser&&e.currentUser.company?" ("+e.currentUser.company.currencyCode+")":"")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("expiration",e.form)))])],1)]):e._e(),t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:0",expression:"'required|numeric|min:0'"}],attrs:{id:"price",step:"1",min:"0",disabled:e.form.busy,placeholder:e.$t("Yearly Costs"),type:"number",name:"price",state:e.$validateState("price",e.form)},on:{change:e.changePrice},model:{value:e.price,callback:function(t){e.price=e._n(t)},expression:"price"}}),t("label",{attrs:{for:"price"}},[e._v(e._s(e.$t("Yearly Costs")+(e.currentUser&&e.currentUser.company?" ("+e.currentUser.company.currencyCode+")":"")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("price",e.form)))])],1)])],1),t("b-row",[t("b-col",{staticClass:"col-12"},[t("hr",{staticClass:"mt-0"}),t("loading-button",{attrs:{size:"lg",block:"",type:"submit",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,variant:"primary"}},[e._v(e._s(e.$t("Save changes"))+" ")]),"edit"===e.mode&&e.$can("tool/toolModule/delete",e.input)?t("div",{staticClass:"mt-3 text-center"},[t("hr"),t("b-button",{attrs:{variant:"outline-danger",type:"button",block:""},on:{click:function(t){return t.preventDefault(),e.deleteItem.apply(null,arguments)}}},[t("i",{staticClass:"mdi mdi-trash-can"}),e._v(" "+e._s(e.$t("Delete"))+" ")])],1):e._e()],1)],1)],1)},k=[],C={props:{value:{type:Object,required:!1},mode:{type:String,required:!1,default:"create"},companyTool:{type:Object,required:!0}},data:function(){return{input:null,price:null,form:new m["a"]({name:null,companyToolId:null,parentType:"PROJECT",parentId:null,price:null,priceModel:null,expiration:null})}},computed:Object(o["a"])({},Object(c["b"])({currentUser:"auth/user",priceModels:"priceModel/all",projects:"project/all"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.input=e.value,t.next=3,e.$store.dispatch("project/findAll");case 3:return t.next=5,e.initForm();case 5:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.keys(e.input||{}).filter((function(t){return t in e.form})).forEach((function(t){return e.form[t]=e.input[t]})),e.form.companyToolId=e.companyTool.id,e.price=e.form.price/100;case 3:case"end":return t.stop()}}),t)})))()},changePrice:function(e){this.form.price=100*e},save:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$validator.validateAll();case 3:if(e.vErrors.any()){t.next=19;break}return t.next=6,e.$validator.reset();case 6:if("edit"!==e.mode){t.next=12;break}return t.next=9,e.$store.dispatch("companyToolPrice/update",e.form);case 9:e.input=t.sent,t.next=15;break;case 12:return t.next=14,e.$store.dispatch("companyToolPrice/create",e.form);case 14:e.input=t.sent;case 15:return t.next=17,e.initForm();case 17:e.$emit("input",e.input),e.$emit("done");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.error(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},deleteItem:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$can("core/tool/delete",e.input)){t.next=3;break}return t.next=3,e.$swal({title:e.$t("Are you sure?"),text:e.$t("You won't be able to revert this!"),type:"warning",showCancelButton:!0,confirmButtonText:e.$t("Yes, delete it!"),showLoaderOnConfirm:!0,preConfirm:function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("companyToolPrice/delete",new m["a"]({id:e.input.id},null));case 3:return s=t.sent,e.$emit("done"),t.abrupt("return",s);case 6:return t.prev=6,e.$swal.close(),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[0,,6,9]])})));function s(){return t.apply(this,arguments)}return s}()});case 3:case"end":return t.stop()}}),t)})))()},dateChanged:function(e){this.form.expiration=e},onToolModuleSelected:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.form.toolId=e.id,t.form.name=e.name;case 2:case"end":return s.stop()}}),s)})))()},onToolModuleInputChange:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.form.toolId=null,!(e.trim().length<2)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("tool/findAll",{where:{and:[{field:"tool_id",op:"eq",value:t.companyTool.toolId},{field:"name",op:"cn",value:e}]}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()}}},$=C,j=Object(h["a"])($,O,k,!1,null,null,null),S=j.exports,E={components:{"price-form":S},props:{toolModule:{type:Object,required:!0}},data:function(){return{price:null,form:null,currentItem:null,showPopOver:!1,newItem:null,updateForm:null,currentRowDetails:null,currentDetailsItem:null,deleting:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({priceModels:"priceModel/all",projects:"project/all"})),{},{fields:{get:function(){return[{key:"name",label:this.$t("Name"),sortable:!0},{key:"priceModel",label:this.$t("Price models"),sortable:!0},{key:"yearlyCosts",label:this.$t("Yearly costs"),sortable:!0},{key:"expiration",label:this.$t("Expiration"),sortable:!0},{key:"actions",label:""}]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("project/findAll");case 2:case"end":return t.stop()}}),t)})))()},methods:{isRowEditing:function(e){return e&&this.currentItem&&this.currentItem.id===(e.item?e.item.id:e.id)},togglePopOver:function(){this.showPopOver=!this.showPopOver,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver}),this.showPopOver&&(this.newItem=(new I["e"]).deserialize({companyToolId:this.toolModule.id}))},showDetails:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.currentRowDetails&&(t.currentRowDetails.item._showDetails=!1),t.$store.dispatch("app/toggleInnerOverlay"),null==e||t.currentRowDetails&&t.currentRowDetails.item.id==e.item.id?t.currentRowDetails=null:(t.currentRowDetails=e,t.currentRowDetails.toggleDetails(),t.currentRowDetails.item._showDetails=!0);case 3:case"end":return s.stop()}}),s)})))()},formatDate:function(e){return e?x()(e).format("YYYY-MM-DD"):"N/A"},changePrice:function(e){this.updateForm.price=100*e},toggleItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.deleting=!1,t.$validator.pause(),t.$validator.reset(),null==e||t.currentItem&&t.currentItem.id===e.id?(t.currentItem=null,t.updateForm=null):(t.currentItem=e||null,t.updateForm=new m["a"]({id:e.id,companyToolId:t.toolModule.id,priceModel:e.priceModel,name:e.name,parentType:e.parentType,parentId:e.parentId,expiration:null!=e.expiration?x()(e.expiration).format("YYYY-MM-DD"):null,price:e.price/100}),t.price=t.updateForm.price,t.$nextTick((function(){t.$validator.reset(),t.$validator.resume()})));case 4:case"end":return s.stop()}}),s)})))()},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=8;break}return s.next=5,t.$validator.reset();case 5:return s.next=7,t.$store.dispatch("companyToolPrice/update",e);case 7:t.$emit("itemChanged");case 8:case"end":return s.stop()}}),s)})))()},formDone:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.newItem=null,e.togglePopOver(),e.$emit("itemChanged");case 3:case"end":return t.stop()}}),t)})))()},itemDeleted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.toggleItem(null),e.deleting=!1,e.$emit("itemChanged");case 3:case"end":return t.stop()}}),t)})))()},cancelDelete:function(){this.deleting=!1},onToolModuleSelected:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.updateForm.toolModule=e.id,t.updateForm.name=e.name;case 2:case"end":return s.stop()}}),s)})))()},onToolModuleInputChange:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.updateForm.toolModule=null,!(e.trim().length<=3)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("toolModule/findAll",{conditions:{and:[{field:"tool",op:"eq",value:t.companyTool.toolId},{field:"name",op:"contains",value:e}]}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()}}},T=E,R=Object(h["a"])(T,y,w,!1,null,null,null),F=R.exports,P={name:"ToolsTable",components:{"module-form":g,"price-table":F},props:{companyTool:{type:Object,required:!0},items:{type:Array,required:!1,default:function(){return[]}},busy:{type:Boolean,required:!1,default:function(){return!1}}},data:function(){return{showInnerOverlayOnTop:!1,currentItem:null,showPopOver:!1,newItem:null,updateForm:null,currentRowDetails:null,currentDetailsItem:null,deleting:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({priceModels:"priceModel/all"})),{},{tableItems:{get:function(){var e=this,t=[];return this.items.forEach((function(s){var r=!1;e.currentRowDetails&&e.currentRowDetails.item.id===s.id&&(r=!0),t.push({info:s,id:s.id,_showDetails:r})})),t}},fields:{get:function(){return[{key:"name",label:this.$t("Module"),sortable:!0},{key:"yearlyCosts",label:this.$t("Yearly costs"),sortable:!0},{key:"status",label:this.$t("Status"),sortable:!1},{key:"actions",label:""}]}}}),methods:{calculateModulesTotal:function(e){if(e.info.prices&&e.info.prices.length>0){var t=0;return e.info.prices.map((function(e){t+=e.price/100})),t}return 0},isRowEditing:function(e){return e&&this.currentItem&&this.currentItem.id===(e.item?e.item.id:e.id)},togglePopOver:function(){this.showPopOver=!this.showPopOver,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver}),this.showPopOver&&(this.newItem=(new I["d"]).deserialize({companyTool:this.companyTool.id}))},showDetails:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.currentRowDetails&&(t.currentRowDetails.item._showDetails=!1),t.$store.dispatch("app/toggleInnerOverlay"),null==e||t.currentRowDetails&&t.currentRowDetails.item.id==e.item.id?t.currentRowDetails=null:(t.currentRowDetails=e,t.currentRowDetails.toggleDetails(),t.currentRowDetails.item._showDetails=!0);case 3:case"end":return s.stop()}}),s)})))()},toggleItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.deleting=!1,t.$validator.pause(),t.$validator.reset(),!e||t.currentItem&&t.currentItem.id===e.id?(t.currentItem=null,t.updateForm=null):(t.currentItem=e||null,t.updateForm=new m["a"]({id:e.id,name:e.name,companyToolId:e.companyToolId,toolId:null}),t.$nextTick((function(){t.$validator.reset(),t.$validator.resume()})));case 4:case"end":return s.stop()}}),s)})))()},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=9;break}return s.next=5,t.$validator.reset();case 5:return s.next=7,t.$store.dispatch("companyTool/update",e);case 7:t.toggleItem(null),t.$emit("itemChanged");case 9:case"end":return s.stop()}}),s)})))()},changeStatus:function(e,t){var s=this;return Object(n["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t==e.status){r.next=4;break}return e.status=t,r.next=4,s.$store.dispatch("companyTool/changeStatus",new m["a"]({id:e.id,status:t}));case 4:case"end":return r.stop()}}),r)})))()},overlayClick:function(){this.toggleItem(null),this.showDetails()},formDone:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.newItem=null,e.togglePopOver(),e.$emit("itemChanged");case 3:case"end":return t.stop()}}),t)})))()},itemDeleted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.toggleItem(null),e.deleting=!1,e.$emit("itemChanged");case 3:case"end":return t.stop()}}),t)})))()},cancelDelete:function(){this.deleting=!1},onToolModuleSelected:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.updateForm.toolId=e.id,t.updateForm.name=e.name;case 2:case"end":return s.stop()}}),s)})))()},onToolModuleInputChange:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.updateForm.toolId=null,!(e.trim().length<2)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("tool/findAll",{where:{and:[{field:"tool_id",op:"eq",value:t.companyTool.toolId},{field:"name",op:"cn",value:e}]}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()},priceChanged:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("priceChanged");case 1:case"end":return t.stop()}}),t)})))()}}},A=P,D=Object(h["a"])(A,l,u,!1,null,null,null),N=D.exports,q={components:{"modules-table":N},data:function(){return{deleting:!1,updateForm:null,currentItem:null,currentRowDetails:null,currentDetailsItem:null,loadingItem:!1,filter:{busy:!1},toolOptions:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({items:"companyTool/filteredItems",showInnerOverlayOnTop:"app/show_inner_overlay_on_top",priceModels:"priceModel/all"})),{},{tableItems:{get:function(){return this.items.filter((function(e){return"TOOL"===e.type}))}},fields:{get:function(){return[{key:"name",label:this.$t("Name"),sortable:!0},{key:"yearlyCosts",label:this.$t("Yearly costs"),sortable:!0},{key:"actions",label:this.$t("Manage"),class:"actions"}]}}}),created:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("companyTool/findAll",{filter:e.filter,force:!0});case 1:case"end":return t.stop()}}),t)})))()},methods:{isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},calculateModulesTotal:function(e){if(e.modules&&e.modules.length>0){var t=0;return e.modules.map((function(e){e.prices.map((function(e){t+=e.price/100}))})),t}return 0},overlayClick:function(){this.currentItem?this.toggleItem(null):this.showDetails(null)},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=8;break}return s.next=5,t.$validator.reset();case 5:return s.next=7,t.$store.dispatch("companyTool/update",e);case 7:t.toggleItem(null);case 8:case"end":return s.stop()}}),s)})))()},loadItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,i;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.products||(t.loadingItem=!0),r=t.currentRowDetails.item.modules.find((function(e){return e._showDetails})),r&&(r._showDetails=!1),s.next=6,t.$store.dispatch("companyTool/findById",{id:e.id});case 6:t.currentRowDetails.item=s.sent,r&&(i=t.currentRowDetails.item.modules.find((function(e){return e.id===r.id})),i._showDetails=!0),t.$refs.modulesTable&&t.$refs.modulesTable.$forceUpdate();case 9:return s.prev=9,t.loadingItem=!1,s.finish(9);case 12:case"end":return s.stop()}}),s,null,[[0,,9,12]])})))()},showDetails:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.currentRowDetails&&(t.currentRowDetails.item._showDetails=!1),t.$store.dispatch("app/toggleInnerOverlay"),null==e||t.currentRowDetails&&t.currentRowDetails.item.id==e.item.id){s.next=10;break}return t.currentRowDetails=e,t.currentRowDetails.toggleDetails(),s.next=7,t.loadItem(e.item);case 7:t.currentRowDetails.item._showDetails=!0,s.next=11;break;case 10:t.currentRowDetails=null;case 11:case"end":return s.stop()}}),s)})))()},toggleItem:function(e){this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.id===e.id?(this.currentItem=null,this.updateForm=null,this.deleting=!1):(this.updateForm=new m["a"]({id:e.id,name:e.name,yearlyCosts:e.yearlyCosts,priceModel:e.priceModel?e.priceModel.id:null,toolId:e.toolId}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")},onToolSelected:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.updateForm.tool=e.id,t.updateForm.name=e.name;case 2:case"end":return s.stop()}}),s)})))()},onToolInputChange:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.updateForm.tool=null,!(e.trim().length<=3)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("tool/findAll",{where:{field:"name",op:"cn",value:e}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()},itemChanged:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadItem(e.currentRowDetails.item);case 1:case"end":return t.stop()}}),t)})))()}}},M=q,z=Object(h["a"])(M,r,i,!1,null,null,null);t["default"]=z.exports},"76db":function(e,t,s){"use strict";s("5696")},"7aa7":function(e,t,s){"use strict";s("9f2e")},"7c9f":function(e,t,s){},"7e26":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("router-view")},i=[],a={data:function(){return{currentComponent:null}}},n=a,o=s("2877"),c=Object(o["a"])(n,r,i,!1,null,null,null);t["default"]=c.exports},"80f7":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return e.$can("core/companyTool/create")?t("div",{staticClass:"ml-3"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-uppercase",attrs:{id:"btnNew",size:"sm",variant:"primary",title:e.$t("Create New")+" "+e.$t("Tool")},on:{click:e.togglePopOver}},[t("i",{staticClass:"mdi mdi-plus"}),e._v(" "+e._s(e.$t("New"))+" ")]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnNew",show:e.showPopOver,placement:"bottom"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("tool-form",{on:{done:e.togglePopOver}})],1)],1)],1)],1):e._e()},i=[],a=s("e67d"),n=s.n(a),o=(s("b0c0"),s("498a"),function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("suggestions",{staticClass:"sm",class:{"is-invalid":!1===e.$validateState("tool_id",e.form),"is-valid":!0===e.$validateState("tool_id",e.form)},attrs:{"v-validate":"required|min:2",options:{debounce:250,inputClass:"form-control form-control-sm",autofocus:!0,placeholder:e.$t("Name")},state:e.$validateState("tool_id",e.form),"on-input-change":e.onToolInputChange,"on-item-selected":e.onToolSelected},scopedSlots:e._u([{key:"item",fn:function(s){return t("div",{staticClass:"single-item"},[t("span",{staticClass:"name"},[e._v(e._s(s.item.name))])])}}]),model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("tool_id",e.form)))])],1)])],1),t("b-row",[t("b-col",{staticClass:"col-12"},[t("hr",{staticClass:"mt-0"}),t("loading-button",{attrs:{size:"lg",block:"",type:"submit",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,variant:"primary"}},[e._v(e._s(e.$t("Save changes")))]),"edit"===e.mode&&e.$can("core/companyTool/delete",e.input)?t("div",{staticClass:"mt-3 text-center"},[t("hr"),t("b-button",{attrs:{variant:"outline-danger",type:"button",block:""},on:{click:function(t){return t.preventDefault(),e.deleteItem.apply(null,arguments)}}},[t("i",{staticClass:"mdi mdi-trash-can"}),e._v(" "+e._s(e.$t("Delete"))+" ")])],1):e._e()],1)],1)],1)}),c=[],l=s("c7eb"),u=s("1da1"),d=s("5530"),p=(s("d3b7"),s("159b"),s("4de4"),s("b64b"),s("2f62")),m=s("9fee"),f={props:{value:{type:Object,required:!1},mode:{type:String,required:!1,default:"create"}},data:function(){return{input:null,form:new m["a"]({id:null,name:null,toolId:null})}},computed:Object(d["a"])({},Object(p["b"])({currentUser:"auth/user",priceModels:"priceModel/all"})),mounted:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.input=e.value,t.next=3,e.$store.dispatch("companyTool/findAll");case 3:return t.next=5,e.initForm();case 5:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.keys(e.input||{}).filter((function(t){return t in e.form})).forEach((function(t){return e.form[t]=e.input[t]}));case 1:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.name.trim(),t.prev=1,t.next=4,e.$validator.validateAll();case 4:if(e.vErrors.any()){t.next=22;break}return t.next=7,e.$validator.reset();case 7:if("edit"!==e.mode){t.next=13;break}return t.next=10,e.$store.dispatch("companyTool/update",e.form);case 10:e.input=t.sent,t.next=16;break;case 13:return t.next=15,e.$store.dispatch("companyTool/create",e.form);case 15:e.input=t.sent;case 16:return t.next=18,e.initForm();case 18:return t.next=20,e.$store.dispatch("companyTool/findAll",{force:!0});case 20:e.$emit("input",e.input),e.$emit("done");case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](1),console.error(t.t0.message);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})))()},deleteItem:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$can("core/companyTool/delete",e.input)){t.next=3;break}return t.next=3,e.$swal({title:e.$t("Are you sure?"),text:e.$t("You won't be able to revert this!"),type:"warning",showCancelButton:!0,confirmButtonText:e.$t("Yes, delete it!"),showLoaderOnConfirm:!0,preConfirm:function(){var t=Object(u["a"])(Object(l["a"])().mark((function t(){var s;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("toolCategory/delete",new m["a"]({id:e.input.id},null));case 3:return s=t.sent,e.$emit("done"),t.abrupt("return",s);case 6:return t.prev=6,e.$swal.close(),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[0,,6,9]])})));function s(){return t.apply(this,arguments)}return s}()});case 3:case"end":return t.stop()}}),t)})))()},onToolSelected:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function s(){return Object(l["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.form.toolId=e.id,t.form.name=e.name.trim();case 2:case"end":return s.stop()}}),s)})))()},onToolInputChange:function(e){var t=this;return Object(u["a"])(Object(l["a"])().mark((function s(){var r;return Object(l["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.form.toolId=null,!(e.trim().length<2)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("tool/findAll",{where:{field:"name",op:"cn",value:e}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()}}},v=f,h=s("2877"),b=Object(h["a"])(v,o,c,!1,null,null,null),g=b.exports,y={directives:{ClickOutside:n.a},components:{"tool-form":g},data:function(){return{option:!1,showPopOver:!1}},methods:{togglePopOver:function(){this.showPopOver=!this.showPopOver,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver})}}},w=y,_=Object(h["a"])(w,r,i,!1,null,null,null);t["default"]=_.exports},"814e":function(e,t,s){"use strict";s("c1e0")},8282:function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[c,l],attrs:Object.assign({viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},a.concat([s("path",{attrs:{d:"M17.39 13.264a.402.402 0 00-.403.402v7.604a.402.402 0 00.805 0v-7.604a.402.402 0 00-.402-.402zM12.643 13.264a.402.402 0 00-.403.402v7.604a.402.402 0 00.805 0v-7.604a.402.402 0 00-.402-.402z",fill:"#000",stroke:"#252529","stroke-width":".1"}}),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.183 22.066v-9.912a1.537 1.537 0 01.394-3.022h2.06V8.63A1.58 1.58 0 0113.23 7.04h3.572a1.58 1.58 0 011.593 1.59v.502h2.06a1.537 1.537 0 01.394 3.022v9.912a2.22 2.22 0 01-.59 1.53 1.98 1.98 0 01-1.437.622H11.21a1.98 1.98 0 01-1.437-.621 2.22 2.22 0 01-.59-1.531zm2.027 1.348h7.612c.688 0 1.223-.591 1.223-1.348V12.19H9.987v9.876c0 .757.535 1.348 1.223 1.348zm1.231-14.785a.774.774 0 01.789-.784h3.572a.775.775 0 01.789.784v.503h-5.15V8.63zm8.014 1.308H9.577a.724.724 0 100 1.448h10.878a.724.724 0 100-1.448z",fill:"#000"}}),s("path",{attrs:{d:"M9.183 12.154h.05v-.038l-.038-.01-.012.048zm-1.13-1.684l-.05-.006.05.006zm1.524-1.338v-.05.05zm2.06 0v.05h.05v-.05h-.05zm0-.503h.05-.05zm.464-1.127l-.035-.036.035.036zm1.129-.462v.05-.05zm3.572 0v.05-.05zm1.13.462l.034-.036-.035.036zm.463 1.127h-.05.05zm0 .503h-.05v.05h.05v-.05zm2.06 0v-.05.05zm1.524 1.338l.05-.006-.05.006zm-1.13 1.684l-.012-.048-.038.01v.038h.05zm-.59 11.443l-.036-.035.036.035zm-1.437.621v.05-.05zm-7.612 0v.05-.05zm-1.437-.621l.036-.035-.036.035zM20.045 12.19h.05v-.05h-.05v.05zm-10.058 0v-.05h-.05v.05h.05zm2.683-4.12l.035.036-.035-.036zm-.229.56h.05v-.001h-.05zm.789-.785l-.001.05v-.05zm3.572 0v.05h.001v-.05zm.56.225l-.035.036.035-.036zm.229.56l-.05-.001h.05zm0 .502v.05h.05v-.05h-.05zm-5.15 0h-.05v.05h.05v-.05zm-3.308 3.022v9.912h.1v-9.912h-.1zm-1.13-1.69a1.587 1.587 0 001.167 1.739l.025-.097a1.487 1.487 0 01-1.092-1.63l-.1-.012zm1.574-1.382c-.797 0-1.47.591-1.574 1.382l.1.013a1.487 1.487 0 011.474-1.295v-.1zm2.06 0h-2.06v.1h2.06v-.1zm-.05-.453v.503h.1V8.63h-.1zm.479-1.163a1.63 1.63 0 00-.48 1.164l.1-.001a1.53 1.53 0 01.45-1.092l-.07-.07zm1.164-.476a1.63 1.63 0 00-1.164.476l.07.071c.29-.29.684-.45 1.093-.447l.001-.1zm3.572 0H13.23v.1h3.572v-.1zm1.164.476a1.63 1.63 0 00-1.164-.476v.1a1.53 1.53 0 011.094.447l.07-.07zm.48 1.164a1.63 1.63 0 00-.48-1.164l-.07.07c.29.29.452.683.45 1.093h.1zm0 .502V8.63h-.1v.503h.1zm2.009-.05h-2.06v.1h2.06v-.1zm1.574 1.382a1.587 1.587 0 00-1.574-1.382v.1c.747 0 1.378.554 1.474 1.295l.1-.013zm-1.167 1.739a1.587 1.587 0 001.167-1.74l-.1.014a1.487 1.487 0 01-1.092 1.629l.025.097zm.037 9.863v-9.912h-.1v9.912h.1zm-.604 1.565a2.27 2.27 0 00.604-1.565h-.1a2.17 2.17 0 01-.576 1.496l.072.07zm-1.473.637a2.03 2.03 0 001.474-.637l-.073-.069a1.93 1.93 0 01-1.401.606v.1zm-7.612 0h7.612v-.1H11.21v.1zm-1.474-.637a2.03 2.03 0 001.474.637v-.1a1.93 1.93 0 01-1.4-.605l-.074.068zm-.603-1.565c0 .598.219 1.16.603 1.565l.073-.069a2.17 2.17 0 01-.576-1.496h-.1zm9.689 1.298H11.21v.1h7.612v-.1zm1.173-1.298c0 .734-.518 1.298-1.173 1.298v.1c.72 0 1.273-.618 1.273-1.398h-.1zm0-9.876v9.876h.1V12.19h-.1zm-10.008.05h10.058v-.1H9.987v.1zm.05 9.826V12.19h-.1v9.876h.1zm1.173 1.298c-.656 0-1.173-.564-1.173-1.298h-.1c0 .78.553 1.398 1.273 1.398v-.1zm1.424-15.33a.824.824 0 00-.243.596l.1-.001a.724.724 0 01.214-.523l-.07-.071zm.597-.24a.825.825 0 00-.597.24l.07.072a.725.725 0 01.525-.211l.002-.1zm3.571 0H13.23v.1h3.572v-.1zm.596.24a.825.825 0 00-.597-.24l.002.1a.725.725 0 01.524.212l.07-.071zm.243.596a.824.824 0 00-.243-.595l-.07.07c.138.139.215.328.213.524h.1zm0 .502V8.63h-.1v.503h.1zm-5.2.05h5.15v-.1h-5.15v.1zm-.05-.553v.503h.1V8.63h-.1zM9.577 9.987h10.878v-.1H9.577v.1zm-.674.674c0-.372.302-.674.674-.674v-.1a.774.774 0 00-.774.774h.1zm.674.674a.674.674 0 01-.674-.674h-.1c0 .427.346.774.774.774v-.1zm10.878 0H9.577v.1h10.878v-.1zm.674-.674a.674.674 0 01-.674.674v.1a.774.774 0 00.774-.774h-.1zm-.674-.674c.372 0 .674.302.674.674h.1a.774.774 0 00-.774-.774v.1z",fill:"#252529"}}),s("path",{attrs:{d:"M15.016 13.264a.402.402 0 00-.403.402v7.604a.402.402 0 00.805 0v-7.604a.402.402 0 00-.402-.402z",fill:"#000",stroke:"#252529","stroke-width":".1"}})]))}}},8406:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[e.process&&(!e.loading||e.items.length>0&&e.process.stages.length>0)?t("div",{staticClass:"editable-dashboard"},[t("div",{staticClass:"sortable-wrapper t01 horizontal"},e._l(e.process.stages,(function(s){return t("div",{key:s.id,ref:"stage_".concat(s.id),refInFor:!0,staticClass:"process-stage item sortable-item enable-drag"},[t("div",{staticClass:"card stage-card bg-light"},[t("div",[t("div",{staticClass:"card-header header pt-3"},[t("div",{staticClass:"title"},[t("h2",{staticClass:"h5 m-0 text-capitalize text-center text-overflow text-bold"},[e._v(" "+e._s(s.title)+" ")])])]),e.getProjectFromStage(s).length>0?t("div",{staticClass:"card-body"},e._l(e.getProjectFromStage(s),(function(r){return t("project-card",{key:e.constructRefForItem(r,s),ref:e.constructRefForItem(r,s),refInFor:!0,attrs:{item:r,stage:r.getStage(s.id),expanded:e.currentItem&&e.currentItem.id===r.getStage(s.id).id},on:{itemChanged:e.itemChanged,toggled:e.itemToggled,itemDetailsToggled:e.itemDetailsToggled}})})),1):t("div",{staticClass:"card-body"},[t("empty-slot")],1)])])])})),0)]):e._e(),e.loading&&0==e.items.length?t("page-loader"):e._e(),e.loading||e.process&&0!==e.process.stages.length?e._e():t("empty-page")],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4e82"),s("4de4"),s("d3b7"),s("b0c0"),s("498a"),s("99af"),s("2f62")),l=s("9fee"),u=(s("ac1f"),s("5319"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"card border py-2 mb-2 shadow-sm project-card",class:{expanded:e.expanded}},[e.editing?t("layer",{staticStyle:{width:"100%"},on:{closed:e.toggleEdit}},[t("b-card",{staticStyle:{top:"-7px",width:"300px"}},[t("project-form",{attrs:{stage:e.stage,mode:"edit"},on:{done:e.toggleEdit},model:{value:e.editItem,callback:function(t){e.editItem=t},expression:"editItem"}})],1)],1):e._e(),e.showShareFrom?t("layer",{staticStyle:{width:"100%"},on:{closed:e.toggleShare}},[t("b-card",{staticStyle:{left:"330px",top:"-7px",width:"300px"}},[t("share-link",{attrs:{project:e.item,stage:e.stage},on:{createdLink:function(t){return e.createdLink(t)}}})],1)],1):e._e(),t("div",{staticClass:"card-header header"},[t("h3",{staticClass:"h5 m-0 text-capitalize text-overflow text-bold"},[e._v(" "+e._s(e.item.name)+" ")]),t("div",{staticClass:"tools"},[e.$can("core/project/update",e.item)?t("span",{staticClass:"btn-action",on:{click:e.toggleEdit}},[t("i",{staticClass:"mdi mdi-pencil"})]):e._e()])]),t("div",{staticClass:"card-body py-2"},[t("div",[t("span",{staticClass:"project-status",class:"project-status-"+e.stage.status.replace(" ","_").toLowerCase()},[e._v(" "+e._s(e.stage.status)+" ")]),t("div",{staticClass:"stats",on:{click:function(t){return t.stopPropagation(),e.toggle.apply(null,arguments)}}},[t("div",{staticClass:"content"},[e.item.hasReviews?t("span",{staticClass:"percent",class:{negative:e.item.getStageConsolidatedPercent(e.stage.id)<0}},[e._v(e._s(e.item.getStageConsolidatedPercent(e.stage.id)>=0?"+":"")+e._s(e._f("numberFormat")(e.item.getStageConsolidatedPercent(e.stage.id),"0.00"))+" %")]):e._e()])])]),t("div",{staticClass:"details"},[e.detailsForm.busy?t("div",{staticClass:"text-center p-3"},[t("b-spinner",{attrs:{variant:"primary"}})],1):t("div",[e.getStageIdeasLength(e.stage)>0?t("div",{staticClass:"card bg-primary rounded-0 text-white mt-3 mb-0 ideas detail-card"},[t("div",{staticClass:"card-body px-3 py-2",staticStyle:{display:"flex","flex-direction":"column"}},[e.showIdeas?t("layer",{on:{closed:e.toggleIdeas}},[t("div",{staticClass:"details-popup"},[t("idea-table",{attrs:{project:e.item,stage:e.stage,items:e.item.getIdeasByStage(e.stage.id)},on:{closed:e.toggleIdeas}})],1)]):e._e(),t("strong",{staticClass:"h5 d-block mb-0"},[e._v(e._s(e.$t("Ideas")))]),t("span",{staticClass:"text-light"},[e._v(e._s(e.$tc("idea.count",e.item.getIdeasByStage(e.stage.id).length)))]),t("span",{staticClass:"summary",on:{click:function(t){return t.stopPropagation(),e.toggleIdeas.apply(null,arguments)}}},[e._v(e._s(e.item.getIdeasImpactByStage(e.stage.id)>=0?"+":"")+e._s(e._f("numberFormat")(e.item.getIdeasImpactByStage(e.stage.id),"0.00"))+"%")])],1)]):e._e(),e.item.issues.filter((function(t){return t.projectStageId===e.stage.id})).length>0?t("div",{staticClass:"card bg-danger rounded-0 text-white mt-0 issues detail-card"},[t("div",{staticClass:"card-body px-3 py-2"},[e.showIssues?t("layer",{on:{closed:e.toggleIssues}},[t("div",{staticClass:"details-popup"},[t("issue-table",{attrs:{project:e.item,stage:e.stage,items:e.item.getIssuesByStage(e.stage.id)},on:{closed:e.toggleIssues}})],1)]):e._e(),t("strong",{staticClass:"h5 d-block mb-0"},[e._v(e._s(e.$t("Issues")))]),t("span",{staticClass:"text-light"},[e._v(e._s(e.$tc("issue.count",e.item.getIssuesByStage(e.stage.id).length)))]),t("span",{staticClass:"summary",on:{click:function(t){return t.stopPropagation(),e.toggleIssues.apply(null,arguments)}}},[e._v(e._s(e.item.getIssuesImpactByStage(e.stage.id)>=0?"+":"")+e._s(e._f("numberFormat")(e.item.getIssuesImpactByStage(e.stage.id),"0.00"))+" %")])],1)]):e._e()]),"EVALUATIONS_PENDING"===e.stage.status&&"PERIODIC"===e.item.evaluationType&&"NORMAL"===e.item.type?t("div",{staticClass:"mt-3"},[t("loading-button",{attrs:{size:"lg",block:"",loading:e.form.busy},on:{click:e.nextStage}},[e._v(e._s(e.$t("action.next",{name:e.$t("Stage")})))])],1):"EVALUATIONS_PENDING"===e.stage.status?t("div",{staticClass:"mt-3"},[t("loading-button",{attrs:{size:"lg",block:"",loading:e.form.busy},on:{click:e.completeStage}},[e._v(e._s(e.$t("action.close",{name:e.$t("Stage")})))])],1):e._e(),"STARTED"===e.stage.status&&"NORMAL"===e.item.type?t("div",{staticClass:"mt-3"},[t("loading-button",{attrs:{size:"lg",block:"",loading:e.form.busy},on:{click:e.nextStage}},[e._v(e._s(e.$t("action.next",{name:e.$t("Stage")})))])],1):e._e(),"STARTED"===e.stage.status&&"ON_GOING"===e.item.type?t("div",{staticClass:"mt-3"},[t("loading-button",{attrs:{size:"lg",block:"",loading:e.form.busy},on:{click:e.completeStage}},[e._v(e._s(e.$t("action.evaluate",{name:e.$t("Stage")})))])],1):e._e(),"FINISHED"!==e.stage.status?t("div",{staticClass:"mt-3"},[t("loading-button",{attrs:{size:"lg",block:"",disabled:e.detailsForm.busy},on:{click:e.toggleShare}},[e._v(e._s(e.$t("Share Task"))+" ")]),t("div",{staticClass:"mt-3"},[t("share-detail",{attrs:{shareLinks:e.shareLinks.filter((function(t){return t.projectId==e.item.id}))},on:{delLink:function(t){return e.deleteLink(t)}}})],1)],1):e._e()])])],1)}),d=[],p=s("2909"),m=(s("6062"),s("3ca3"),s("ddb0"),s("d81d"),s("b90e")),f=(s("a4d3"),s("e01a"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"card rounded-0",staticStyle:{width:"600px"}},[t("div",{staticClass:"card-header bg-danger rounded-0"},[t("h3",{staticClass:"h5 m-0"},[e._v(e._s(e.$t("name.for",{name:e.$t("Issues"),for:e.stage.title}))+" "+e._s(e.project.name))]),t("div",{staticClass:"tools"},[t("span",{staticClass:"summary"},[e._v(e._s(e.project.getIssuesImpactByStage(e.stage.id)>=0?"+":"")+e._s(e._f("numberFormat")(e.project.getIssuesImpactByStage(e.stage.id),"0.00"))+"%")]),t("span",{staticClass:"close-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[t("i",{staticClass:"mdi mdi-close"})])])]),t("div",{staticClass:"card-body"},[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"title","primary-key":"id",hover:"",fields:e.fields,items:e.items,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria")},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"60%"}}),t("col",{staticStyle:{width:"10%"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(issue)",fn:function(t){return[e._v(" "+e._s(t.item.description)+" ")]}},{key:"cell(value)",fn:function(s){return[t("span",{class:{"text-danger":s.item.totalValue<0,"text-success":s.item.totalValue>=0}},[e._v(e._s(e._f("numberFormat")(100*s.item.totalValue/e.project.budget,"0.00"))+" %")])]}}])})],1)])}),v=[],h={props:{project:{required:!0,type:Object},stage:{required:!0,type:Object},items:{required:!0,type:Array}},computed:{fields:{get:function(){return[{key:"issue",label:this.$t("Issue"),sortable:!1},{key:"value",label:this.$t("Value"),sortable:!1}]}}},mounted:function(){},methods:{close:function(){this.$emit("closed")}}},b=h,g=s("2877"),y=Object(g["a"])(b,f,v,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card rounded-0",staticStyle:{width:"600px"}},[t("div",{staticClass:"card-header bg-primary rounded-0"},[t("h3",{staticClass:"h5 m-0"},[e._v(e._s(e.$t("name.for",{name:e.$t("Ideas"),for:e.stage.title}))+" "+e._s(e.project.name))]),t("div",{staticClass:"tools"},[t("span",{staticClass:"summary"},[e._v(e._s(e.project.getIdeasImpactByStage(e.stage.id)>=0?"+":"")+e._s(e._f("numberFormat")(e.project.getIdeasImpactByStage(e.stage.id),"0.00"))+"%")]),t("span",{staticClass:"close-btn",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[t("i",{staticClass:"mdi mdi-close"})])])]),t("div",{staticClass:"card-body"},[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"title","primary-key":"id",hover:"",fields:e.fields,items:e.items,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria")},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"60%"}}),t("col",{staticStyle:{width:"10%"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(idea)",fn:function(t){return[e._v(" "+e._s(t.item.title)+" ")]}},{key:"cell(value)",fn:function(s){return[t("span",{class:{"text-danger":s.item.consolidatedValue<0,"text-success":s.item.consolidatedValue>=0}},[e._v(" "+e._s(e._f("numberFormat")(100*s.item.consolidatedValue/e.project.budget,"0.00"))+" %")])]}}])})],1)])},x=[],I={props:{project:{required:!0,type:Object},stage:{required:!0,type:Object},items:{required:!0,type:Array}},computed:{fields:{get:function(){return[{key:"idea",label:this.$t("Idea"),sortable:!1},{key:"value",label:this.$t("Value"),sortable:!1}]}}},mounted:function(){},methods:{close:function(){this.$emit("closed")}}},O=I,k=Object(g["a"])(O,_,x,!1,null,null,null),C=k.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"270px","min-height":"50px"}},[t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group select required"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"urlName",disabled:e.form.busy,placeholder:e.$t("Name"),type:"text",name:"name",state:e.$validateState("name",e.form),autofocus:""},model:{value:e.form.urlName,callback:function(t){e.$set(e.form,"urlName","string"===typeof t?t.trim():t)},expression:"form.urlName"}}),t("label",{attrs:{for:"name"}},[e._v(e._s(e.$t("URL Name")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("name",e.form)))])],1)]),t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"idea_edit_path_container-body-process-select-title"},[e._v(" "+e._s(e.$t("roles"))+" ")]),t("role-selector",{staticClass:"idea_edit_path_select_idea_roles",attrs:{name:"idea_roles",id:"idea_roles",autocomplete:"idea_roles",placeholder:e.$t("Roles"),disabled:e.form.busy,"show-field":!0,state:e.$validateState("companyRoleIds",e.form),items:e.companyRoles,"show-add-btn":!1},on:{input:e.changeCompanyRole},model:{value:e.form.companyRoleIds,callback:function(t){e.$set(e.form,"companyRoleIds",t)},expression:"form.companyRoleIds"}})],1)]),t("b-col",{staticClass:"col-12"},[t("h4",[e._v(e._s(e.$t("Access")))]),e.ideas.length?t("h5",[e._v("( "+e._s(e.$tc("idea.count",e.ideas.length))+" )")]):e._e(),e.idealoading?t("div",{staticClass:"text-center p-3"},[t("b-spinner",{attrs:{variant:"primary"}})],1):t("div",{staticClass:"form-label-group access-wrapper"},[e.ideas.length?t("div",e._l(e.ideas,(function(s){return t("div",[t("div",[t("h5",{staticStyle:{color:"#4294d0"}},[e._v(e._s(s.title))]),t("p",{staticStyle:{color:"#888"}},[e._v(e._s(s.stageTitle))])])])})),0):t("div",[e._v(" "+e._s(e.$t("No"))+" "+e._s(e.$t("Idea"))+" ")])])])],1),t("p",{staticStyle:{color:"red","text-align":"center"}},[e._v(e._s(e.$t("You are sharing these company data.")))]),t("b-row",[t("b-col",[t("loading-button",{attrs:{block:"",size:"lg",type:"submit",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,variant:"primary"}},[e._v(" "+e._s(e.$t("Create Link"))+" ")])],1)],1)],1)],1)},j=[],S=s("53ca"),E=(s("caad"),s("2532"),{props:{project:{required:!0,type:Object},stage:{required:!0,type:Object}},data:function(){return{form:new l["a"]({urlName:null,companyRoleIds:null}),items:{required:!0,type:Array},ideas:{required:!0,type:Array},idealoading:!0}},computed:Object(o["a"])({},Object(c["b"])({companyRoles:"companyRole/all",currentUser:"auth/user"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("companyRole/findAll");case 2:return t.next=4,e.$store.dispatch("role/findAll");case 4:e.getInstructionList();case 5:case"end":return t.stop()}}),t)})))()},methods:{close:function(){this.$emit("closed")},changeCompanyRole:function(){this.idealoading=!0;var e=this.form.companyRoleIds;this.ideas=this.items.filter((function(t){if(null==t.companyRoleIds||!e.length||"undefined"==t.companyRoleIds)return!0;for(var s=0;s<e.length;s++)if(t.companyRoleIds.includes(e[s]))return!0;return!1})),this.idealoading=!1},getInstructionList:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.idealoading=!0,t.next=3,e.project.getIdeasByStage(e.stage.id);case 3:return e.items=t.sent,t.next=6,Promise.all(e.items.map(function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(s){var r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("idea/findById",{id:s.ideaId,force:!0});case 2:r=t.sent,s.companyRoleIds=r.companyRoleIds,s.stageTitle=e.getStageTitle(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:e.ideas=e.items,e.idealoading=!1;case 8:case"end":return t.stop()}}),t)})))()},getStageTitle:function(e){var t=e.parent,s=t.title,r="";if("object"===Object(S["a"])(t.operation)){r=t.operation.title+" > ";var i=t.operation.stage.title;r=i+">"+r}else"object"===Object(S["a"])(t.stage)&&(r=t.stage.title+" > ");return r+s},save:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$validator.validateAll();case 3:if(e.vErrors.any()){t.next=11;break}return e.form.fields=Object(o["a"])(Object(o["a"])({},e.form.fields),{},{projectId:e.project.id}),t.next=7,e.$store.dispatch("shareLink/create",e.form);case 7:if(!t.sent){t.next=11;break}e.$emit("createdLink",!0),e.close(),window.vm.$snotify.success(e.$t("ShareLink created successfully."),{timeout:5e3,showProgressBar:!0,closeOnClick:!1,pauseOnHover:!1});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}}),T=E,R=(s("bde4"),Object(g["a"])(T,$,j,!1,null,null,null)),F=R.exports,P=function(){var e=this,t=e._self._c;return e.shareLinks.length?t("div",e._l(e.shareLinks,(function(s){return t("div",{key:s.id,attrs:{title:s.urlName}},[t("div",{staticClass:"px-2 pt-3 pb-2 rounded-0 bg-primary text-white border-bottom",staticStyle:{width:"270px","min-height":"50px"}},[t("h2",{staticClass:"h5 mb-2 text-center"},[e._v(e._s(s.urlName))]),t("div",{staticClass:"bg-primary text-white p-1 bg-light"},[t("b-input-group",[t("b-form-input",{staticStyle:{background:"transparent !important",border:"none !important",height:"30px","font-size":"14px"},attrs:{disabled:!0,value:e.populateLink(s.urlHash)}}),t("b-input-group-append",[t("div",[t("b-button",{staticClass:"btn text-white border outline-none bg-primary",staticStyle:{height:"100%","z-index":"0"},attrs:{variant:"transparent"},on:{click:function(t){return e.copyLink(s.id)}}},[e._v("Copy")])],1),t("confirm-button",{staticStyle:{height:"100%","z-index":"0"},attrs:{variant:"transparent","confirm-message":e.$t("This action cannot be undone!"),"confirm-title":e.$t("Delete item?"),"confirm-text":e.$t("Delete"),"btn-class":"text-white border outline-none bg-primary z-0","show-overlay":!1,btnStyle:"height:100%",block:""},on:{confirm:function(t){return e.deleteLink(s.id)}}},[e._v(" Delete ")])],1)],1)],1)])])})),0):e._e()},A=[],D={props:{shareLinks:{required:!0}},data:function(){return{}},methods:{populateLink:function(e){return"https://devcore.app/share/"+e},copyLink:function(e){var t=this.shareLinks.filter((function(t){return t.id==e}));navigator.clipboard.writeText("https://devcore.app/share/"+t[0].urlHash),window.vm.$snotify.success(this.$t("Copied to clipboard."),{timeout:1e3,showProgressBar:!0,closeOnClick:!1,pauseOnHover:!1})},deleteLink:function(e){this.$emit("delLink",e),window.vm.$snotify.success(this.$t("ShareLink deleted successfully."),{timeout:1e3,showProgressBar:!0,closeOnClick:!1,pauseOnHover:!1})},close:function(){this.$emit("closed")},save:function(){return Object(n["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{console.log("save")}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})))()}}},N=D,q=Object(g["a"])(N,P,A,!1,null,null,null),M=q.exports,z={components:{"project-form":m["a"],"idea-table":C,"issue-table":w,"share-link":F,"share-detail":M},props:{item:{type:Object,required:!0},stage:{type:Object,required:!0},expanded:{required:!1,type:Boolean,default:function(){return!0}}},data:function(){return{dataExpanded:!1,form:{},editing:!1,editItem:null,dataItem:null,detailsForm:{},showIdeas:!1,showIssues:!1,showShareFrom:!1}},computed:Object(o["a"])({},Object(c["b"])({shareLinks:"shareLink/all"})),methods:{deleteLink:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("shareLink/delete",new l["a"]({id:e}));case 2:case"end":return s.stop()}}),s)})))()},createdLink:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("done");case 1:case"end":return e.stop()}}),e)})))()},getStageIdeasLength:function(e){return e.ideas.length},toggle:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("toggled",e.item,e.stage),t.next=3,e.loadDetails();case 3:case"end":return t.stop()}}),t)})))()},initEdit:function(){var e,t,s=null!==(e=Object(p["a"])(new Set(null===(t=this.item.companyTools)||void 0===t?void 0:t.map((function(e){return e.id})))))&&void 0!==e?e:[];this.editItem={id:this.item.id,ideaIds:Object(p["a"])(new Set(this.item.ideas.map((function(e){return e.ideaId})))),toolIds:s,userIds:this.item.users.map((function(e){return e.id})),name:this.item.name,budget:this.item.budget,process:this.item.process?this.item.process.id:this.item.processId,stage:this.stage.processStageId,type:this.item.type,useAdvanced:this.item.useAdvanced,issueEvaluationRoles:this.item.issueEvaluationRoles,issueTemplateRoles:this.item.issueTemplateRoles,shareAccessRoles:this.item.shareAccessRoles}},toggleEdit:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editing){t.next=4;break}return t.next=3,e.loadDetails();case 3:e.initEdit();case 4:e.editing=!e.editing;case 5:case"end":return t.stop()}}),t)})))()},loadDetails:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.detailsForm={id:e.item.id,busy:!1},t.next=3,e.$store.dispatch("project/findById",e.detailsForm);case 3:return t.next=5,e.$store.dispatch("shareLink/findAll",{force:!0});case 5:case"end":return t.stop()}}),t)})))()},nextStage:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form=new l["a"]({id:e.item.id}),t.next=3,e.$store.dispatch("project/nextStage",e.form);case 3:e.$emit("changed",e.item);case 4:case"end":return t.stop()}}),t)})))()},completeStage:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="NORMAL"===e.item.type?[e.stage.id]:Object(p["a"])(e.item.stages.map((function(e){return e.id}))),e.form=new l["a"]({id:e.item.id,stageId:s}),t.next=4,e.$store.dispatch("project/completeStage",e.form);case 4:return t.next=6,e.$store.dispatch("shareLink/findAll",{force:!0});case 6:e.$emit("changed",e.item);case 7:case"end":return t.stop()}}),t)})))()},toggleIdeas:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showIdeas=!e.showIdeas,e.$emit("itemDetailsToggled",e.showIdeas,e.item,e.stage);case 2:case"end":return t.stop()}}),t)})))()},toggleIssues:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showIssues=!e.showIssues,e.$emit("itemDetailsToggled",e.showIssues,e.item,e.stage);case 2:case"end":return t.stop()}}),t)})))()},toggleShare:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showShareFrom=!e.showShareFrom;case 1:case"end":return t.stop()}}),t)})))()}}},L=z,V=Object(g["a"])(L,u,d,!1,null,null,null),B=V.exports,U=s("b279"),H={components:{"project-card":B},data:function(){return{deleting:!1,updateForm:null,currentItem:null,loadingItem:!1,filter:{busy:!1},toolOptions:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({filteredItems:"project/filteredItems",loading:"project/loading",currentProcess:"process/current",showInnerOverlayOnTop:"app/show_inner_overlay_on_top"})),{},{process:{get:function(){return this.currentProcess("projects").process}},items:{get:function(){if(!this.process)return[];var e=this.$store.getters["project/filteredByprocess"](this.process.id);return e}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.process){t.next=5;break}return t.next=3,e.$store.dispatch("process/findById",{id:e.process.id,force:!0});case 3:return t.next=5,e.$store.dispatch("project/findByProcess",{id:e.process.id,force:!0});case 5:case"end":return t.stop()}}),t)})))()},methods:{overlayClick:function(){this.currentItem?this.toggleItem(null):this.showDetails(null)},getProjectFromStage:function(e){var t=this.$store.getters["project/filteredByprocess"](this.process.id).filter((function(t){return t.getStage(e.id)&&"NOT_STARTED"!=t.getStage(e.id).status})).sort((function(t,s){var r=t.getStage(e.id),i=s.getStage(e.id);return r.status!=i.status?"STARTED"===r.status?-1:1:t.name<s.name?-1:1}));return t},isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=6;break}return s.next=5,t.$store.dispatch("toolCategory/update",e);case 5:t.toggleItem(null);case 6:case"end":return s.stop()}}),s)})))()},loadItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.products||(t.loadingItem=!0),s.next=4,t.$store.dispatch("toolCategory/findById",{id:e.id});case 4:t.currentRowDetails.item=s.sent;case 5:return s.prev=5,t.loadingItem=!1,s.finish(5);case 8:case"end":return s.stop()}}),s,null,[[0,,5,8]])})))()},showDetails:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.currentRowDetails&&(t.currentRowDetails.item._showDetails=!1),t.$store.dispatch("app/toggleInnerOverlay"),null==e||t.currentRowDetails&&t.currentRowDetails.item.id==e.item.id){s.next=10;break}return t.currentRowDetails=e,t.currentRowDetails.toggleDetails(),s.next=7,t.loadItem(e.item);case 7:t.currentRowDetails.item._showDetails=!0,s.next=11;break;case 10:t.currentRowDetails=null;case 11:case"end":return s.stop()}}),s)})))()},toggleItem:function(e){this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.id===e.id?(this.currentItem=null,this.updateForm=null,this.deleting=!1):(this.updateForm=new l["a"]({id:e.id,name:e.name}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")},onToolSelected:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.updateForm.toolId=e.id,t.updateForm.name=e.name;case 2:case"end":return s.stop()}}),s)})))()},onToolInputChange:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.updateForm.toolId=null,!(e.trim().length<=3)){s.next=3;break}return s.abrupt("return",[]);case 3:return s.next=5,t.$store.dispatch("tool/findAll",{where:{field:"name",op:"like",value:e}});case 5:return r=s.sent,s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})))()},constructRefForItem:function(e,t){return"project_stage_".concat(e.id,"_").concat(t.id)},itemToggled:function(e,t){this.currentItem&&t.id===this.currentItem.id?this.currentItem=null:this.currentItem=t},itemDetailsToggled:function(e,t,s){if(e){var r=this.$refs["stage_".concat(s.stageId)];r&&this.$nextTick((function(){return Object(U["f"])(r[0])}))}},itemChanged:function(e){e&&this.loadItem(e)}}},Y=H,W=Object(g["a"])(Y,r,i,!1,null,null,null);t["default"]=W.exports},"8b50":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("process-selector",{attrs:{"max-level":"process",section:"analysis","on-apply":e.onApply}})],1)},i=[],a=s("c7eb"),n=s("1da1"),o={methods:{onApply:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.process){s.next=5;break}return s.next=3,t.$store.dispatch("process/findById",{id:e.process.id});case 3:return s.next=5,t.$store.dispatch("project/findByProcess",{id:e.process.id});case 5:case"end":return s.stop()}}),s)})))()}}},c=o,l=s("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},"8d00":function(e,t,s){"use strict";s("f25b")},"8d1b":function(e,t,s){},"8d55":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("router-view")},i=[],a={data:function(){return{currentComponent:null}}},n=a,o=s("2877"),c=Object(o["a"])(n,r,i,!1,null,null,null);t["default"]=c.exports},"902c":function(e,t,s){"use strict";s("8d1b")},"9b63":function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[c,l],attrs:Object.assign({viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},a.concat([s("circle",{attrs:{cx:"11",cy:"11.5",r:"11",fill:"#E1E1E1"}}),s("path",{attrs:{d:"M11.527 16.5v-4.473H16v-1.054h-4.473V6.5h-1.054v4.473H6v1.054h4.473V16.5h1.054z",fill:"#4294D0"}})]))}}},"9c0c":function(e,t,s){},"9f2e":function(e,t,s){},"9f50":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn pgAnalysis"},[e.analysisReady?t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"left"},[t("div",{staticClass:"left-top"},[t("div",{staticClass:"left-top-first"},[e._v(" "+e._s(e._f("formatTitle")(e.title))+" ")])]),t("div",{staticClass:"left-middle"},[t("general")],1),e._m(0)]),t("div",{staticClass:"right"},[t("div",{staticClass:"right-bottom__items"},e._l(e.getLabels,(function(s,r,i){return t("div",{key:i,staticClass:"analysis__topic-item",class:i===e.activeIndex?"active":"inactive",on:{click:function(t){return e.setTabActive(s,r,i)}}},[e._v(" "+e._s(s.toUpperCase())+" ")])})),0)])]):t("empty-page",{attrs:{iconType:"work_in_progress"}},[t("template",{slot:"content"},[e._v(" "+e._s(e.$t("Page Under Construction",{page:e.$t("Analysis")}))+" ")])],2)],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-bottom"},[t("div",{staticClass:"left-bottom-first"},[t("div",{staticClass:"left-bottom-first-label"},[e._v("START VALUE")]),t("div",{staticClass:"left-bottom-first-value"},[e._v("130.060€")])]),t("div",{staticClass:"left-bottom-second"},[t("div",{staticClass:"left-bottom-second-label"},[e._v("VALUE THIS YEAR")]),t("div",{staticClass:"left-bottom-second-value"},[e._v("216.189€")])]),t("div",{staticClass:"left-bottom-third"},[t("div",{staticClass:"left-bottom-third-label"},[e._v("POTENTIAL VALUE THIS YEAR")]),t("div",{staticClass:"left-bottom-third-value"},[e._v("266.000€")])])])}],a=s("5530"),n=(s("d3b7"),s("25f0"),function(){var e=this,t=e._self._c;return t("div",[t("line-chart",{attrs:{labels:e.getXAxesLabels,datasets:e.getChartData,options:e.chartOptions,styles:e.myStyles}})],1)}),o=[],c=(s("d81d"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"analysis-line-chart__container"},[t("canvas",{ref:"analysis__lineChart",attrs:{width:e.styles.width,height:e.styles.height,position:e.styles.position}}),t("div",{attrs:{id:"chart-legends"}})])}),l=[],u=(s("fb6a"),s("14d9"),s("3c65"),s("99af"),s("a15b"),s("13d5"),s("30ef")),d=s.n(u),p={props:{options:{type:Object,default:function(){return{}}},datasets:{type:Array,default:function(){return[]}},labels:{type:Array,default:function(){return[]}},styles:{type:Object,default:function(){return{}}}},methods:{legendClickCallback:function(e){e=e||window.event;var t=e.target||e.srcElement;while("LI"!==t.nodeName)t=t.parentElement;var s=t.parentElement,r=Array.prototype.slice.call(s.children).indexOf(t);this.chart.legend.options.onClick.call(this.chart,e,this.chart.legend.legendItems[r]),this.chart.isDatasetVisible(r)?t.classList.remove("hidden"):t.classList.add("hidden")},renderChart:function(){this.chart=new d.a(this.$refs.analysis__lineChart,{type:"line",data:{labels:this.labels,datasets:this.datasets},options:Object(a["a"])(Object(a["a"])({},this.options),{},{maintainAspectRatio:!1,responsive:!0,legendCallback:function(e){var t=[],s={value:0,color:"#000000",currency:"€",text:"Potential"};t.push("<ul class=legend__block-content>");for(var r=function(){a=e.data.datasets[i].label?e.data.datasets[i].label:"";var r=function(e,t){return e+t},n=function(e){var t={euro:"€",dollar:"$"};return"".concat(e.data.reduce(r)," ").concat(t[e.currency.value])},o=e.data.datasets[i],c="legend__block-item-outer";t.push('<li style="padding:5px;letter-spacing:1px" class="'.concat(c,'">\n\t\t\t\t\t\t\t\t<div style="color:').concat(o.textColor,'" class="legend__block-item-inner">').concat(a,'</div>\n\t\t\t\t\t\t\t\t<div style="color:').concat(o.currency.color,'" class="legend__block-item-inner"">\n\t\t\t\t\t\t\t\t').concat(n(o),"</div></li>\n\t\t\t\t\t\t\t\t")),s.value+=o.data.reduce(r),s.color=o.textColor},i=0;i<e.data.datasets.length;i++){var a;r()}return t.push("</ul>"),t.unshift('\n\t\t\t\t\t\t<div class="legend__block-total-block">\n\t\t\t\t\t\t<div class="legend__block-total-text">'.concat(s.text.toUpperCase(),'</div>\n\t\t\t\t\t\t<div class="legend__block-total-value">').concat(s.value," ").concat(s.currency,"</div>\n\t\t\t\t\t\t</div>")),t.join("")},tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){var s=t.datasets[e.datasetIndex].label+" - "+t.labels[e.index],r=t.datasets[e.datasetIndex].data[e.index];return s+": "+r.toLocaleString()}}},legend:{display:!1}})});var e=document.getElementById("chart-legends");e.innerHTML=this.chart.generateLegend();for(var t=document.getElementsByClassName("legend__block-item-outer"),s=0;s<t.length;s+=1)t[s].addEventListener("click",this.legendClickCallback,!1);this.chart.update()}},beforeDestroy:function(){this.chart&&this.chart.destroy()},mounted:function(){this.renderChart()}},m=p,f=(s("2241"),s("2877")),v=Object(f["a"])(m,c,l,!1,null,null,null),h=v.exports,b=(s("dca8"),Object.freeze({savingsgrowth:"Savings + growth",toolbenefits:"Tool benefits",operationbenefits:"Operation benefits",operationvalue:"Operation value"}),Object.freeze({savingsgrowth:"Savings + growth",toolbenefits:"Tool benefits",operationbenefits:"Operation benefits",operationvalue:"Operation value"})),g=(Object.freeze({superadmin:"Super Admin",companyadmin:"Company Admin",companymanager:"Company Manager",companyuser:"Company User"}),s("2f62")),y={hidden:!1,fill:"start",borderWidth:1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#add0eb",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#4394D0",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"euro",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#4394D0";return Object(a["a"])(Object(a["a"])({},y),{},{data:e,label:t,backgroundColor:s,borderColor:r,currency:{value:i,color:n}})},_={elements:{line:{tension:0}},scales:{yAxes:[{display:!0,stacked:!0,position:"right",scaleLabel:{padding:10},ticks:{beginAtZero:!0,padding:10,fontColor:"transparent"},gridLines:{display:!0,zeroLineColor:"#777",color:"#777",drawOnChartArea:!1,tickMarkLength:0,z:1}}],xAxes:[{display:!0,stacked:!0,scaleLabel:{padding:10},ticks:{beginAtZero:!0,fontColor:"#000000",padding:10},gridLines:{display:!0,zeroLineColor:"#777",color:"#777",drawOnChartArea:!1,tickMarkLength:0,z:1}}]}},x={name:"General",components:{"line-chart":h},data:function(){return{chartOptions:_,chartWidth:400,chartHeight:400}},computed:Object(a["a"])(Object(a["a"])({},Object(g["b"])("analysis",["activeTab","selectedTabView","chartTimespan","chartDatasets"])),{},{getXAxesLabels:function(){return this.chartTimespan},getChartData:function(){var e=this.chartDatasets.map((function(e){return w(e.data,e.label)}));return e},getSelectedLabels:function(){var e="";switch(this.activeTab){case b.savingsgrowth:e="Savings + growth";break;case b.toolbenefits:e="Tool benefits";break;case b.operationbenefits:e="Operation benefits";break;case b.operationvalue:e="Operation value";break;default:e="Savings + growth"}return e},myStyles:function(){return{width:this.chartWidth,height:this.chartHeight,position:"relative"}}})},I=x,O=Object(f["a"])(I,n,o,!1,null,null,null),k=O.exports,C={components:{general:k},data:function(){return{activeIndex:0,title:"savingsgrowth"}},filters:{formatTitle:function(e){var t="";switch(e){case b.savingsgrowth.toString():t="Savings + growth";break;case b.toolbenefits.toString():t="Tool benefits";break;case b.operationbenefits:t="Operation benefits";break;case b.operationvalue:t="Operation value";break;default:t="Savings + growth"}return t.toUpperCase()}},computed:Object(a["a"])(Object(a["a"])({},Object(g["b"])("analysis",["analysisReady"])),{},{getTitle:function(){var e="";switch(this.title){case b.savingsgrowth:e="Savings + growth";break;case b.toolbenefits:e="Tool benefits";break;case b.operationbenefits:e="Operation benefits";break;case b.operationvalue:e="Operation value";break;default:e="Savings + growth"}return e.toUpperCase()},getLabels:function(){return b}}),methods:{setTabActive:function(e,t,s){this.title=e,this.activeIndex=s}}},$=C,j=(s("4802"),Object(f["a"])($,r,i,!1,null,null,null));t["default"]=j.exports},a08f:function(e,t,s){"use strict";s.r(t);s("ac1f"),s("5319");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[t("div",{staticClass:"container-fluid"},[t("b-card",[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"name","primary-key":"id",hover:"",fields:e.fields,items:e.items,busy:e.loadingForm.busy,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria")},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{}),t("col",{staticStyle:{width:"20%"}}),t("col",{staticStyle:{width:"20%"}}),t("col",{staticStyle:{width:"300px"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(title)",fn:function(t){return[e._v(e._s(t.item.title))]}},{key:"cell(status)",fn:function(s){return[t("span",{staticClass:"project-status",class:"project-status-"+s.item.status.replace(" ","_").toLowerCase()},[e._v(e._s(s.item.status))])]}},{key:"cell(stage)",fn:function(s){return[t("span",{staticClass:"text-capitalize text-overflow"},[e._v(e._s(s.item.currentStage?s.item.currentStage.title:"N/A"))])]}},{key:"cell(actions)",fn:function(s){return[t("table-tools-buttons",{attrs:{item:s.item,"show-edit-button":e.$can("core/project/update",s.item),"show-delete-button":e.$can("core/project/delete",s.item),store:"project"},on:{editItem:function(t){return e.toggleItem(s.item)}}})]}}])})],1)],1)])},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("d81d"),s("b0c0"),s("2f62")),l={components:{},data:function(){return{loadingForm:{loading:!1},detailsForm:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({loading:"project/loading",currentProcess:"process/current",showInnerOverlayOnTop:"app/show_inner_overlay_on_top"})),{},{process:{get:function(){return this.currentProcess("projects").process}},items:{get:function(){return this.process?this.$store.getters["project/filteredByprocess"](this.process.id):[]}},fields:{get:function(){return[{key:"name",label:this.$t("Name"),sortable:!0},{key:"status",label:this.$t("Status"),sortable:!0},{key:"stage",label:this.$t("Current stage"),sortable:!1},{key:"actions",label:this.$t("Manage"),class:"actions"}]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.process){t.next=7;break}return e.loadingForm={id:e.process.id,force:!0},t.next=4,e.$store.dispatch("process/findById",e.loadingForm);case 4:return e.loadingForm={id:e.process.id,force:!0},t.next=7,e.$store.dispatch("project/findByProcess",e.loadingForm);case 7:case"end":return t.stop()}}),t)})))()},methods:{isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},initEdit:function(e){this.editItem={id:e.id,ideas:e.ideas.map((function(e){return e.ideaId})),tools:e.tools.map((function(e){return e.id})),users:e.users.map((function(e){return e.id})),name:e.name,budget:e.budget,process:e.process.id,stage:e.currentStage.stageId}},loadDetails:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.detailsForm={id:e.item.id,busy:!1},t.next=3,e.$store.dispatch("project/findById",e.detailsForm);case 3:case"end":return t.stop()}}),t)})))()},toggleEdit:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editing){t.next=4;break}return t.next=3,e.loadDetails();case 3:e.initEdit();case 4:e.editing=!e.editing;case 5:case"end":return t.stop()}}),t)})))()},toggleItem:function(e){return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}}),t)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},a11b:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search users")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])({},Object(c["b"])({items:"user/filteredItems",filter:"user/filter"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("user/filter",e);case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},a2b0:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search tools")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])({},Object(c["b"])({items:"companyTool/filteredItems",filter:"companyTool/filter"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("companyTool/filter",e);case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},a2bf:function(e,t,s){"use strict";var r=s("e8b5"),i=s("07fa"),a=s("3511"),n=s("0366"),o=function(e,t,s,c,l,u,d,p){var m,f,v=l,h=0,b=!!d&&n(d,p);while(h<c)h in s&&(m=b?b(s[h],h,t):s[h],u>0&&r(m)?(f=i(m),v=o(e,t,m,f,v,u-1)-1):(a(v+1),e[v]=m),v++),h++;return v};e.exports=o},a7c4:function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7");var r=function(){var e=this,t=e._self._c;return t("div",{ref:"animated",staticClass:"page animated fadeIn"},[e.currentItem||e.currentRowDetails&&e.getIssues.length?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop},on:{click:e.overlayClick}}):e._e(),t("div",{ref:"issues_main_page",staticClass:"container-fluid"},[t("b-card",[t("b-table",{ref:"issues-index-table",staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"name",busy:e.filter.busy,selectable:"",hover:"",fields:e.fields,items:e.uniqueProcessPathIds,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(e){return e&&e._isActive?"editing":"not-editing"}},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"25%"}}),t("col",{staticStyle:{width:"25%"}}),t("col",{staticStyle:{width:"25%"}}),t("col",{staticStyle:{width:"25%"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[t("div",{staticClass:"issueTable_processPath_title",staticStyle:{"min-height":"40px"}},[s.item.stageId?t("div",{staticClass:"issueTable_processPath_title"},[e._v(" "+e._s(s.item.pathTitles.stage)+" ")]):e._e(),s.item.operationId?t("div",{staticClass:"issueTable_processPath_title"},[t("div",{staticStyle:{"font-size":"20px",padding:"5px"}},[e._v("/")]),e._v(" "+e._s(s.item.pathTitles.operation)+" ")]):e._e(),s.item.phaseId?t("div",{staticClass:"issueTable_processPath_title"},[t("div",{staticStyle:{"font-size":"20px",padding:"5px"}},[e._v("/")]),t("div",[e._v(e._s(s.item.pathTitles.phase))])]):e._e()])]}},{key:"cell(issues)",fn:function(s){return[s.item.pathIssues?t("div",[e._v(" "+e._s(s.item.pathIssues.length)+" ")]):t("div",[e._v("0")])]}},{key:"cell(loss)",fn:function(s){return[t("span",{class:{"text-danger":0!=s.item.pathStats}},[e._v(" "+e._s(e.$currency(e.getTotalIssueLoss(s.item)))+" ")]),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.pathTotalHourLoss(s.item)))])]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right buttons",staticStyle:{height:"100%"}},[e.showIdeaPopover?t("inner-overlay",{staticStyle:{"z-index":"1"},on:{click:function(t){e.showIdeaPopover=!e.showIdeaPopover}}}):e._e(),t("div",{staticClass:"d-flex",staticStyle:{"align-items":"center",width:"100%",height:"100%"}},[t("b-button",{ref:"btnNewIdea".concat(s.item.rowId),staticClass:"btn-primary btn-block text-uppercase text-bold",staticStyle:{"font-size":"1.2rem",padding:"3px","min-width":"120px"},attrs:{size:"xs",variant:"action"},on:{click:function(t){return e.newIdea(s)}}},[e._v(e._s(e.$t("New idea")))]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return e.$refs["btnNewIdea".concat(s.item.rowId)]},triggers:"click",show:e.showIdeaPopover,placement:"bottom"},on:{"update:show":function(t){e.showIdeaPopover=t}}},[e.showIdeaPopover&&s.item?t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("idea-form",{attrs:{section:"issues",issueIdea:{processId:e.process.id,stageId:s.item.stageId,operationId:s.item.operationId,phaseId:s.item.phaseId}},on:{done:e.closeIdeaForm}})],1)],1):e._e()],1),t("b-button",{staticClass:"btn-link text-gray btn-block text-uppercase text-bold shadow-0",staticStyle:{"font-size":"1rem",padding:"3px",margin:"0","min-width":"min-content"},attrs:{size:"xs",variant:"transparent"},on:{click:function(t){return e.toggleItem(null)}}},[e._v(e._s(e.$t("Cancel")))])],1)],1):t("div",{staticClass:"buttons",staticStyle:{height:"100%"}},[t("b-button",{staticClass:"btn-primary btn-block text-uppercase text-bold",staticStyle:{"font-size":"1.2rem","white-space":"nowrap","min-width":"120px"},attrs:{size:"xs",variant:"action"},on:{click:function(t){return e.newIdea(s)}}},[e._v(e._s(e.$t("New idea")))]),e.$can("process/process/manage")?t("b-button",{ref:"issuePath-".concat(s.index),staticClass:"btn-light btn-expand btn-block text-uppercase text-bold m-0",staticStyle:{"font-size":"1.2rem","white-space":"nowrap","max-width":"120px"},attrs:{size:"xs",variant:"action"},on:{click:function(t){return e.showDetails(s)}}},[e._v(e._s(s.item._showDetails?e.$t("Close"):e.$t("Details")))]):e._e()],1)]}},{key:"row-details",fn:function(s){return[s?t("div",{staticClass:"row-details",style:"padding-bottom:".concat(e.clickedRowBoundingClientRect,"px")},[t("issues-table",{attrs:{items:s.item.pathIssues,item:s.item,loading:e.loadingItem},on:{deleted:e.deleted,deletedAll:e.deletedAll,issuesTableOffsetTop:e.setParentPadding}})],1):e._e()]}}])})],1)],1)])},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("d81d"),s("14d9"),s("a630"),s("3ca3"),s("6062"),s("ddb0"),s("e9c4"),s("b64b"),s("7db0"),s("159b"),s("99af"),s("b0c0"),s("2f62")),l=s("9fee"),u=s("192e"),d=(s("a4d3"),s("e01a"),function(){var e=this,t=e._self._c;return t("div",{ref:"issueEffect_table-container"},[e.currentItem||e.issueDescriptionExpanded?t("inner-overlay",{staticClass:"overlay-inner",class:{"top-all":this.showInnerOverlayOnTop},staticStyle:{transform:"translate3d(0px, 0px, 0px)"},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"text-right float-right"},[t("confirm-button",{attrs:{variant:"transparent text-danger",confirmPlacement:"left",confirmBoundary:"window",showOverlay:!0},on:{confirm:function(){return e.deleteAll()}}},[t("i",{staticClass:"mdi mdi-delete"}),e._v(" "+e._s(e.$t("Delete all"))+" ")])],1),t("b-table",{ref:"issueEffect_table",staticClass:"t02",attrs:{"sort-icon-left":"","sort-by":"name",busy:e.loading,"primary-key":"id",hover:"",fields:e.fields,items:e.getItems,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"issueTable-row editing issueTable-row-".concat(e.getItemIdOrNull(t)):"issueTable-row issueTable-row-".concat(e.getItemIdOrNull(t))}},on:{"row-unhovered":e.nullifyHoverRowId,"row-hovered":function(t){return e.setHoverRowId(e.item,t)}},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"35%"}}),t("col",{staticStyle:{width:"5%"}}),t("col",{staticStyle:{width:"5%"}}),t("col",{staticStyle:{width:"5%"}}),t("col",{staticStyle:{width:"5%"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(user)",fn:function(s){return[t("div",[s.item.author?t("div",[e._v(" "+e._s(s.item.anonymous?e.$t("Anonymous"):s.item.author.fullName)+" ")]):e._e()])]}},{key:"cell(project)",fn:function(t){return[e._v(e._s(t.item.project.name))]}},{key:"cell(created)",fn:function(s){return[t("div",[e._v(" "+e._s(e.formatDate(s.item.createdAt))+" ")])]}},{key:"cell(description)",fn:function(s){return[t("div",{ref:"issue_description_".concat(s.item.id)},[t("div",{staticStyle:{"max-height":"20px",overflow:"hidden"},attrs:{id:"issues_table-description-".concat(s.item.id)}},[t(e.processedHtml(s.item,!1),{tag:"component"})],1),t("div",{on:{click:function(t){return e.setExpandIssueDescription(s.item)}}},[t("div",{staticStyle:{color:"#4294d0","text-decoration":"underline",cursor:"pointer"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isTextOverArea(s.item.id)||s.item.comments.length>0,expression:"\n                isTextOverArea(row.item.id) || row.item.comments.length > 0\n              "}],staticClass:"issues_table-description-expand"},[e._v(" "+e._s(e.$t("View all"))+" ")])])]),e.currentItem&&e.currentItem.id==s.item.id?t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return e.$refs["issue_description_".concat(s.item.id)]},triggers:"click",boundary:"window",placement:"top",show:e.issueDescriptionExpanded,"custom-class":"issueDescription-form-popover"},on:{"update:show":function(t){e.issueDescriptionExpanded=t}}},[t("b-card",{staticStyle:{"min-width":"320px",padding:"20px"},attrs:{"no-body":""}},[t(e.processedHtml(s.item,!0),{tag:"component"})],1)],1):e._e()],1)]}},{key:"cell(comment)",fn:function(s){return[t("issuesEffectComment",{attrs:{issue:s.item,openState:e.issueEffectCommentOpen&&e.isCurrentItemRowId(s.item.id)},on:{toggle:e.toggleItem,save:e.saveIssueReply,close:function(t){e.issueEffectCommentOpen=!1}}})]}},{key:"cell(loss)",fn:function(s){return[t("span",{class:{"text-danger":0!=s.item.effectedMoneyTotalValue}},[e._v(" "+e._s(e.getEffectedMoneyTotal(s.item)))]),t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.getHoursTotal(s.item)))])]}},{key:"cell(effect)",fn:function(s){return[e.$can("support/issueEffect/manage")?t("div",{staticStyle:{"min-width":"100px"}},[e.isLoading?t("b-spinner"):t("div",[e.hoverRowId===s.item.id||e.currentItem?t("div",{staticClass:"issueEffect-actions__container",class:{"show-when-hovered":e.isCurrentRowActive(s.item)}},[t("issuesEffectAdd",{key:s.item.id,ref:"issueEffect_table-container-row",attrs:{issue:s.item,items:e.getIssueEffectTemplates,openState:e.issueEffectAddOpen,tableWidth:e.tableWidth},on:{toggleOverlay:e.overlayClick,setTemplate:e.setTemplate,unsetTemplate:e.unsetTemplate,selectionClosed:e.setDefaultEffect,toggle:e.toggleItem}})],1):t("div",[s.item.effect?t("div",[e._v(" "+e._s(e.getEffectTitle(s.item.effect))+" ")]):t("div",[e._v(e._s(e.$t("No Issue Effect")))])])])],1):t("div",[e._v(e._s(e.$t("No Issue Effect")))])]}},{key:"cell(actions)",fn:function(s){return[t("div",{staticClass:"text-right p-1 px-0",staticStyle:{display:"flex","align-items":"center","justify-content":"right"}},[e.$can("support/issue/manage")?t("div",{staticClass:"issueEffect-actions__container",class:{"show-when-hovered":e.isCurrentRowActive(s.item)}},[t("issues-effect-feedback",{directives:[{name:"show",rawName:"v-show",value:!s.item.replied&&s.item.author,expression:"!row.item.replied && row.item.author"}],attrs:{item:s.item,user:s.item.author,textPlaceholder:e.$t("Issue feedback"),refTarget:"issueEffectFeedbackIcon",type:"issueFeedback",offset:-38,openState:e.issueEffectFeedbackOpen,itemDescription:s.item.description},on:{toggle:e.toggleItem,save:e.saveIssueReply,close:e.closeIssueForFeedback}})],1):e._e(),t("div",{staticClass:"issueEffect-remove__container"},[t("confirm-button",{attrs:{variant:"btn-white",size:"md",isSelected:e.isCurrentItemRowId(s.item.id),showOverlay:!1,confirmBoundary:"window"},on:{confirm:function(){return e.deleteItem(s.item)},showConfirm:e.toggleIssueRemoveOpen,cancel:e.overlayClick}},[t("div",{staticClass:"text-center"},[t("b-tooltip",{attrs:{target:function(){return e.$refs.issueEffectRemoveIcon},variant:"primary"}},[t("span",{staticClass:"issue-effect-tooltip-title"},[e._v(e._s(e.$t("issueEffectRemove")))])])],1),t("icoIssueTrashcan",{ref:"issueEffectRemoveIcon",staticClass:"issue-Effect__RemoveIcon",class:{removeIcon__active:"issueRemove"===e.editType&&!e.isCurrentRowActive(s.item)},attrs:{width:"40px",height:"40px"},on:{click:function(t){return e.toggleIssueRemove(s.item)}}})],1)],1)])]}}])})],1)}),p=[],m=s("c1df"),f=s.n(m),v=s("8282"),h=s.n(v),b=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"justify-content":"flex-start"}},[t("b-button",{ref:"issueEffectAddBtn".concat(e.issue.id),staticClass:"btn-primary btn-block text-uppercase text-bold issueEffectAddOpen-btn",attrs:{size:"xs",variant:"action"},on:{click:e.toggleIssueOpenSelect}},[t("div",{staticClass:"issue_effect_add"},[t("div",{staticStyle:{"flex-grow":"2",padding:"10px"}},[e._v(e._s(e.$t("Add")))]),t("div",{staticStyle:{"place-self":"center"}},[t("div",{staticClass:"issue_effect_add_icon",class:e.isSelectionOpen?"issue_effect_add_icon-open":"issue_effect_add_icon-close"},[t("i",{staticClass:"mdi mdi-chevron-down issue_effect_add_icon_chevron"})])])])]),e.isSelectionOpen?t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return e.$refs["issueEffectAddBtn".concat(e.issue.id)]},triggers:"click",show:e.openState&&e.isSelectionOpen,offset:75,boundary:"window",placement:"top","boundary-padding":"5","custom-class":"issueEffectAddForm-form-popover"},on:{click:e.closeIt}},[e.openState?t("b-card",{staticStyle:{background:"transparent",width:"252px","margin-left":"10px"},attrs:{"no-body":""}},[t("div",{staticClass:"form-label-group select required"},[t("div",{staticStyle:{background:"#fff","border-radius":"3px"}},[e.issueEffectIsCreating||e.issueEffectIsSelecting||e.issueEffectIsEditing?e.issueEffectIsSelecting?t("div",[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-delete"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-back",on:{click:e.toggleOverlay}},[t("i",{staticClass:"mdi mdi-close",staticStyle:{"font-size":"20px"}})]),t("confirm-button",{staticClass:"issueEffect_add_form-new-issue-effect-select-remove",attrs:{confirmPlacement:"left",confirmBoundary:"window",confirmMessage:e.$t("IssueEffectDeleteConfirmation"),showOverlay:!1,btnStyle:"display:flex;flex-direction:row;background:#fff;border:none;color:#000;align-items:center;box-shadow: none;"},on:{confirm:function(){return e.deleteItems(e.itemForm)}}},[t("icoEffectDelete",{attrs:{width:"16",height:"16"}}),t("span",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(e.$t("Issue Effect Templates Remove")))])],1)],1),t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-edit"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-header"},[t("b-button",{staticStyle:{width:"70px",height:"30px"},attrs:{variant:"outline-primary"},on:{click:function(t){return e.toggleIssueTemplateForm("edit",e.itemForm)}}},[t("icoEffectEdit",{attrs:{width:"16",height:"16"}})],1)],1)])])]):e.issueEffectIsEditing?t("div",[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-delete"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-back",on:{click:e.toggleOverlay}},[t("i",{staticClass:"mdi mdi-close",staticStyle:{"font-size":"20px"}})]),t("confirm-button",{staticClass:"issueEffect_add_form-new-issue-effect-select-remove",attrs:{confirmPlacement:"left",confirmBoundary:"window",confirmMessage:e.$t("IssueEffectDeleteConfirmation"),showOverlay:!1,btnStyle:"display:flex;flex-direction:row;background:#fff;border:none;color:#000;align-items:center;box-shadow: none;"},on:{confirm:function(){return e.deleteItems(e.itemForm)}}},[t("icoEffectDelete",{attrs:{width:"16",height:"16"}}),t("span",[e._v(e._s(e.$t("Issue Effect Templates Remove")))])],1)],1),e.issueEffectIsEditing?t("div",{staticClass:"issueEffect_add_form-new-issue-effect-edit"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-edit-header"},[t("b-button",{on:{click:e.issueEffectAddRole}},[e._v(e._s(e.$t("Add Another Role")))])],1)]):t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-edit"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-select-header"},[t("b-button",{staticStyle:{width:"70px",height:"30px"},attrs:{variant:"outline-primary"}},[t("icoEffectEdit",{attrs:{width:"16",height:"16"}})],1)],1)])])]):t("div",[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-create-header",staticStyle:{width:"100%"}},[t("i",{staticClass:"mdi mdi-close",staticStyle:{"font-size":"20px"},on:{click:function(t){e.issueEffectIsCreating=!1}}}),t("b-button",{on:{click:e.issueEffectAddRole}},[e._v(e._s(e.$t("Add Another Role")))])],1)]):t("div",{staticClass:"issueEffect_add_form-new-issue-effect-view",on:{click:function(t){return e.toggleIssueTemplateForm("create",null)}}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("icoChevronAdd",{attrs:{width:"22",height:"22"}}),t("span",{staticClass:"issueEffect_add_form_newText"},[e._v(e._s(e.$t("New Issue Effect")))])],1)]),!e.issueEffectIsCreating&&!e.issueEffectIsSelecting&&!e.issueEffectIsEditing&&e.getItems.length>0?t("div",{key:e.intent,staticStyle:{overflow:"scroll","max-height":"230px"}},e._l(e.getItems,(function(s,r){return t("div",{key:r,staticClass:"issueEffect_add_form_templates",class:e.issue.id==s.issueActiveId?"form_templates-active":"form_templates-not-active"},[t("div",{staticClass:"issueEffect_add_form_templates-item"},[t("div",{staticClass:"issueEffect_add_form_templates-item-selected",on:{click:function(t){return e.toggleIssueTemplateForm("select",s,r)}}},[e.loadingIndex!==r?t("div",{staticStyle:{"flex-grow":"1",padding:"10px","max-width":"30px"}},[t("icoCheck",{attrs:{width:"10",height:"10"}})],1):t("div",{staticClass:"issueEffect_add_form_templates-item-selected-spinner"},[t("b-spinner",{attrs:{small:""}})],1),t("div",{staticClass:"issueEffect_add_form_templates-item-selected-title"},[e._v(" "+e._s(s.title)+" ")])]),t("div",{staticClass:"issueEffect_add_form_templates_item-edit",on:{click:function(t){return e.toggleIssueTemplateForm("edit",s,r)}}},[e._v(" "+e._s(e.$t("Edit"))+" ")])])])})),0):t("div",[e.issueEffectIsEditing||e.issueEffectIsCreating?t("issue-effect-form",{attrs:{inputsAreNotValid:e.inputsAreNotValid,issue:e.issue,tableWidth:e.tableWidth},on:{saveAll:e.saveAll},model:{value:e.itemForm,callback:function(t){e.itemForm=t},expression:"itemForm"}}):e.getItems.length>0?t("issue-effect-card",{attrs:{input:e.itemForm,issue:e.getIssue,tableWidth:e.tableWidth},on:{setSelectedTemplate:e.setIssueTemplate,unsetSelectedTemplate:e.unsetIssueTemplate}}):e._e()],1),e.issueEffectIsCreating||e.issueEffectIsEditing||e.issueEffectIsSelecting?t("issue-effect-card-container",{staticStyle:{overflow:"hidden"},attrs:{activeItem:e.itemForm,tableWidth:e.tableWidth},on:{toggleOverlay:e.toggleOverlay}},e._l(e.itemForm.templates,(function(s,r){return t("issue-effect-role-container",{key:r,staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{identifier:r,value:e.itemForm.templates[r],action:e.formType,issue:e.issue,item:s},on:{input:function(t){return e.setRoleForm(t,r)},deleteIdentifier:e.removeTemplateCard}})})),1):e._e()],1)])]):e._e()],1):e._e()],1)},g=[],y=s("2909"),w=(s("4e82"),s("a434"),s("cad3")),_=s.n(w),x=s("9b63"),I=s.n(x),O=s("fb97"),k=s.n(O),C=s("1bd2"),$=s.n(C),j=function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"issues-template-form",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",{ref:"projectFormNameField",staticClass:"col-12",staticStyle:{"padding-top":"20px"}},[t("div",{staticClass:"form-label-group required form-group"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"},{name:"autofocus",rawName:"v-autofocus"}],attrs:{id:"effect_template_name",name:"effect_template_name",placeholder:e.$t("Template name"),type:"text",autocomplete:"off",autofocus:"",state:e.$validateState("title",e.effectForm)},model:{value:e.effectForm.title,callback:function(t){e.$set(e.effectForm,"title",t)},expression:"effectForm.title"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("title",e.effectForm)))])],1)]),t("b-col",{staticClass:"col-12",staticStyle:{"padding-bottom":"10px"}},[t("b-row",{staticStyle:{padding:"0 0 10px 10px"}},[t("b-col",{staticClass:"col-5",staticStyle:{"align-self":"center"}},[e._v(" "+e._s(e.$t("Effect Loss Value")))]),t("b-col",{staticClass:"col-7"},[t("b-form-input",{class:{"is-invalid":e.isValueNotValid,"is-valid":!e.isValueNotValid},attrs:{autocomplete:"off",placeholder:e.$t("Effect Loss Unit Value")},model:{value:e.getSelectedValue,callback:function(t){e.getSelectedValue=t},expression:"getSelectedValue"}})],1)],1),t("b-row",[t("b-col",{staticClass:"col-12"},[t("b-card-footer",{staticClass:"px-0",staticStyle:{"padding-top":"10px"}},[t("loading-button",{attrs:{disabled:e.vErrors.any()||e.effectForm.busy||e.isTimeNotValid||e.inputsAreNotValid,loading:e.effectForm.busy,size:"lg",block:"",type:"submit"}},[e._v(e._s(e.effectForm.id?e.$t("Update Issue Effect"):e.$t("Create Issue Effect")))])],1)],1)],1)],1)],1)],1)},S=[],E=(s("25f0"),s("ac1f"),s("5319"),{props:{input:{required:!1,default:function(){}},issue:{required:!1,default:function(){}},value:{required:!1,default:function(){}},inputsAreNotValid:{required:!0,default:function(){return!1}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({companyRoles:"companyRole/all",processes:"process/all",users:"user/all"})),{},{isValueNotValid:function(){return!(!this.effectValue||0===this.effectValue)&&parseFloat(this.effectValue)<.01},isTimeNotValid:function(){return!!this.effectForm.effectTime&&(4!==this.effectForm.effectTime.toString().length&&0!==this.effectForm.effectTime.toString())},effectForm:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},getSelectedValue:{get:function(){return this.$currencyReverse(this.effectValue)},set:function(e){this.effectValue=e.replace(/[^0-9.]/g,"")}}}),mounted:function(){this.effectValue=this.effectForm.effectValue/100||0},methods:{save:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:e.effectForm.effectValue=100*e.effectValue,e.vErrors.any()||(e.$validator.reset(),e.$emit("saveAll"));case 4:case"end":return t.stop()}}),t)})))()}},data:function(){return{process:null,effectValue:0,form:new l["a"]({id:void 0,title:"",processId:null,effectTime:null,effectValue:null,issueActiveId:null})}}}),T=E,R=(s("120c"),s("2877")),F=Object(R["a"])(T,j,S,!1,null,"1527186c",null),P=F.exports,A=function(){var e=this,t=e._self._c;return e.input?t("div",{staticClass:"issueTemplate-card__container"},[t("div",{staticClass:"issueTemplate-card__header"},[t("span",{staticClass:"issueTemplate-card__header-title"},[e._v(e._s(e.input.title))]),t("hr",{staticStyle:{background:"lightgray"}})]),t("div",{staticClass:"issueTemplate-card__footer"},[t("div",{staticStyle:{"padding-bottom":"10px","font-size":"14px"}},[e._v(" "+e._s(e.$t("Issue specific cost"))+" ")]),t("div",{staticClass:"issueTemplate-card__footer-summary"},[t("div",{staticClass:"issueTemplate-card__totals-title"},[e._v(" "+e._s(e.$t("Effect Loss Value"))+" ")]),t("div",{staticClass:"issueTemplate-card__totals-value"},[e._v(" "+e._s(e.getLossMoneyValue)+" ")]),t("div",{staticClass:"issueTemplate-card__totals-total"},[e._v(" "+e._s(e.getTemplateLossPercentageValue)+" ")])]),t("div",{staticClass:"issueTemplate-card__totals-action"},[e.input.id==e.issue.effect.effectId?t("div",[e._v(" "+e._s(e.$t("issueEffectTemplateActive"))+" ")]):t("b-button",{staticStyle:{width:"100%",display:"flex","align-self":"center","justify-content":"center",height:"100%"},on:{click:function(t){return e.setTemplate(e.input)}}},[e.isLoading?t("b-spinner",{staticStyle:{width:"20px",height:"20px"}}):t("span",[e._v(e._s(e.$t("Apply Issue Effect"))+" ")])],1)],1)])]):e._e()},D=[],N=(s("b680"),{props:{input:{required:!1,default:function(){}},issue:{required:!1,default:function(){}}},data:function(){return{isLoading:!1}},watch:{issue:function(e){e&&this.isLoading&&(this.isLoading=!this.isLoading)}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({processes:"process/all",companyRoles:"companyRole/all"})),{},{getLossMoneyValue:function(){return this.input.effectValue?this.$currencyReverse(this.input.effectValue/100):"0€"},getTemplateLossPercentageTime:function(){if(0!=this.issue.effectedMoneyTotalValue&&0!=this.input.effectTime){var e=this.input.effectTime/this.issue.effectedMoneyTotalValue,t=100*e;return t.toFixed(2)+" %"}return"0%"},getTemplateLossPercentageValue:function(){if(0!=this.input.effectValue&&0!=this.issue.effectedMoneyTotalValue){var e=this.input.effectValue/this.issue.effectedMoneyTotalValue,t=100*e;return t.toFixed(2)+" %"}return"0%"}}),beforeDestroy:function(){this.issue&&this.issue.effect&&this.issue.id!=this.issue.effect.issueActiveId&&this.$emit("destroyed")},methods:{setTemplate:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.isLoading=!0,t.$emit("setSelectedTemplate",e.id);case 2:case"end":return s.stop()}}),s)})))()},unsetTemplate:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$emit("unsetSelectedTemplate",e.id);case 1:case"end":return s.stop()}}),s)})))()}}}),q=N,M=(s("902c"),Object(R["a"])(q,A,D,!1,null,"1ce6927b",null)),z=M.exports,L=function(){var e=this,t=e._self._c;return t("div",{ref:"issuesTemplateCardContainer",staticClass:"issues-template-card-container"},[t("div",{ref:"issues-template-card-container",staticClass:"issues-template-card-container-items",style:{width:.7*e.tableWidth+"px"},attrs:{id:"issues-template-card-container"},on:{click:e.toggleOverlay}},[e._t("default")],2)])},V=[],B={methods:{toggleOverlay:function(e){var t=e.target.getAttribute("id")==this.$el.firstChild.getAttribute("id");t&&this.$emit("toggleOverlay")}},props:{items:{required:!1,default:function(){return[]}},tableWidth:{required:!1,default:function(){return 1582}}}},U=B,H=(s("7aa7"),s("814e"),Object(R["a"])(U,L,V,!1,null,"61c42b00",null)),Y=H.exports,W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"issues-template-role-container",attrs:{id:"issues-template-role-container"}},[!e.isEditing&&e.item.companyRoleId?t("issue-effect-role-card",{attrs:{input:e.item,issue:e.issue,identifier:e.identifier},on:{edit:function(t){e.isEditing=!e.isEditing},remove:e.removeRoleCard}}):t("issue-effect-role-form",{attrs:{issue:e.issue,identifier:e.identifier},on:{edit:function(t){e.isEditing=!e.isEditing},remove:e.removeRoleCard},model:{value:e.setRoleForm,callback:function(t){e.setRoleForm=t},expression:"setRoleForm"}})],1)},G=[],J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"issues-template-role-card-container",attrs:{id:"issueTemplate-role-card-container"}},[t("div",{staticClass:"issueTemplate-role__card-container-item"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-create-header",on:{click:e.remove}},[t("icoEffectDelete",{attrs:{width:"16",height:"16"}}),t("span",{staticStyle:{"place-self":"center"}},[e._v(e._s(e.$t("Delete")))])],1),t("div",[t("div",{staticClass:"issueEffect_addRole-editIcon"},[t("b-button",{staticStyle:{width:"70px",height:"30px"},attrs:{variant:"outline-primary"},on:{click:e.toggle}},[t("icoEffectEdit",{attrs:{width:"16",height:"16"}})],1)],1)])]),t("div",{staticClass:"issueEffect_add_form-role"},[e._v(e._s(e.getTemplateRole))]),t("div",{ref:"issueEffect_add_form-area",staticClass:"issueEffect_add_form-area",on:{mouseover:function(t){e.hoveringPath=!0},mouseleave:function(t){e.hoveringPath=!1}}},[t("b-popover",{ref:"popover",staticClass:"form-popover",staticStyle:{padding:"10px","border-radius":"3px"},attrs:{target:function(){return e.$refs["issueEffect_add_form-area"]},show:e.isAreaOverCardWidth,triggers:"hover",placement:"top"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticStyle:{"font-size":"14px",color:"#4294d0"}},[e._v(e._s(e.$t("Area")+":"))])]},proxy:!0}])},[t("div",{staticStyle:{display:"flex",padding:"10px","letter-spacing":"1px",color:"#4294d0"}},e._l(e.getTemplateArea,(function(s,r){return t("div",{key:r},["process"!==r?t("span",{staticStyle:{"font-size":"8px","padding-left":"5px"}},[e._v(">")]):e._e(),t("span",[e._v(" "+e._s(s))])])})),0)]),t("span",{staticStyle:{"padding-right":"3px"}},[e._v(e._s(e.$t("Area")+":"))]),t("div",{staticClass:"issueEffect_add_form-area-items",staticStyle:{display:"flex"}},e._l(e.getTemplateArea,(function(s,r){return t("div",{key:r,staticClass:"issueEffect_add_form-area-item",style:{"max-width":180/Object.keys(e.getTemplateArea).length+"px"}},["process"!==r?t("span",{staticStyle:{"font-size":"8px","padding-left":"5px"}},[e._v(">")]):e._e(),t("span",[e._v(" "+e._s(s))])])})),0)],1),t("div",{staticClass:"issueTemplate-card__footer"},[t("hr",{staticStyle:{margin:"0"}}),t("div",{staticClass:"issueTemplate-card__footer-summary"},[t("div",{staticClass:"issueTemplate-card__totals-title",staticStyle:{"flex-grow":"2"}},[e._v(" "+e._s(e.$t("Effect Loss Time"))+" ")]),t("div",{staticClass:"issueTemplate-card__totals-value",staticStyle:{"flex-grow":"1"}},[t("input",{directives:[{name:"mask",rawName:"v-mask",value:"##h ##min",expression:"'##h ##min'"}],staticStyle:{outline:"none",border:"none",background:"#fff",width:"100%","text-align":"center"},attrs:{disabled:""},domProps:{value:e.getEffectTime}})]),t("div",{staticClass:"issueTemplate-card__totals-total",staticStyle:{"flex-grow":"1","min-width":"50px"}},[e._v(" "+e._s(e.getTemplateLossPercentageTime)+" ")])]),t("div",{staticClass:"issueTemplate-card__footer-summary"},[t("div",{staticClass:"issueTemplate-card__totals-title",staticStyle:{"flex-grow":"2"}},[e._v(" "+e._s(e.$t("Effect Loss Value"))+" ")]),t("div",{staticClass:"issueTemplate-card__totals-value",staticStyle:{"flex-grow":"1"}},[e._v(" "+e._s(e.getLossMoneyValue)+" ")]),t("div",{staticClass:"issueTemplate-card__totals-total",staticStyle:{"flex-grow":"1","min-width":"50px"}},[e._v(" "+e._s(e.getTemplateLossPercentageValue)+" ")])])])])},K=[],Z={components:{icoEffectEdit:$.a,icoEffectDelete:k.a},props:{input:{required:!1,default:function(){}},issue:{required:!1,default:function(){}},identifier:{required:!1}},data:function(){return{hoveringPath:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({processes:"process/all",companyRoles:"companyRole/all"})),{},{getEffectTime:function(){var e=this.input.effectTime,t=e[0]+e[1],s=Math.round((e[2]+e[3])/100*60);return s<10&&(s="0"+s),e=t.toString()+s.toString(),e},isAreaOverCardWidth:function(){var e=document.querySelector(".issueEffect_add_form-area-items");return!(!e||!this.hoveringPath)&&e.clientWidth>160},getLossMoneyValue:function(){var e=this.input.effectValue&&this.input.effectValue>0;return e?this.$currencyReverse(this.input.effectValue/100):this.$currencyReverse(0)},getTemplateLossPercentageTime:function(){if(0!=this.input.effectTime&&0!=this.issue.effectedMoneyTotalValue){var e=this.input.effectTime/this.issue.effectedMoneyTotalValue,t=100*e;return t.toFixed(2)+" %"}return"0%"},getTemplateLossPercentageValue:function(){if(0!=this.input.effectValue&&0!=this.issue.effectedMoneyTotalValue){var e=this.input.effectValue/this.issue.effectedMoneyTotalValue,t=100*e;return t.toFixed(2)+" %"}return"0%"},getTemplateArea:function(){var e=this.input,t=e.processId,s=e.stageId,r=e.operationId,i=e.phaseId,a={},n=this.processes.find((function(e){return e.id==t})),o=n.stages.find((function(e){return e.id==s}));if(a.process=n.title,o){a["stage"]=o.title;var c=o.operations.find((function(e){return e.id==r}));if(c){a["operation"]=c.title;var l=c.phases.find((function(e){return e.id==i}));l&&(a["phase"]=l.title)}}return a},getTemplateRole:function(){var e=this,t=this.companyRoles.find((function(t){return t.id===e.input.companyRoleId}));return t?"".concat(this.$t("Role"),": ").concat(t.name):""}}),methods:{remove:function(){this.$emit("remove",this.identifier)},deleteItem:function(){this.$emit("delete",this.identifier)},toggle:function(){this.$emit("edit")}}},X=Z,Q=(s("4293"),Object(R["a"])(X,J,K,!1,null,"5a30525c",null)),ee=Q.exports,te=function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"issues-template-role-form-container",attrs:{id:"issues-template-role-form-container"},on:{keyup:function(t){return e.$validator.validateAll()}}},[t("div",{staticClass:"issueTemplate-role__card-container-item"},[t("div",{staticClass:"issueEffect_add_form-new-issue-effect-create-header",on:{click:e.remove}},[t("icoEffectDelete",{staticStyle:{"place-self":"center"},attrs:{width:"16",height:"16"}}),t("span",[e._v(e._s(e.$t("Delete")))])],1),e.value&&e.value.id?t("div",[t("div",{staticClass:"issueEffect_addRole-editIcon"},[t("b-button",{staticStyle:{width:"70px",height:"30px"},attrs:{variant:"outline-primary"},on:{click:e.toggle}},[t("icoEffectView",{staticStyle:{fill:"blue"},attrs:{width:"16",height:"16"}})],1)],1)]):e._e()]),t("b-row",{staticStyle:{padding:"0 20px"}},[t("b-col",{staticClass:"col-12",staticStyle:{"padding-top":"20px","padding-bottom":"10px"}},[t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"name","data-vv-name":"companyRole",placeholder:e.$t("Role"),reduce:function(e){return e.id},options:e.companyRoles},model:{value:e.roleForm.companyRoleId,callback:function(t){e.$set(e.roleForm,"companyRoleId",t)},expression:"roleForm.companyRoleId"}})],1)]),t("b-col",{staticClass:"col-12",staticStyle:{"padding-bottom":"10px"}},[t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"title","data-vv-name":"process",placeholder:e.$t("Process"),reduce:function(e){return e.id},options:e.processes},on:{input:e.loadProcess},model:{value:e.roleForm.processId,callback:function(t){e.$set(e.roleForm,"processId",t)},expression:"roleForm.processId"}})],1)]),e.roleForm.processId&&e.getProcessStages.length>0?t("b-col",{staticClass:"col-12",staticStyle:{"padding-bottom":"10px"}},[t("div",{staticClass:"form-label-group select required"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"title","data-vv-name":"process",placeholder:e.$t("Stage"),reduce:function(e){return e.id},options:e.getProcessStages},model:{value:e.roleForm.stageId,callback:function(t){e.$set(e.roleForm,"stageId",t)},expression:"roleForm.stageId"}})],1)]):e._e(),e.roleForm.processId&&e.roleForm.stageId&&e.getProcessOperations.length>0?t("b-col",{staticClass:"col-12",staticStyle:{"padding-bottom":"10px"}},[t("div",{staticClass:"form-label-group select"},[t("v-select",{attrs:{label:"title","data-vv-name":"process",placeholder:e.$t("Operation"),reduce:function(e){return e.id},options:e.getProcessOperations},model:{value:e.roleForm.operationId,callback:function(t){e.$set(e.roleForm,"operationId",t)},expression:"roleForm.operationId"}})],1)]):e._e(),e.roleForm.stageId&&e.roleForm.operationId&&e.getProcessPhases.length>0?t("b-col",{staticClass:"col-12",staticStyle:{"padding-bottom":"10px"}},[t("div",{staticClass:"form-label-group select"},[t("v-select",{attrs:{label:"title","data-vv-name":"process",placeholder:e.$t("Phase"),reduce:function(e){return e.id},options:e.getProcessPhases},model:{value:e.roleForm.phaseId,callback:function(t){e.$set(e.roleForm,"phaseId",t)},expression:"roleForm.phaseId"}})],1)]):e._e(),t("b-col",{staticClass:"col-12",staticStyle:{"padding-bottom":"10px"}},[t("b-row",{staticStyle:{padding:"0 0 10px 10px"}},[t("b-col",{staticClass:"col-5",staticStyle:{"align-self":"center","font-size":"14px"}},[e._v(" "+e._s(e.$t("Effect Loss Value")))]),t("b-col",{staticClass:"col-7"},[t("b-form-input",{class:{"is-invalid":e.isValueNotValid,"is-valid":!e.isValueNotValid},attrs:{autocomplete:"off",placeholder:e.$t("Effect Loss Unit Value"),autofocus:""},model:{value:e.getSelectedValue,callback:function(t){e.getSelectedValue=t},expression:"getSelectedValue"}})],1)],1),t("b-row",{staticStyle:{padding:"0 0 10px 10px"}},[t("b-col",{staticClass:"col-5",staticStyle:{"align-self":"center","font-size":"14px"}},[e._v(" "+e._s(e.$t("Effect Loss Time")))]),t("b-col",{staticClass:"col-7"},[t("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"##h ##min",expression:"'##h ##min'"}],class:{"is-invalid":e.isTimeNotValid,"is-valid":!e.isTimeNotValid},attrs:{autocomplete:"off",max:4,placeholder:e.$t("Effect Loss Unit Time"),autofocus:""},model:{value:e.getSelectedLossTime,callback:function(t){e.getSelectedLossTime=t},expression:"getSelectedLossTime"}})],1)],1)],1)],1)],1)},se=[],re=(s("3c65"),s("a15b"),s("466d"),s("3fe5")),ie=s.n(re),ae={components:{icoEffectView:ie.a,icoEffectDelete:k.a},props:{identifier:{required:!1},input:{required:!1,default:function(){}},value:{required:!0,default:function(){}}},data:function(){return{timeSuffixDay:"d",timeSuffixHour:"h",timeSuffixMin:"min",isSaving:!1,storeName:"issueEffect"}},methods:{toggle:function(){this.$emit("edit")},addLeadingZeros:function(){if(this.roleForm.effectTime){var e=Object(y["a"])(this.roleForm.effectTime.toString());while(e.length<4)e.unshift("0");this.roleForm.effectTime=e.join("")}},formatTime:function(e){if(e){var t=/\d+/g;if(!e.toString().match(t))return;var s=e.toString().match(t).join("");return"".concat(s.charAt(0)).concat(s.charAt(1),"h ").concat(s.charAt(2)).concat(s.charAt(3),"min")}return"00h 00min"},remove:function(){this.$emit("remove",this.identifier)},loadProcess:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$validator.pause(),e.$validator.reset(),!e.roleForm.processId){t.next=8;break}return t.next=5,e.$store.dispatch("process/findById",{id:e.roleForm.processId});case 5:e.process=t.sent,e.process&&(e.roleForm.stageId=null,e.roleForm.operationId=null,e.roleForm.phaseId=null),e.$nextTick((function(){e.$validator.reset(),e.$validator.resume()}));case 8:case"end":return t.stop()}}),t)})))()},emptyMeasureValue:function(){this.roleForm.effectTime=null,this.roleForm.effectValue=null}},mounted:function(){this.addLeadingZeros()},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({companyRoles:"companyRole/all",users:"user/all",processes:"process/all"})),{},{isValueNotValid:function(){return!(!this.roleForm.effectValue||0===this.roleForm.effectValue)&&parseFloat(this.roleForm.effectValue)<1},isTimeNotValid:function(){return"number"!=typeof this.roleForm.effectTime&&(!!this.roleForm.effectTime&&(4!==this.roleForm.effectTime.toString().length&&0!==this.roleForm.effectTime.toString()))},roleForm:{get:function(){return this.value},set:function(e){this.$validator.validateAll(),this.$emit("input",e)}},getProcessStages:function(){var e=this;if(this.roleForm.processId||this.input.processId){var t=this.processes.find((function(t){return t.id===e.roleForm.processId}));return t.stages}return[]},getProcessOperations:function(){var e=this,t=this.getProcessStages.find((function(t){return t.id===e.roleForm.stageId}));return t?t.operations:[]},getProcessPhases:function(){var e=this,t=this.getProcessOperations.find((function(t){return t.id===e.roleForm.operationId}));return t?t.phases:[]},getSelectedValue:{get:function(){return this.$currencyReverse(this.roleForm.effectValue/100)},set:function(e){this.roleForm.effectValue=100*e.replace(/[^0-9.]/g,"")}},getSelectedLossTime:{get:function(){var e=this.roleForm.effectTime;if(e){if(4===e.length||"number"==typeof e){var t=e[0]+e[1],s=Math.round((e[2]+e[3])/100*60);s<10&&(s="0"+s),e=t.toString()+s.toString()}return this.formatTime(e)}},set:function(e){var t=/\d+/g;if(this.roleForm.effectTime=e.match(t).join(""),4===this.roleForm.effectTime.length){var s=this.roleForm.effectTime[0]+this.roleForm.effectTime[1],r=this.roleForm.effectTime[2]+this.roleForm.effectTime[3];if(r>59&&(r=59),parseInt(s)+parseInt(r)===0)return;if(this.roleForm.effectTime=Math.round(100*(parseInt(s)+parseInt(r)/60)).toString(),this.roleForm.effectTime){var i=Object(y["a"])(this.roleForm.effectTime.toString());while(i.length<4)i.unshift("0");this.roleForm.effectTime=i.join("")}}}}})},ne=ae,oe=(s("2262"),Object(R["a"])(ne,te,se,!1,null,"d64dc0a4",null)),ce=oe.exports,le={props:{item:{required:!1,default:function(){}},issue:{required:!1,default:function(){}},activeItem:{required:!1,default:function(){}},identifier:{required:!1},action:{required:!0,default:function(){return"select"}},value:{required:!0,default:function(){}}},watch:{setRoleForm:{handler:function(e){this.$emit("input",e,this.identifier)},deep:!0},action:{handler:function(e){"edit"==e&&(this.isEditing=!0)}}},computed:{setRoleForm:{get:function(){return this.value},set:function(e){this.$emit("setForm",this.value,this.identifier)}}},mounted:function(){"select"===this.action?this.isEditing=!1:this.isEditing=!0},data:function(){return{isEditing:!0}},methods:{removeRoleCard:function(e){this.$emit("deleteIdentifier",e)}},components:{"issue-effect-role-card":ee,"issue-effect-role-form":ce}},ue=le,de=(s("c265"),s("49ad"),Object(R["a"])(ue,W,G,!1,null,"63524d6d",null)),pe=de.exports,me=function(e){var t=e.id,s=e.companyRoleId,r=e.effectTime,i=e.effectValue,a=e.processId,n=e.stageId,o=e.operationId,c=e.phaseId;return{id:t,companyRoleId:s,effectTime:r,effectValue:i,processId:a,stageId:n,operationId:o,phaseId:c}},fe={components:{icoCheck:_.a,icoChevronAdd:I.a,icoEffectDelete:k.a,icoEffectEdit:$.a,"issue-effect-role-container":pe,"issue-effect-card":z,"issue-effect-form":P,"issue-effect-card-container":Y},props:{items:{required:!1,default:function(){return[]}},issue:{required:!1,default:function(){}},tableWidth:{required:!1,default:function(){return 1582}},openState:{required:!0,default:function(){return!1}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({companyRoles:"companyRole/all",processes:"process/all",users:"user/all"})),{},{getIssue:function(){return this.issue},getItems:function(){var e=this;if(this.issue.effect){if(this.issue.effect.effectId){var t=this.items.filter((function(t){return null===t.issueActiveId&&t.id!=e.issue.effect.effectId})),s=t.filter((function(t){return t.id!=e.issue.effectTemplateId})),r=[].concat(Object(y["a"])(s),[this.issue.effect]);return Object(y["a"])(new Set(r.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))))}var i=this.items.find((function(t){return t.issueActiveId==e.issue.id}));return i?Object(y["a"])(new Set(this.items.filter((function(e){return e.id!=i.effectId})))):Object(y["a"])(new Set(this.items))}return Object(y["a"])(new Set(this.items.filter((function(e){return null===e.issueActiveId}))))}}),watch:{itemForm:{deep:!0,handler:function(e){this.inputsAreNotValid=e.templates.some((function(e){return!e.companyRoleId||!e.stageId||!e.stageId}))}},isSelectionOpen:{handler:function(e){e||this.$emit("selectionClosed")}}},data:function(){return{storeName:"issueEffect",intent:Math.random(),isSelectionOpen:null,loadingIndex:null,inputsAreNotValid:!1,isRemoving:!1,defaultForm:{id:void 0,title:null,effectTime:null,effectValue:null,templates:[]},itemForm:new l["a"]({id:void 0,title:null,effectTime:null,effectValue:null,templates:[]}),formType:"create",issueEffectIsCreating:!1,issueEffectIsEditing:!1,issueEffectIsSelecting:!1,issueEffectAddSelected:!1,issueEffectAddOpen:!1,roleForm:{id:void 0,companyRoleId:null,effectTime:null,effectValue:null,processId:null,stageId:null,operationId:null,phaseId:null}}},methods:{closeIt:function(){console.log("Close Issue Template")},toggleOverlay:function(){this.$emit("toggleOverlay")},saveAll:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"create"!==e.formType){t.next=6;break}return t.next=4,e.$store.dispatch("".concat(e.storeName,"/create"),e.itemForm);case 4:t.next=8;break;case 6:return t.next=8,e.$store.dispatch("".concat(e.storeName,"/update"),e.itemForm);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:return t.prev=13,e.issueEffectIsEditing=!1,e.issueEffectIsCreating=!1,t.finish(13);case 17:case"end":return t.stop()}}),t,null,[[0,10,13,17]])})))()},issueEffectAddRole:function(){this.itemForm.templates.push(Object(o["a"])({},this.roleForm))},setRoleForm:function(e,t){this.itemForm.templates[t]=e},toggleEffectForm:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e){s.next=8;break}return s.next=3,t.$store.dispatch("issueEffect/findById",{id:e});case 3:t.itemForm=s.sent,t.issueEffectIsEditing=!1,t.issueEffectIsSelecting=!0,s.next=10;break;case 8:t.issueEffectIsCreating=!1,t.isSelectionOpen=!0;case 10:case"end":return s.stop()}}),s)})))()},removeTemplateCard:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,i;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=t.itemForm.templates[e],!r||r.id){s.next=5;break}t.itemForm.templates.splice(e,1),s.next=17;break;case 5:return i=new l["a"]({id:r.id}),s.prev=6,s.next=9,t.$store.dispatch("issueEffect/deleteTemplate",i);case 9:s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](6),console.log(s.t0);case 14:return s.prev=14,t.itemForm.templates.splice(e,1),s.finish(14);case 17:case"end":return s.stop()}}),s,null,[[6,11,14,17]])})))()},deleteItems:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e){s.next=16;break}return s.prev=1,s.next=4,t.$store.dispatch("issueEffect/delete",e);case 4:s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](1),console.log(s.t0);case 9:return s.prev=9,s.next=12,t.$store.dispatch("issue/findAll",{force:!0});case 12:return t.issueEffectIsEditing=!1,t.issueEffectIsSelecting=!1,t.itemForm.templates=[],s.finish(9);case 16:case"end":return s.stop()}}),s,null,[[1,6,9,16]])})))()},setIssueTemplate:function(e){this.$emit("setTemplate",e)},unsetIssueTemplate:function(e){this.$emit("unsetTemplate",e)},setIssueEffectTemplateActiveIndex:function(e){this.$emit("selectedTemplate",this.getItems[e])},toggleIssueTemplateForm:function(e,t){var s=arguments,r=this;return Object(n["a"])(Object(a["a"])().mark((function i(){var n,o;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=s.length>2&&void 0!==s[2]?s[2]:null,r.loadingIndex=n,r.initForm=null,o=r.defaultForm,r.intent=Math.random(),!t){i.next=16;break}return i.prev=6,i.next=9,r.$store.dispatch("issueEffect/findById",{id:t.id});case 9:o=i.sent,r.issue.effect=o,i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](6),console.log(i.t0);case 16:return i.next=18,r.initItemForm(o,e);case 18:r.loadingIndex=null;case 19:case"end":return i.stop()}}),i,null,[[6,13]])})))()},initItemForm:function(e,t){var s=this;return Object(n["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:Object.keys(e||{}).filter((function(e){return e in s.itemForm})).forEach((function(r){s.itemForm[r]="templates"!==r?e[r]:e[r].map((function(e){return me(e)})),s.toggleControls(t)}));case 1:case"end":return r.stop()}}),r)})))()},toggleIssueOpenSelect:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isSelectionOpen=!e.isSelectionOpen,e.isSelectionOpen&&(e.issueEffectIsCreating=!1,e.issueEffectIsEditing=!1,e.issueEffectIsSelecting=!1),e.$emit("toggle",e.issue,"issueAdd");case 3:case"end":return t.stop()}}),t)})))()},toggleControls:function(e){this.formType=e,"create"===e&&(this.issueEffectIsEditing=!1,this.issueEffectIsSelecting=!1,this.issueEffectIsCreating=!this.issueEffectIsCreating),"edit"===e&&(this.issueEffectIsSelecting=!1,this.issueEffectIsCreating=!1,this.issueEffectIsEditing=!this.issueEffectIsEditing),"select"===e&&(this.issueEffectIsEditing=!1,this.issueEffectIsCreating=!1,this.issueEffectIsSelecting=!this.issueEffectIsSelecting),this.issueEffectIsEditing||this.issueEffectIsCreating||this.issueEffectIsSelecting||(this.formType=null)}}},ve=fe,he=(s("abdf"),s("e2e1"),Object(R["a"])(ve,b,g,!1,null,"27a4d34e",null)),be=he.exports,ge=s("31e0"),ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"issueEffect__comment__container"},[e.openState?e._e():t("div",{staticClass:"text-center"},[t("b-tooltip",{attrs:{target:function(){return e.$refs.issueEffectCommentIcon},variant:"primary"}},[t("span",{staticClass:"issueEffect__tooltip-title"},[e._v(e._s(e.$t("issueEffectEdit")))])])],1),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return e.$refs["issueEffectCommentIcon"]},triggers:"click",show:e.openState,placement:"bottom","custom-class":"issueComments-form-popover"},on:{"update:show":function(t){e.openState=t}}},[e.openState?t("b-card",{staticStyle:{padding:"5px"},attrs:{"no-body":""}},[t("div",{staticClass:"form-label-group select required",staticStyle:{width:"500px",height:"100%"}},[t("b-textarea",{directives:[{name:"autoresize",rawName:"v-autoresize"}],staticClass:"no-style my-0 issueEffect__comment-text",attrs:{autofocus:"",placeholder:e.$t("Issue comment"),name:"comment"},model:{value:e.commentForm.description,callback:function(t){e.$set(e.commentForm,"description",t)},expression:"commentForm.description"}})],1),t("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"5px"}},[t("loading-button",{staticStyle:{width:"100px","align-self":"center",padding:"5px"},attrs:{disabled:0==e.commentForm.description.length,loading:e.isLoading},on:{click:e.saveIssueComment}},[e.isLoading?e._e():t("span",[e._v(e._s(e.$t("Comment")))])])],1)]):e._e()],1),t("icoIssueEdit",{ref:"issueEffectCommentIcon",staticClass:"issueEffect__editIcon",class:{issueEffectIcon__active:e.openState},attrs:{width:"40px",height:"40px"},on:{click:e.toggleIssueComment}})],1)},we=[],_e=s("29df"),xe=s.n(_e),Ie={components:{icoIssueEdit:xe.a},props:{issue:null,openState:{required:!0,type:Boolean,default:function(){return!1}}},watch:{openState:function(e){e&&this.isLoading&&(this.isLoading=!this.isLoading,this.commentForm.description="")}},data:function(){return{isLoading:!1,commentForm:{description:""}}},methods:{toggleIssueComment:function(){this.openState?this.$emit("close"):this.$emit("toggle",this.issue,"issueComment")},saveIssueComment:function(){this.isLoading=!0,this.$emit("save",this.commentForm)}}},Oe=Ie,ke=(s("8d00"),s("519e"),Object(R["a"])(Oe,ye,we,!1,null,"24ff40dc",null)),Ce=ke.exports,$e={components:{icoIssueTrashcan:h.a,issuesEffectAdd:be,"issues-effect-feedback":ge["default"],issuesEffectComment:Ce},props:{items:{type:Array,required:!1,default:function(){return[]}},item:{type:Object,required:!1,default:function(){return null}},loading:{required:!1,type:Boolean,default:function(){return!1}}},data:function(){return{tableScrollTop:0,issueDescriptionExpanded:null,selectedTemplate:null,isLoading:!1,hoverRowId:null,rewardActiveIndex:0,rewardablePoints:[0,5,10,25,50,100],editType:null,issueEffectFeedbackOpen:!1,issueEffectCommentOpen:!1,issueEffectAddOpen:!1,issueEffectAdd:!1,issueRemoveOpen:!1,deleting:!1,currentItem:null,form:{},issues:[],issueEffectTemplateActiveIndex:null,tableWidth:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({showInnerOverlayOnTop:"app/show_inner_overlay_on_top",user:"auth/user",allUsers:"user/all",effectTemplates:"issueEffect/all"})),{},{getItems:{get:function(){return this.items}},getIssueEffectTemplates:{get:function(){var e;return null!==(e=this.effectTemplates)&&void 0!==e?e:[]}},fields:{get:function(){return[{key:"user",label:this.$t("User"),sortable:!0},{key:"project",label:this.$t("Project"),sortable:!0},{key:"created",label:this.$t("Created"),sortable:!0},{key:"description",label:this.$t("Description"),sortable:!0},{key:"comment",label:this.$t("Comment"),sortable:!0},{key:"loss",label:this.$t("Estimated loss"),sortable:!0},{key:"effect",label:this.$t("Issue effect"),sortable:!0},{key:"actions",label:"",class:"actions"}]}}}),beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$store.dispatch("issueEffect/findAll");case 3:return t.next=5,e.$store.dispatch("companyRole/findAll");case 5:return t.next=7,e.$store.dispatch("user/findAll");case 7:e.isLoading=!1,e.onResize(),e.$nextTick((function(){window.addEventListener("resize",e.onResize)}));case 10:case"end":return t.stop()}}),t)})))()},methods:{onResize:function(){this.$refs["issueEffect_table"]&&this.$refs["issueEffect_table"].$el&&(this.tableWidth=this.$refs["issueEffect_table"].$el.clientWidth)},isCurrentItemRowId:function(e){return!!this.currentItem&&this.currentItem.id===e},isTextOverArea:function(e){var t=document.getElementById("issues_table-description-".concat(e));return!!t&&t.firstChild.getBoundingClientRect().height>=40},setExpandIssueDescription:function(e){this.currentItem?this.closeOtherIssueEffectModals(""):(this.currentItem=e,this.closeOtherIssueEffectModals("issueExpand"))},processedHtml:function(e,t){if(!e)return"";var s="<div style='color:#000'>".concat(e.description,"</div>");return e.comments.length>0&&t&&e.comments.map((function(e){s+="<div style='color:#4294d0'>".concat(e.description,"</div>")})),{template:"<div class='issue-description-content'>"+s+"</div>",props:{comments:{type:null,default:function(){return e.comments}}}}},getItemIdOrNull:function(e){if(e)return e.id},setDefaultEffect:function(){var e=this;this.currentItem&&(this.currentItem.effect=this.getIssueEffectTemplates.find((function(t){return t.id==e.currentItem.effectTemplateId})),this.issueEffectAddOpen=!1)},getEffectedMoneyTotal:function(e){return this.$currency(e.effectedMoneyTotalValue/100||0)},getHoursTotal:function(e){var t=e.issueHoursTotal;if(t<0)return"(".concat(this.$tc("h.count",t),")")},getEffectTitle:function(e){return e&&e.title?e.title:this.$t("No Issue Effect")},nullifyHoverRowId:function(){this.issueEffectAddOpen||this.issueEffectCommentOpen||this.issueEffectFeedbackOpen||(this.hoverRowId=null)},setHoverRowId:function(e,t){t&&t.id&&!this.currentItem&&(this.hoverRowId=t.id)},isCurrentRowActive:function(e){return!e||!this.currentItem||e.id!==this.currentItem.id},toggleIssueRemoveOpen:function(e){e&&(this.editType="issueRemove"),e||(this.editType=""),this.issueRemoveOpen=e},closeOtherIssueEffectModals:function(e){switch(this.issueEffectCommentOpen=!1,this.issueEffectFeedbackOpen=!1,this.issueEffectAddOpen=!1,this.issueRemoveOpen=!1,this.issueDescriptionExpanded=!1,e){case"issueRemove":this.issueRemoveOpen=!0;break;case"issueAdd":this.issueEffectAddOpen=!0;break;case"issueFeedback":this.issueEffectFeedbackOpen=!0;break;case"issueComment":this.issueEffectCommentOpen=!0;break;case"issueExpand":this.issueDescriptionExpanded=!0;break}},toggleOverlay:function(){"issueComment"===this.editType?this.toggleIssueComment():this.toggleIssueFeedback()},toggleIssueRemove:function(e){this.editType=this.issueRemoveOpen?null:"issueRemove",this.issueRemoveOpen||this.toggleItem(e,"issueRemove")},toggleIssueFeedback:function(e){this.editType=this.issueEffectFeedbackOpen?null:"issueFeedback",this.issueEffectFeedbackOpen||this.toggleItem(e,"issueFeedback")},toggleIssueComment:function(e){this.editType=this.issueEffectCommentOpen?null:"issueComment",this.issueEffectCommentOpen||this.toggleItem(e,"issueComment")},setTemplate:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,i;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.currentItem.id,i=new l["a"]({id:r,templateId:e}),s.next=4,t.$store.dispatch("issue/setEffectTemplate",i);case 4:return s.next=6,t.$store.dispatch("issueEffect/findAll",{force:!0});case 6:case"end":return s.stop()}}),s)})))()},unsetTemplate:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,i,n;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.currentItem.id,i=new l["a"]({id:r,templateId:e}),s.next=4,t.$store.dispatch("issue/unsetEffectTemplate",i);case 4:return n=s.sent,s.next=7,t.$store.dispatch("issueEffect/findAll");case 7:return s.abrupt("return",n);case 8:case"end":return s.stop()}}),s)})))()},saveIssueReply:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,i,n,o,c;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.issueEffectCommentOpen?"COMMENT":"FEEDBACK",i=t.currentItem.id,n=e.description,o=e.value,c=new l["a"]({authorId:t.currentItem.author.id,typeAuthorId:e.typeAuthorId,issueId:i,value:o,status:r,description:n}),s.next=7,t.$store.dispatch("ideaIssueReply/create",c);case 7:return s.next=9,t.$store.dispatch("issue/findById",{id:t.currentItem.id,force:!0});case 9:t.closePopovers();case 10:case"end":return s.stop()}}),s)})))()},closeIssueForFeedback:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new l["a"]({id:e.currentItem.id}),t.next=3,e.$store.dispatch("issue/closeFeedback",s);case 3:e.issueEffectCommentOpen=!1,e.issueEffectFeedbackOpen=!1;case 5:case"end":return t.stop()}}),t)})))()},closePopovers:function(){this.issueEffectCommentOpen=!1,this.issueEffectFeedbackOpen=!1},scrollToPosAndSetParentPadding:function(e){if(e&&e.id){var t=document.getElementsByClassName("issueTable-row-".concat(e.id))[0],s=Math.abs(window.innerHeight-t.getBoundingClientRect().bottom-614-300-190);this.$emit("issuesTableOffsetTop",s),this.$nextTick((function(){t.scrollIntoView({behavior:"smooth"})}))}else if(this.currentItem){var r=document.getElementsByClassName("issueTable-row-".concat(this.currentItem.id))[0];this.$emit("issuesTableOffsetTop",0),this.$nextTick((function(){r.scrollIntoView({behavior:"smooth"})}))}},toggleItem:function(e,t){this.closeOtherIssueEffectModals(t),"issueAdd"==t?this.scrollToPosAndSetParentPadding(e):this.scrollToPosAndSetParentPadding(),e&&(!this.currentItem||this.currentItem.id!==e.id||this.issueEffectAddOpen||this.issueEffectFeedbackOpen||this.issueEffectCommentOpen||"issueRemove"===this.editType)?this.currentItem=e:this.currentItem=null},overlayClick:function(){this.setDefaultEffect(),this.issueDescriptionExpanded=!1,!this.currentItem||this.issueEffectCommentOpen||this.issueEffectFeedbackOpen||this.issueEffectAddOpen||this.issueRemoveOpen?(this.editType="",this.hoverRowId=null,this.issueEffectCommentOpen=!1,this.issueEffectFeedbackOpen=!1,this.issueEffectAddOpen=!1,this.issueRemoveOpen=!1,this.issueDescriptionExpanded=!1):this.toggleItem(null)},formatDate:function(e){return e?f()(e).format("DD/MM/YYYY HH:mm:ss"):"N/A"},isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},deleteAll:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new l["a"]({ids:e.getItems.map((function(e){return e.id}))}),t.next=3,e.$store.dispatch("issue/deleteMany",s);case 3:e.$emit("deletedAll",s);case 4:case"end":return t.stop()}}),t)})))()},deleteItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=new l["a"]({id:e.id}),s.next=3,t.$store.dispatch("issue/delete",r);case 3:t.issueRemoveOpen=!1,t.currentItem=null;case 5:case"end":return s.stop()}}),s)})))()},checkItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=new l["a"]({id:e.id,checked:e.checked}),s.next=3,t.$store.dispatch("issue/check",r);case 3:case"end":return s.stop()}}),s)})))()}}},je=$e,Se=(s("624f"),s("2d43"),Object(R["a"])(je,d,p,!1,null,"2c487c93",null)),Ee=Se.exports,Te={components:{"idea-form":u["default"],"issues-table":Ee},data:function(){return{clickedRowBoundingClientRect:0,ideaFromIssue:{},deleting:!1,updateForm:null,currentItems:[],currentItem:null,currentRowDetails:null,currentDetailsItem:null,loadingItem:!1,showIdeaPopover:!1,uniquePathIssues:null,filter:{busy:!1},toolOptions:null}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({loading:"issue/loading",issues:"issue/filteredItems",filterValue:"issue/filter",currentProcess:"process/current",showInnerOverlayOnTop:"app/show_inner_overlay_on_top",processes:"process/all"})),{},{getIssues:{get:function(){return this.process?this.$store.getters["issue/byProcess"](this.process.id).filter((function(e){return e.parent})):[]}},uniqueProcessPathIds:{get:function(){var e=this,t=[];if(this.getIssues.map((function(s){var r=e.issuePathDeducer(s);r&&t.push(r)})),!t||0==t.length)return[];var s=Array.from(new Set(t.map((function(e){return JSON.stringify(e)})))).map((function(e){return JSON.parse(e)}));return this.getUniquePaths(s)},set:function(e){this.uniquePathIssues=e}},process:{get:function(){return this.currentProcess("issues").process}},fields:{get:function(){return[{key:"name",label:this.$t("Process Part"),sortable:!0},{key:"issues",label:this.$t("Issues"),sortable:!0},{key:"loss",label:this.$t("Loss"),sortable:!0},{key:"actions",label:this.$t("Manage"),class:"actions"}]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.process){t.next=3;break}return t.next=3,e.loadProcessAndIssues();case 3:if(!(e.$router.currentRoute.query&&Object.keys(e.$router.currentRoute.query).length>0)){t.next=6;break}return t.next=6,e.goToIssue();case 6:case"end":return t.stop()}}),t)})))()},methods:{goToIssue:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){var s,r,i,n,o;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={processId:null!==(s=e.$router.currentRoute.query.processId)&&void 0!==s?s:null,stageId:null!==(r=e.$router.currentRoute.query.stageId)&&void 0!==r?r:null,operationId:null!==(i=e.$router.currentRoute.query.operationId)&&void 0!==i?i:null,phaseId:null!==(n=e.$router.currentRoute.query.phaseId)&&void 0!==n?n:null},t.next=3,e.navigateToIssueDetails(o);case 3:case"end":return t.stop()}}),t)})))()},navigateToIssueDetails:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){var r,i,n,o,c,l,u,d,p,m,f,v,h,b,g,y,w;return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.processId,i=void 0===r?null:r,n=e.stageId,o=void 0===n?null:n,c=e.operationId,l=void 0===c?null:c,u=e.phaseId,d=void 0===u?null:u,p=t.processes.find((function(e){return e.id==i})),m=i&&p&&p.stages.length>0?p.stages.find((function(e){return e.id==o})):null,f=l&&m&&m.operations.length>0?m.operations.find((function(e){return e.id==l})):null,v=d&&f&&f.phases.length>0?f.phases.find((function(e){return e.id==d})):null,h=p.id,b=m?m.id:null,g=f?f.id:null,y=v?v.id:null,w=t.uniqueProcessPathIds.find((function(e){return e.processId==h&&e.stageId==b&&e.operationId==g&&e.phaseId==y})),s.next=12,t.$store.dispatch("process/setCurrentProcess",{section:"issues",process:p});case 12:t.$nextTick((function(){t.$refs["issuePath-".concat(w.id)].click()}));case 13:case"end":return s.stop()}}),s)})))()},setParentPadding:function(e){this.clickedRowBoundingClientRect=e},deleted:function(e){this.currentRowDetails&&this.currentRowDetails.item&&this.currentRowDetails.item.pathIssues&&this.currentRowDetails.item.pathIssues.length>0&&(this.currentRowDetails.item.pathIssues=this.currentRowDetails.item.pathIssues.filter((function(t){return t.id!==e.id})))},pathTotalHourLoss:function(e){var t=0;if(e.pathIssues.length>0&&e.pathIssues.forEach((function(e){t+=e.issueHoursTotal})),t<0)return"(".concat(this.$tc("h.count",t),")")},deletedAll:function(){this.currentRowDetails=null},doesProcessPathExist:function(e){var t=e.stageId,s=e.operationId,r=e.phaseId;if(t&&s&&r){var i,a,n=this.process.stages.find((function(e){return e.id==t})),o=null!==(i=null===n||void 0===n?void 0:n.operations.find((function(e){return e.id==s})))&&void 0!==i&&i,c=null!==(a=null===o||void 0===o?void 0:o.phases.find((function(e){return e.id==r})))&&void 0!==a&&a;return n&&o&&c}if(t&&s&&!r){var l,u,d=this.process.stages.find((function(e){return e.id==t})),p=null!==(l=null===d||void 0===d?void 0:d.operations.find((function(e){return e.id==s})))&&void 0!==l&&l,m=null!==(u=null===p||void 0===p?void 0:p.phases.find((function(e){return e.id==r})))&&void 0!==u&&u;return d&&p&&!m}if(t&&!s&&!r){var f,v,h,b,g=this.process.stages.find((function(e){return e.id==t})),y=null!==(f=null===(v=g.operations)||void 0===v?void 0:v.find((function(e){return e.id==s})))&&void 0!==f&&f,w=null!==(h=null===(b=y.phases)||void 0===b?void 0:b.find((function(e){return e.id==r})))&&void 0!==h&&h;return g&&!y&&!w}return!1},getTotalIssueLoss:function(e){var t=0;return e.pathIssues&&e.pathIssues.length>0&&e.pathIssues.forEach((function(e){t+=e.effectedMoneyTotalValue})),t<0?t/100:0},getUniquePaths:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length<1)return[];var s=t.filter((function(t){return e.doesProcessPathExist(t)})),r=s.map((function(t,s){return{id:s,processId:t.processId,stageId:t.stageId,operationId:t.operationId,phaseId:t.phaseId,rowId:e.getRowId(t),pathIssues:e.getIssuesForKnownPath(t),pathTitles:e.getPathTitles(t),_showDetails:e.isRowOpen(s)}}));return this.currentRowDetails&&(r.some((function(t){return t.id==e.currentRowDetails.index}))||(this.currentRowDetails=null)),r.filter((function(e){return e.pathIssues.length>0}))},isRowOpen:function(e){return!!(this.currentRowDetails&&e===this.currentRowDetails.index&&this.currentRowDetails.item.pathIssues.length>0)},getRowId:function(e){var t,s,r=e.stageId,i=null!==(t=e.operationId)&&void 0!==t?t:0,a=null!==(s=e.phaseId)&&void 0!==s?s:0;return"".concat(r).concat(i).concat(a)},issuePathDeducer:function(e){if(e.parent){if("ProcessPhase"===e.parent.__typename){var t=e.parent.processId,s=e.parent.id,r=e.parent.operation.id,i=e.parent.operation.stageId;return{processId:t,phaseId:s,operationId:r,stageId:i}}if("ProcessOperation"===e.parent.__typename){var a=e.parent.processId,n=e.parent.id,o=e.parent.stageId;return{processId:a,operationId:n,stageId:o}}if("ProcessStage"===e.parent.__typename){var c=e.parent.processId,l=e.parent.id;return{processId:c,stageId:l}}}},getPathTitles:function(e){var t=this,s=function(e){t.mappedProcessPaths={stage:null,operation:null,phase:null};var s=e.stageId,r=e.operationId,i=e.phaseId,a=null,n=null,o=null;return s&&(a=t.process.stages.find((function(e){return e.id==s})),t.mappedProcessPaths.stage=a.title),r&&(n=a.operations.find((function(e){return e.id==r})),t.mappedProcessPaths.operation=n.title),i&&(o=n.phases.find((function(e){return e.id==i})),t.mappedProcessPaths.phase=o.title),t.mappedProcessPaths};return s(e)},getIssuesForKnownPath:function(e){var t=[];if(e){var s=e.stageId,r=e.operationId,i=e.phaseId;i&&(t=this.getIssues.filter((function(e){return e.parent.id==i&&"ProcessPhase"==e.parent.__typename}))),r&&!i&&(t=this.getIssues.filter((function(e){return e.parent.id==r&&"ProcessOperation"==e.parent.__typename}))),r||i||(t=this.getIssues.filter((function(e){return e.parent.id==s&&"ProcessStage"==e.parent.__typename})))}return t},loadProcessAndIssues:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("process/findById",{id:e.process.id,force:!0});case 2:return t.next=4,e.$store.dispatch("issue/findByProcess",{id:e.process.id,force:!0});case 4:case"end":return t.stop()}}),t)})))()},isRowEditing:function(e){return e&&this.currentItem&&e.item&&e.item.rowId==this.currentItem.rowId},newIdea:function(e){this.currentItem=e.item,this.currentItem._isActive=!0,this.showIdeaPopover=!0},closeIdeaForm:function(){this.showIdeaPopover=!1,this.currentItem._isActive=!1,this.currentRowDetails||(this.currentItem=null)},overlayClick:function(){this.currentItem?this.toggleItem(null):this.showDetails(null)},showDetails:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.currentRowDetails&&t.currentRowDetails.item&&(t.currentRowDetails.item._showDetails=!1),t.$store.dispatch("app/toggleInnerOverlay"),null==e||t.currentRowDetails&&t.currentRowDetails.item.id==e.item.id?t.currentRowDetails=null:(t.currentRowDetails=e,t.currentRowDetails.toggleDetails(),t.currentRowDetails.item._showDetails=!0);case 3:case"end":return s.stop()}}),s)})))()},toggleItem:function(e){this.showIdeaPopover=!1,this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.rowId===e.rowId?(this.currentItem._isActive=!1,this.currentItem=null,this.updateForm=null,this.deleting=!1):(this.updateForm=new l["a"]({id:e.id,name:e.name,yearlyCosts:e.yearlyCosts,priceModel:e.priceModel?e.priceModel.id:null,tool:e.toolId}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")}}},Re=Te,Fe=(s("aabf"),Object(R["a"])(Re,r,i,!1,null,"2b320167",null));t["default"]=Fe.exports},a9cd:function(e,t,s){},aabf:function(e,t,s){"use strict";s("c3b5")},aacc:function(e,t,s){},abdf:function(e,t,s){"use strict";s("73de")},b300:function(e,t,s){},b73f:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("process-selector",{attrs:{"max-level":"process",section:"issues","on-apply":e.onApply}})],1)},i=[],a=s("c7eb"),n=s("1da1"),o={methods:{onApply:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.process){s.next=5;break}return s.next=3,t.$store.dispatch("process/findById",{id:e.process.id});case 3:return s.next=5,t.$store.dispatch("issue/findByProcess",{id:e.process.id});case 5:case"end":return s.stop()}}),s)})))()}}},c=o,l=s("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},b90e:function(e,t,s){"use strict";s("b0c0"),s("498a");var r=function(){var e=this,t=this,s=t._self._c;return s("div",[t.ready?s("b-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)},keyup:function(e){return t.$validator.validateAll()}}},[s("b-row",[s("b-col",{ref:"projectFormNameField",staticClass:"col-12"},[s("div",{staticClass:"form-label-group required form-group"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"},{name:"autofocus",rawName:"v-autofocus"}],attrs:{id:"name",autocomplete:"off",name:"name",disabled:t.form.busy,placeholder:t.$t("Project name"),type:"text",state:t.$validateState("name",t.form)},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("name",t.form)))])],1)]),s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"form-group"},[s("user-selector",{directives:[{name:"validate",rawName:"v-validate",value:"required|minlength:1",expression:"'required|minlength:1'"}],staticStyle:{"z-index":"1",position:"relative"},attrs:{name:"project_users",id:"project_users",autocomplete:"project_users","show-field":!0,state:t.$validateState("users",t.form),items:t.users,"show-add-btn":!1},model:{value:t.form.userIds,callback:function(e){t.$set(t.form,"userIds",e)},expression:"form.userIds"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("users",t.form)))])],1)]),s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"form-group"},[s("tool-selector",{ref:"toolsDropDown",staticStyle:{"z-index":"1",position:"relative"},attrs:{autocomplete:"off",id:"project_tools",name:"project_tools","show-field":!0,items:t.getTools,"place-holder-text":t.$t("Test Tools"),state:t.$validateState("tools",t.form),"show-add-btn":!1},on:{input:function(e){return t.refreshIdeas("tools")}},model:{value:t.form.companyToolIds,callback:function(e){t.$set(t.form,"companyToolIds",e)},expression:"form.companyToolIds"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("tools",t.form)))])],1)]),s("b-col",{attrs:{cols:"12"}},[s("div",{staticClass:"form-group"},[s("idea-selector",{key:t.ideaDropwDownIntent,ref:"ideasDropDown",staticStyle:{"z-index":"1",position:"relative"},attrs:{"show-field":!0,"place-holder-text":t.$t("Test Ideas"),items:t.concatedTestingIdeas,autocomplete:"off",state:t.$validateState("ideas",t.form),"show-add-btn":!1,name:"ideas"},on:{input:function(e){return t.refreshIdeas("ideas")}},model:{value:t.selectedProjectIdeas,callback:function(e){t.selectedProjectIdeas=e},expression:"selectedProjectIdeas"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("ideas",t.form)))])],1)]),s("b-col",{staticClass:"col-12"},[s("div",{staticClass:"form-label-group required form-group"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:0|max_value:999999999999999",expression:"\n                'required|numeric|min_value:0|max_value:999999999999999'\n              "}],attrs:{id:"budget","max-length":15,autocomplete:"off",disabled:t.form.busy,placeholder:t.$t("Budget"),type:"number",name:"budget",state:t.$validateState("budget",t.form)},model:{value:t.getBudget,callback:function(e){t.getBudget=e},expression:"getBudget"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("budget",t.form)))])],1)]),"create"===t.mode?s("b-col",{staticClass:"col-12"},[s("div",{staticClass:"form-label-group required form-group"},[s("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":!1===t.$validateState("type",t.form),"is-valid":!0===t.$validateState("type",t.form)},attrs:{label:"label","get-option-label":function(t){return e.$t(t.label)},"data-vv-name":"type",placeholder:t.$t("Project type"),reduce:function(e){return e.id},options:t.projectTypeOptions},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("type",t.form)))])],1)]):t._e(),"create"===t.mode?s("b-col",{staticClass:"col-12"},[s("div",{staticClass:"form-label-group required form-group"},[s("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":!1===t.$validateState("evaluation_type",t.form),"is-valid":!0===t.$validateState("evaluation_type",t.form)},attrs:{label:"label","get-option-label":function(t){return e.$t(t.label)},"data-vv-name":"evaluation_type",placeholder:t.$t("Evaluation type"),reduce:function(e){return e.id},options:t.evaluationTypeOptions,disabled:t.form.busy},model:{value:t.form.evaluationType,callback:function(e){t.$set(t.form,"evaluationType",e)},expression:"form.evaluationType"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("evaluation_type",t.form)))])],1)]):t._e(),"PERIODIC"===t.form.evaluationType&&"create"===t.mode?s("b-col",{staticClass:"col-12"},[s("b-row",[s("b-col",{staticClass:"col-4 pr-1"},[s("div",{staticClass:"form-label-group required"},[s("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:0",expression:"'required|numeric|min_value:0'"}],attrs:{id:"evaluation_interval_amount",disabled:t.form.busy,placeholder:t.$t("Interval"),type:"number",name:"evaluation_interval_amount",state:t.$validateState("evaluation_interval_amount",t.form)},model:{value:t.form.evaluationIntervalAmount,callback:function(e){t.$set(t.form,"evaluationIntervalAmount",t._n(e))},expression:"form.evaluationIntervalAmount"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("evaluation_interval_amount",t.form)))])],1)]),"create"===t.mode?s("b-col",{staticClass:"col-8 pl-1"},[s("div",{staticClass:"form-label-group required"},[s("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":!1===t.$validateState("role",t.form),"is-valid":!0===t.$validateState("role",t.form)},attrs:{label:"label","get-option-label":function(t){return e.$t(t.label)},"data-vv-name":"evaluation_interval_unit",placeholder:t.$t("Period"),reduce:function(e){return e.id},options:t.evaluationUnitOptions,disabled:t.form.busy},model:{value:t.form.evaluationIntervalUnit,callback:function(e){t.$set(t.form,"evaluationIntervalUnit",e)},expression:"form.evaluationIntervalUnit"}}),s("b-form-invalid-feedback",[t._v(t._s(t.$displayError("evaluation_interval_unit",t.form)))])],1)]):t._e()],1)],1):t._e(),s("b-col",{staticClass:"col-12",staticStyle:{height:"40px"}},[s("b-row",{staticStyle:{height:"100%",margin:"auto","align-items":"center"}},[s("b-col",{staticStyle:{padding:"0"}},[s("div",{staticClass:"form-label-group required",on:{click:t.toggleAdvanced}},[s("div",{staticClass:"project_advaced_actions"},[s("b-button",{attrs:{variant:"primary"}},[t._v(" "+t._s(this.$t("Project Advanced"))+" ")]),s("div",{staticClass:"advanced-form-advanced-switch"},[s("b-popover",{attrs:{target:"advanced_form_info_text-info-id",container:"advanced_form_info_text-info-id",placement:"top",triggers:"hover focus",content:t.getAdvancedInfoContent}}),s("div",{staticClass:"advanced_form_info_text-info",attrs:{id:"advanced_form_info_text-info-id"}},[s("i",{staticClass:"mdi mdi-information advanced_form_info_icon"})]),s("b-form-checkbox",{staticStyle:{"margin-top":"3px"},attrs:{name:"check-button",size:"lg",switch:""},model:{value:t.form.useAdvanced,callback:function(e){t.$set(t.form,"useAdvanced",e)},expression:"form.useAdvanced"}})],1)],1)]),t.showAdvanced?s("inner-overlay",{class:{"inner-overlay-create":"create"===t.mode,"inner-overlay-edit":"edit"===t.mode},on:{click:t.toggleAdvanced}}):t._e(),t.showAdvanced?s("b-card",{attrs:{"no-body":""}},[s("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:function(){return t.$refs.projectFormNameField},show:t.showAdvanced,placement:"right",offset:"15%","custom-class":"advancedForm-form-popover"},on:{"update:show":function(e){t.showAdvanced=e}}},[s("advanced-form",{attrs:{users:t.users,form:t.form},on:{done:t.toggleAdvanced},model:{value:t.advancedForm,callback:function(e){t.advancedForm=e},expression:"advancedForm"}})],1)],1):t._e()],1)],1)],1)],1),s("b-row",[s("b-col",{staticClass:"col-12"},[s("hr",{staticClass:"mt-0"}),s("loading-button",{attrs:{size:"lg",block:"",type:"submit",disabled:t.vErrors.any()||t.form.busy,loading:t.form.busy,variant:"primary"}},[t._v(t._s(t.$t("Save changes")))]),"edit"===t.mode&&t.$can("core/project/delete",t.input)?s("div",{staticClass:"mt-3 text-center"},[s("hr"),s("confirm-button",{attrs:{variant:"transparent","confirm-message":t.$t("This action cannot be undone!"),"confirm-title":t.$t("Delete project")+"?","confirm-text":t.$t("Delete project"),"btn-class":"btn-outline-danger",size:"sm","show-overlay":!1,block:""},on:{confirm:t.deleteItem}},[s("i",{staticClass:"mdi mdi-trash-can"}),t._v(" "+t._s(t.$t("Delete project"))+" ")])],1):t._e()],1)],1)],1):s("div",{staticClass:"text-center p-5"},[s("b-spinner")],1)],1)},i=[],a=s("2909"),n=s("c7eb"),o=s("1da1"),c=s("5530"),l=(s("99af"),s("4de4"),s("d3b7"),s("3ca3"),s("ddb0"),s("159b"),s("b64b"),s("d81d"),s("14d9"),s("4fadc"),s("25f0"),s("7db0"),s("6062"),s("2f62")),u=s("9fee"),d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page",staticStyle:{width:"300px","min-height":"50px"}},[t("restrict-role",{attrs:{name:"evaluation",labelText:e.$t("Issue Evaluation Restriction"),infoText:e.$t("Issue Evaluation Restriction Info"),type:e.type,items:e.getAllRoles},on:{opened:e.setType,changed:e.saveSelection},model:{value:e.getIssueEvaluationRoles,callback:function(t){e.getIssueEvaluationRoles=t},expression:"getIssueEvaluationRoles"}}),t("restrict-role",{attrs:{name:"template",labelText:e.$t("Issue Template Restriction"),infoText:e.$t("Issue Template Restriction Info"),type:e.type,items:e.getAllRoles},on:{opened:e.setType,changed:e.saveSelection},model:{value:e.getIssueTemplateRoles,callback:function(t){e.getIssueTemplateRoles=t},expression:"getIssueTemplateRoles"}}),t("restrict-role",{attrs:{name:"share",labelText:e.$t("Share Access Restriction"),infoText:e.$t("Share Access Info"),type:e.type,items:e.getAllRoles},on:{opened:e.setType,changed:e.saveSelection},model:{value:e.getShareAccessRoles,callback:function(t){e.getShareAccessRoles=t},expression:"getShareAccessRoles"}})],1)},p=[],m=s("2c54"),f={components:{"restrict-role":m["default"]},computed:Object(c["a"])(Object(c["a"])({},Object(l["b"])({companyRoles:"companyRole/all",show_inner_overlay:"app/show_inner_overlay"})),{},{getAllRoles:{get:function(){return this.companyRoles}},getIssueEvaluationRoles:{get:function(){var e=this;return this.companyRoles.filter((function(t){return e.advancedForm.issueEvaluationRoles.indexOf(t.id)>-1}))},set:function(e){this.advancedForm.issueEvaluationRoles=e}},getIssueTemplateRoles:{get:function(){var e=this;return this.companyRoles.filter((function(t){return e.advancedForm.issueTemplateRoles.indexOf(t.id)>-1}))},set:function(e){this.advancedForm.issueTemplateRoles=e}},getShareAccessRoles:{get:function(){var e=this;return this.companyRoles.filter((function(t){return e.advancedForm.shareAccessRoles.indexOf(t.id)>-1}))},set:function(e){this.advancedForm.shareAccessRoles=e}}}),props:{form:{type:Object,default:null},value:{type:Object,default:function(){}},users:{type:Array,default:function(){return[]}}},data:function(){return{type:"",showRolesPopover:!1,intent:0,issueRoleEdit:!1,advancedForm:{issueEvaluationRoles:[],issueTemplateRoles:[],shareAccessRoles:[]}}},mounted:function(){var e,t,s,r,i,a;this.form.issueEvaluationRoles&&(this.advancedForm.issueEvaluationRoles=null!==(e=this.form.issueEvaluationRoles)&&void 0!==e?e:[]);this.value&&this.value.issueEvaluationRoles&&(this.advancedForm.issueEvaluationRoles=null!==(t=this.value.issueEvaluationRoles)&&void 0!==t?t:[]);this.form.issueTemplateRoles&&(this.advancedForm.issueTemplateRoles=null!==(s=this.form.issueTemplateRoles)&&void 0!==s?s:[]);this.value&&this.value.issueTemplateRoles&&(this.advancedForm.issueTemplateRoles=null!==(r=this.value.issueTemplateRoles)&&void 0!==r?r:[]);this.form.shareAccessRoles&&(this.advancedForm.shareAccessRoles=null!==(i=this.form.shareAccessRoles)&&void 0!==i?i:[]);this.value&&this.value.shareAccessRoles&&(this.advancedForm.shareAccessRoles=null!==(a=this.value.shareAccessRoles)&&void 0!==a?a:[])},methods:{setType:function(e){this.type!==e?this.type=e:this.type=null},saveSelection:function(){this.$emit("input",this.advancedForm)},toggleRolesPopover:function(){this.showRolesPopover=!this.showRolesPopover},toggleIssueRoleEdit:function(){this.type="evaluation",this.issueRoleEdit=!this.issueRoleEdit}}},v=f,h=(s("5b21"),s("2877")),b=Object(h["a"])(v,d,p,!1,null,"28a8b38c",null),g=b.exports,y={props:{value:{type:Object,required:!1},mode:{type:String,required:!1,default:"create"},stage:{type:Object,required:!1}},components:{"advanced-form":g},data:function(){return{showAdvanced:!1,selectedProjectIdeas:[],intent:Math.random(),ideaDropwDownIntent:Math.random(),toolDropwDownIntent:Math.random(),evaluationUnitOptions:[{id:"DAYS",label:"DAYS"},{id:"WEEKS",label:"WEEKS"},{id:"MONTHS",label:"MONTHS"},{id:"YEARS",label:"YEARS"}],evaluationTypeOptions:[{id:"STAGE_FINISH",label:"On finish stage"},{id:"PERIODIC",label:"Periodic"}],projectTypeOptions:[{id:"NORMAL",label:"Normal"},{id:"ON_GOING",label:"On going"}],ready:!1,input:null,toolsForStage:[],budget:null,advancedChecked:!1,advancedForm:{issueEvaluationRoles:[],issueTemplateRoles:[],shareAccessRoles:[]},form:new u["a"]({id:null,name:null,processId:null,userIds:[],processStageId:null,ideaIds:[],companyToolIds:[],type:"NORMAL",evaluationType:"STAGE_FINISH",evaluationIntervalUnit:"WEEKS",evaluationIntervalAmount:1,budget:0,useAdvanced:!1})}},computed:Object(c["a"])({getAdvancedInfoContent:{get:function(){return this.form.useAdvanced?"".concat(this.$t("AdvancedForm-switch-info")," ").concat(this.$t("inUse")):"".concat(this.$t("AdvancedForm-switch-info")," ").concat(this.$t("notInUse"))}},getBudget:{get:function(){return this.budget},set:function(e){e.length<15&&(this.budget=e)}},getAvailableOrAllStages:{get:function(){var e=this;return this.filteredProjects.filter((function(t){return t.id===e.input.id}))}},process:{get:function(){var e=this.currentProcess("projects")?this.currentProcess("projects").process:null;return e}},availableProcessIdeas:{get:function(){var e,t=this;if(!this.process)return[];var s=this.$store.getters["idea/byProcess"](this.process.id),r=s.filter((function(e){return("TESTING"===e.status||"ADOPTED"===e.status)&&e.parent}));return"edit"===this.mode&&"ON_GOING"!==(null===(e=this.input)||void 0===e?void 0:e.type)?r.filter((function(e){var s;return e.stageId===(null===(s=t.stage)||void 0===s?void 0:s.processStage.id)})):r}},availableToolIdeas:{get:function(){var e,t=this;if(!this.process)return[];var s=this.$store.getters["toolIdea/byProcess"](this.process.id),r=s.filter((function(e){return"TESTING"===e.status||"ADOPTED"===e.status})),i=r.filter((function(e){return t.form.companyToolIds.indexOf(e.companyToolId)>-1}));return"edit"===this.mode&&"ON_GOING"!==(null===(e=this.input)||void 0===e?void 0:e.type)?i.filter((function(e){var s;return e.stageId===(null===(s=t.stage)||void 0===s?void 0:s.processStage.id)})):i}},concatedAdoptedIdeas:{get:function(){if(!this.process)return[];var e=this.availableProcessIdeas.concat(this.availableToolIdeas).filter((function(e){return"ADOPTED"===e.status}));return e}},concatedTestingIdeas:{get:function(){if(!this.process)return[];var e=this.availableProcessIdeas.concat(this.availableToolIdeas).filter((function(e){return"TESTING"===e.status}));return e}},getTools:{get:function(){var e,t;return null!==(e=null===(t=this.allTools)||void 0===t?void 0:t.filter((function(e){return"TOOL"===e.type})))&&void 0!==e?e:[]}}},Object(l["b"])({filteredProjects:"project/filteredItems",currentProcess:"process/current",currentUser:"auth/user",users:"user/all",allTools:"companyTool/all"})),watch:{advancedForm:function(e){console.log(e),(e.issueEvaluationRoles.length||e.issueTemplateRoles.length||e.shareAccessRoles.length)&&(this.form.useAdvanced=!0)}},mounted:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.intent=Math.random(),e.input=e.value,t.next=4,Promise.all([e.loadUsers(),e.loadIdeas()]);case 4:return t.next=6,e.initForm();case 6:e.ready=!0;case 7:case"end":return t.stop()}}),t)})))()},methods:{toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},loadIdeas:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("idea/findByProcess",{id:e.process.id});case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},loadUsers:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/findAll",{});case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})))()},initForm:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.populatePreselectionToForm();case 2:return t.next=4,e.refreshIdeas();case 4:case"end":return t.stop()}}),t)})))()},populatePreselectionToForm:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s,r,i,a,o,c;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.keys(e.input||{}).filter((function(t){return t in e.form})).forEach((function(t){return e.form[t]=e.input[t]})),e.form.processId=e.process.id,e.input&&(e.input.toolIds&&(e.form.companyToolIds=e.input.toolIds),e.input.ideaIds&&(s=e.concatedTestingIdeas.filter((function(t){return e.input.ideaIds.indexOf(t.id)>=0})),r=s.filter((function(e){return null!==e.tool&&"ADOPTED"!==e.status})),i=s.filter((function(e){return null===e.tool&&"ADOPTED"!==e.status})),a=[],o=[],i.map((function(e){return a.push(e.id)})),r.map((function(e){return o.push(e.id)})),e.selectedProjectIdeas=[].concat(a,o)),e.input.budget&&(e.budget=e.input.budget/100),c=Object.keys(e.advancedForm),Object.entries(e.input).forEach((function(t){if(c.indexOf(t[0])>-1&&t[1]){var s=t[0].toString(),r=t[1];e.advancedForm[s]=r}})));case 3:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s,r,i,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.ideaIds=Object(a["a"])(e.selectedProjectIdeas),e.form.budget=100*e.budget,e.concatedAdoptedIdeas.length>0&&e.concatedAdoptedIdeas.map((function(t){e.form.ideaIds.push(t.id)})),e.form.useAdvanced&&Object.entries(e.advancedForm).forEach((function(t){var s=t[0].toString(),r=t[1];e.form._fields[s]=r})),"edit"===e.mode?"ON_GOING"===e.input.type?(s=e.getAvailableOrAllStages.find((function(t){return t.id===e.input.id})),r=s.stages.map((function(e){return e.id})),e.form.processStageId=Object(a["a"])(r)):e.form.processStageId=[null!==(i=null===(o=e.stage)||void 0===o?void 0:o.id)&&void 0!==i?i:null]:e.form.processStageId=Object(a["a"])(new Set(e.process.stages.map((function(e){return e.id})))),t.prev=5,t.next=8,e.$validator.validateAll();case 8:if(e.vErrors.any()){t.next=21;break}if(e.$validator.reset(),"edit"!==e.mode){t.next=16;break}return t.next=13,e.$store.dispatch("project/update",e.form);case 13:e.input=t.sent,t.next=19;break;case 16:return t.next=18,e.$store.dispatch("project/create",e.form);case 18:e.input=t.sent;case 19:e.$emit("input",e.input),e.$emit("done");case 21:t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](5),e.budget=e.form.budget/100,console.log(t.t0);case 27:case"end":return t.stop()}}),t,null,[[5,23]])})))()},refreshIdeas:function(e){var t=this,s=[],r=[];this.availableToolIdeas.filter((function(e){return t.form.companyToolIds.indexOf(e.companyToolId)>-1&&t.selectedProjectIdeas.indexOf(e.id)>-1&&"TESTING"===e.status})).map((function(e){return r.push(e.id)})),this.availableProcessIdeas.filter((function(e){return t.selectedProjectIdeas.indexOf(e.id)>-1&&"TESTING"===e.status})).map((function(e){return s.push(e.id)})),"tools"===e&&this.$refs["ideasDropDown"]&&(this.ideaDropwDownIntent=Math.random(),this.$refs["ideasDropDown"].$forceUpdate()),this.selectedProjectIdeas=[].concat(s,r)},deleteItem:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("done"),t.next=3,e.$store.dispatch("project/delete",new u["a"]({id:e.input.id},null));case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})))()}}},w=y,_=(s("0544"),s("76db"),Object(h["a"])(w,r,i,!1,null,"5e27f367",null));t["a"]=_.exports},bde4:function(e,t,s){"use strict";s("cb24")},c1e0:function(e,t,s){},c265:function(e,t,s){"use strict";s("160d")},c2b1:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return e.$can("auth/user/create")?t("div",{staticClass:"ml-3"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-uppercase",attrs:{id:"btnNew",size:"sm",variant:"primary",title:e.$t("Create New")+" "+e.$t("Process")},on:{click:e.togglePopOver}},[t("i",{staticClass:"mdi mdi-plus"}),e._v(" "+e._s(e.$t("New"))+" ")]),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnNew",show:e.showPopOver,placement:"bottom"},on:{"update:show":function(t){e.showPopOver=t}}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",["process"===e.action?t("process-form",{on:{done:e.togglePopOver}}):e._e(),"stage"===e.action?t("process-form",{on:{done:e.togglePopOver}}):e._e(),e.action?e._e():t("div",[t("a",{staticClass:"text-undecorated text-dark font-13x d-block text-bold",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.action="process"}}},[e._v(e._s(e.$t("Process")))]),e.currentProcess?t("div",[t("hr"),t("a",{staticClass:"text-undecorated text-dark font-13x d-block text-bold d-flex flex-row",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.addStage.apply(null,arguments)}}},[t("span",[e._v(e._s(e.$t("Stage")))]),t("small",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"flex-grow-1 text-gray text-capitalize text-right text-overflow ml-5",attrs:{title:e.currentProcess.title.capitalize()}},[e._v(e._s(e.currentProcess.title))])])]):e._e()])],1)],1)],1)],1):e._e()},i=[],a=s("5530"),n=s("2f62"),o=(s("498a"),function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)},keyup:function(t){return e.$validator.validateAll()}}},[t("b-row",[t("b-col",[t("div",{staticClass:"form-label-group required"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],attrs:{id:"name",disabled:e.form.busy,placeholder:e.$t("Name of process"),type:"search",autocomplete:"off",name:"title",state:e.$validateState("title",e.form),autofocus:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"===typeof t?t.trim():t)},expression:"form.title"}}),t("label",{attrs:{for:"title"}},[e._v(e._s(e.$t("Name of process")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("title",e.form)))])],1)])],1),t("b-row",[t("b-col",[t("loading-button",{directives:[{name:"autofocus",rawName:"v-autofocus:autoselect",arg:"autoselect"}],attrs:{block:"",size:"lg",type:"submit",disabled:e.vErrors.any()||e.form.busy,loading:e.form.busy,variant:"primary"}},[e._v(e._s(e.$t("Save changes")))])],1)],1)],1)}),c=[],l=s("c7eb"),u=s("1da1"),d=s("9fee"),p={components:{},data:function(){return{form:new d["a"]({title:null})}},computed:{},mounted:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initForm();case 1:case"end":return t.stop()}}),t)})))()},methods:{initForm:function(){return Object(u["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},save:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var s;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll();case 2:if(e.vErrors.any()){t.next=13;break}return t.next=5,e.$validator.reset();case 5:return t.next=7,e.$store.dispatch("process/create",e.form);case 7:return s=t.sent,t.next=10,e.$store.dispatch("process/setCurrentProcess",{section:"process",process:s,stage:null,operation:null,phase:null});case 10:e.initForm(),e.$emit("input",s),e.$emit("done");case 13:case"end":return t.stop()}}),t)})))()}}},m=p,f=s("2877"),v=Object(f["a"])(m,o,c,!1,null,null,null),h=v.exports,b={data:function(){return{action:!1,showPopOver:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(n["b"])({current:"process/current"})),{},{currentProcess:{get:function(){return this.current("process")?this.current("process").process:null}}}),components:{"process-form":h},methods:{togglePopOver:function(){this.showPopOver=!this.showPopOver,this.action=null,this.$store.dispatch("app/showOverlay",{show:this.showPopOver,onClick:this.togglePopOver})},addStage:function(){window.vm.$emit("addStage"),this.togglePopOver()}}},g=b,y=Object(f["a"])(g,r,i,!1,null,null,null);t["default"]=y.exports},c3b5:function(e,t,s){},c573:function(e,t,s){},cad3:function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[c,l],attrs:Object.assign({viewBox:"0 0 9 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},a.concat([s("path",{attrs:{d:"M7.81 1.121L9 2.311 3.432 7.88 0 4.447l1.19-1.19 2.242 2.241L7.81 1.121z",fill:"#fff"}})]))}}},cb24:function(e,t,s){},d772:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("process-selector",{attrs:{"max-level":"phase","show-count":"ideas",section:e.section,list:{withStages:!0},detail:{withStagesFull:!0}},on:{setSection:e.setSection}})],1)},i=[],a=s("c7eb"),n=s("1da1"),o={mounted:function(){return Object(n["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},data:function(){return{section:"ideas"}},methods:{setSection:function(e){this.section=e},onSelectionChange:function(e,t){var s=this;return Object(n["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,"process"!==e){r.next=4;break}return r.next=4,s.$store.dispatch("idea/findByProcess",{id:t.id});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),console.log(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}},c=o,l=s("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},d7a6:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search issues")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])({},Object(c["b"])({items:"issue/filteredItems",filter:"issue/filter"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("issue/filter",e);case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},d8cd:function(e,t,s){"use strict";s("9c0c")},db66:function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7"),s("b0c0");var r,i,a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[t("portal",{attrs:{to:"topbar-right"}},[t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search users")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)]),e.currentItem||e.currentRowDetails?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"container-fluid"},[t("b-card",[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"name",busy:e.filter.busy,"primary-key":"id",hover:"",fields:e.fields,items:e.filteredItems,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":e.getRowClass},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"30%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"30%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"20%"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(fullName)",fn:function(s){return[t("span",[t("img",{staticClass:"border rounded-circle",attrs:{src:s.item.user.getAvatarUrl("50x50"),height:"25px"}}),e._v(" "+e._s(s.item.user.firstName)+" "+e._s(s.item.user.lastName)+" ")])]}},{key:"cell(companyRole)",fn:function(t){return[e._v(e._s(t.item.companyRole?t.item.companyRole.name:null))]}},{key:"cell(activeProject)",fn:function(s){return[t("span",{staticClass:"text-capitalize"},[e._v(" "+e._s(s.item.activeProject?s.item.activeProject.project.name:e.$t("None"))+" "+e._s(s.item.projects.length>1?" +"+(s.item.projects.length-1):"")+" ")])]}},{key:"cell(value)",fn:function(t){return[e._v(e._s(e._f("numberFormat")(e.calculateTotalValue(t.item),"0.00"))+" %")]}},{key:"cell(actions)",fn:function(s){return[t("div",{staticClass:"buttons"},[t("b-button",{staticClass:"btn-primary btn-expand btn-block text-uppercase m-0",staticStyle:{"font-size":"1.2rem",padding:"3px"},attrs:{size:"xs",variant:"action"},on:{click:function(t){return e.showDetails(s)}}},[e._v(e._s(e.$t("Details")))])],1)]}},{key:"row-details",fn:function(e){return[t("div",{staticClass:"row-details"},[t("item-details",{attrs:{item:e.item}})],1)]}}])})],1)],1)],1)},n=[],o=s("c7eb"),c=s("1da1"),l=s("5530"),u=(s("caad"),s("2532"),s("2f62")),d=s("9fee"),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"people-report user-details"},[t("b-row",[t("b-col",{staticClass:"pr-0",attrs:{cols:"3"}},[t("strong",[e._v(e._s(e.$t("Project")))]),t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"v-3 text-capitalize",attrs:{label:"name",clearable:!1,placeholder:e.$t("Project"),reduce:function(e){return e.id},options:e.projects},on:{input:e.changeProject},scopedSlots:e._u([{key:"open-indicator",fn:function(s){var r=s.attributes;return[t("span",e._b({},"span",r,!1),[t("span",{staticClass:"arrow-indicator"})])]}}]),model:{value:e.currentProjectId,callback:function(t){e.currentProjectId=t},expression:"currentProjectId"}})],1),t("b-col",{staticClass:"pl-0",attrs:{cols:"6"}},[e.currentProject?t("b-table",{staticClass:"t03",attrs:{fields:e.fields,items:e.currentProject.stages,"tbody-tr-class":e.getRowClass},scopedSlots:e._u([{key:"cell(stage)",fn:function(t){return[e._v(e._s(t.item.stage.title))]}},{key:"cell(ideas)",fn:function(t){return[e._v(e._s(t.item.totalIdeas))]}},{key:"cell(savings)",fn:function(t){return[e._v(e._s(e.$currency(t.item.userValue/100)))]}},{key:"cell(average)",fn:function(t){return[e._v(e._s(e.$currency(t.item.totalAverage/100)))]}}],null,!1,559498283)}):e._e()],1),t("b-col",{attrs:{cols:"3"}},[this.currentProject?t("report-chart",{ref:"report",attrs:{project:this.currentProject,user:e.item.user}}):e._e()],1)],1)],1)},m=[],f=(s("4e82"),s("d81d"),s("a9e3"),s("7db0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"idea-report idea-report-chart report-chart d-flex flex-column bg-light",staticStyle:{"min-height":"250px"}},[t("div",{staticClass:"period-selector text-right p-2 px-4 flex-grow-0 position-relative"},[t("unit-selector",{attrs:{units:e.intervals},on:{change:e.changePeriod},model:{value:e.filter.data.interval,callback:function(t){e.$set(e.filter.data,"interval",t)},expression:"filter.data.interval"}})],1),!e.filter.busy&&e.chartData?t("div",{staticClass:"flex-grow-1 justify-content-center flex-column d-flex"},[t("report-chart",{staticStyle:{height:"200px"},attrs:{data:e.chartData.data,options:e.chartData.options}})],1):t("div",{staticClass:"text-center flex-grow-1 d-flex justify-content-center flex-column"},[t("b-spinner",{staticStyle:{margin:"0 auto"},attrs:{variant:"primary"}})],1)])}),v=[],h=(s("b64b"),s("14d9"),s("c1df")),b=s.n(h),g=s("afe4"),y=s("1fca"),w={extends:y["a"],props:{data:{required:!0},options:{required:!1,default:function(){}}},mounted:function(){this.renderChart(this.data,this.options)}},_=w,x=s("2877"),I=Object(x["a"])(_,r,i,!1,null,null,null),O=I.exports,k={components:{"report-chart":O},props:{project:{required:!0},user:{required:!0}},data:function(){return{intervals:[{value:"day",label:"Day",cssClass:{}},{value:"month",label:"Month",cssClass:{}},{value:"quarter",label:"Quarter",cssClass:{}},{value:"year",label:"Year",cssClass:{}}],filter:{busy:!0,data:{from:null,to:null,interval:"month"}},chartData:null}},mounted:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.drawReport();case 2:case"end":return t.stop()}}),t)})))()},methods:{changePeriod:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function s(){return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.filter.data.interval=e,t.$nextTick((function(){t.drawReport()}));case 2:case"end":return s.stop()}}),s)})))()},drawReport:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var s,r,i,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.chartData=null,t.next=3,e.getReportData();case 3:s=t.sent,r={average:{backgroundColor:"rgb(150, 150, 150, .6)",borderColor:"rgb(150, 150, 150)",label:e.$t("Average"),pointRadius:1,fill:!1,data:[],borderWidth:2,lineTension:0},current_average:{backgroundColor:"rgb(66, 148, 208, .6)",borderColor:"rgb(66, 148, 208)",label:e.user.fullName,pointRadius:1,fill:!1,data:[],borderWidth:2,lineTension:0}},i={labels:[],datasets:[]},a=0,Object.keys(s.data).sort((function(e,t){return e>t?1:-1})).map((function(e){var t=s.data[e];i.labels.push(e),a=a>Math.abs(t.loss.total)?a:Math.abs(t.loss.total),a=a>Math.abs(t.gain.total)?a:Math.abs(t.gain.total),r.average.data.push(Object(g["a"])(t.general_total_Value.average/100)),r.current_average.data.push(Object(g["a"])(t.total_value.total/100))})),i.datasets=Object.keys(r).map((function(e){return r[e]})),e.chartData={data:i,options:{defaultFontSize:8,responsive:!0,legend:{position:"bottom",labels:{fontSize:8}},maintainAspectRatio:!1,borderWidth:.5,scales:{yAxes:[{ticks:{beginAtZero:!0,fontSize:8},scaleLabel:{display:!0,labelString:s.currency.name,fontSize:8}}],xAxes:[{ticks:{fontSize:8},gridLines:{display:!1},scaleLabel:{display:!0,labelString:e.$t(e.filter.data.interval.ucFirst()),fontSize:8}}]}}};case 10:case"end":return t.stop()}}),t)})))()},getReportData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var s,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.filter.data.id=e.user.id,e.filter.data.projectId=e.project.projectId,s=b()().utc(),r=b()().utc(),t.t0=e.filter.data.interval,t.next="quarter"===t.t0||"month"===t.t0?7:"day"===t.t0?9:"year"===t.t0?11:13;break;case 7:return s=s.add("year",-1),t.abrupt("break",13);case 9:return s=s.add("month",-1),t.abrupt("break",13);case 11:return s=s.add("year",-5),t.abrupt("break",13);case 13:return e.filter.data.from=s.format("YYYY-MM-DD HH:mm:ss"),e.filter.data.to=r.format("YYYY-MM-DD HH:mm:ss"),t.next=17,e.$store.dispatch("report/userProjectReport",e.filter);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)})))()}}},C=k,$=Object(x["a"])(C,f,v,!1,null,null,null),j=$.exports,S={components:{"report-chart":j},props:{item:{type:Object,required:!0}},data:function(){return{deleting:!1,currentItem:null,currentRowDetails:null,currentDetailsItem:null,currentProjectId:null,projects:[],currentProject:null}},computed:{fields:{get:function(){return[{key:"stage",label:this.$t("Stage"),sortable:!1},{key:"ideas",label:this.$t("Ideas"),sortable:!1},{key:"savings",label:this.$t("Savings"),sortable:!1},{key:"average",label:this.$t("Average savings"),sortable:!1}]}}},mounted:function(){this.projects=this.item.projects.map((function(e){return e.project})).sort((function(e,t){return e.name<t.name?-1:1})),this.projects[0]&&this.changeProject(this.projects[0]?this.projects[0].id:null)},methods:{getRowClass:function(e){return{"text-success":Number(e.userValue)>Number(e.totalAverage)+1e4,"text-warning":e.totalAverage+1e4>=e.userValue||e.userValue<=e.totalAverage-1e4,"text-danger":e.totalAverage-1e4>e.userValue}},changeProject:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function s(){return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.currentProjectId=t.projects.find((function(t){return t.id==e})),t.currentProject=t.item.projects.find((function(t){return t.projectId==e})),t.$nextTick((function(){t.$refs.report&&t.$refs.report.drawReport()}));case 3:case"end":return s.stop()}}),s)})))()},isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)}}},E=S,T=Object(x["a"])(E,p,m,!1,null,null,null),R=T.exports,F={components:{"item-details":R},data:function(){return{report:null,items:[],deleting:!1,updateForm:null,currentItem:null,currentRowDetails:null,currentFilter:"",currentDetailsItem:null,loadingItem:!1,showIdeaPopover:!1,filter:{busy:!1},toolOptions:null}},computed:Object(l["a"])(Object(l["a"])({},Object(u["b"])({showInnerOverlayOnTop:"app/show_inner_overlay_on_top"})),{},{filteredItems:{get:function(){var e=this;return""!==this.currentFilter?this.items.filter((function(t){return t.user.fullName.toLowerCase().includes(e.currentFilter.toLowerCase())})):this.items}},fields:{get:function(){return[{key:"fullName",label:this.$t("User"),sortable:!0},{key:"companyRole",label:this.$t("Role"),sortable:!0},{key:"activeProject",label:this.$t("Active project"),sortable:!1},{key:"value",label:this.$t("Value"),sortable:!0},{key:"actions",label:this.$t("Analytics"),class:"actions"}]}}}),mounted:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadReport();case 2:case"end":return t.stop()}}),t)})))()},methods:{calculateTotalValue:function(e){return e?(e.userAverage-e.otherAverage)/Math.abs(e.otherAverage)*100:0},getRowClass:function(e){var t=this.calculateTotalValue(e);return{"text-success":t>0,"text-warning":0==t,"text-danger":t<0}},isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},overlayClick:function(){this.currentItem?this.toggleItem(null):this.showDetails(null)},loadReport:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("report/peopleReport",e.filter);case 2:e.report=t.sent,e.items=e.report.data;case 4:case"end":return t.stop()}}),t)})))()},loadItem:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function s(){return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.issues||(t.loadingItem=!0),s.next=4,t.$store.dispatch("issue/findByStage",{id:e.id});case 4:e.issues=s.sent;case 5:return s.prev=5,t.loadingItem=!1,s.finish(5);case 8:case"end":return s.stop()}}),s,null,[[0,,5,8]])})))()},showDetails:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function s(){return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.currentRowDetails&&(t.currentRowDetails.item._showDetails=!1),t.$store.dispatch("app/toggleInnerOverlay"),null==e||t.currentRowDetails&&t.currentRowDetails.item.id==e.item.id){s.next=10;break}return t.currentRowDetails=e,t.currentRowDetails.toggleDetails(),s.next=7,t.loadItem(e.item);case 7:t.currentRowDetails.item._showDetails=!0,s.next=11;break;case 10:t.currentRowDetails=null;case 11:case"end":return s.stop()}}),s)})))()},filterResults:function(e){this.currentFilter=e},toggleItem:function(e){this.showIdeaPopover=!1,this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.id===e.id?(this.currentItem=null,this.updateForm=null,this.deleting=!1):(this.updateForm=new d["a"]({id:e.id,name:e.name,yearlyCosts:e.yearlyCosts,priceModel:e.priceModel?e.priceModel.id:null,tool:e.toolId}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")},itemChanged:function(e){e&&this.loadItem(e)}}},P=F,A=Object(x["a"])(P,a,n,!1,null,null,null);t["default"]=A.exports},dc4a2:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-bar"},[t("b-input-group",{staticClass:"search",staticStyle:{"margin-top":"5px"}},[t("b-form-input",{staticClass:"search",attrs:{placeholder:e.$t("Search Companies")+" (".concat(e.items.length,")")},on:{input:e.filterResults},model:{value:e.currentFilter,callback:function(t){e.currentFilter=t},expression:"currentFilter"}})],1)],1)},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=(s("4de4"),s("d3b7"),s("2f62")),l={data:function(){return{currentFilter:null}},computed:Object(o["a"])({},Object(c["b"])({items:"company/filteredItems",filter:"company/filter"})),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentFilter=e.filter;case 1:case"end":return t.stop()}}),t)})))()},methods:{filterResults:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$store.dispatch("company/filter",e);case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=s("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=p.exports},e2e1:function(e,t,s){"use strict";s("06a7")},e67d:function(e,t){function s(e){return"function"===typeof e.value||(console.warn("[Vue-click-outside:] provided expression",e.expression,"is not a function."),!1)}function r(e,t){if(!e||!t)return!1;for(var s=0,r=t.length;s<r;s++)try{if(e.contains(t[s]))return!0;if(t[s].contains(e))return!1}catch(i){return!1}return!1}function i(e){return"undefined"!==typeof e.componentInstance&&e.componentInstance.$isServer}e.exports={bind:function(e,t,a){if(!s(t))return;function n(t){if(a.context){var s=t.path||t.composedPath&&t.composedPath();s&&s.length>0&&s.unshift(t.target),e.contains(t.target)||r(a.context.popupItem,s)||e.__vueClickOutside__.callback(t)}}e.__vueClickOutside__={handler:n,callback:t.value};const o="ontouchstart"in document.documentElement?"touchstart":"click";!i(a)&&document.addEventListener(o,n)},update:function(e,t){s(t)&&(e.__vueClickOutside__.callback=t.value)},unbind:function(e,t,s){const r="ontouchstart"in document.documentElement?"touchstart":"click";!i(s)&&e.__vueClickOutside__&&document.removeEventListener(r,e.__vueClickOutside__.handler),delete e.__vueClickOutside__}}},e988:function(e,t,s){},ec0d:function(e,t,s){"use strict";s.r(t);s("4de4"),s("d3b7"),s("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn"},[e.currentItem||e.currentRowDetails||e.resetingPassword?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop||e.resetingPassword},on:{click:e.overlayClick}}):e._e(),t("div",{staticClass:"container-fluid"},[t("b-card",[t("b-table",{staticClass:"t01",attrs:{"sort-icon-left":"","sort-by":"fullName",busy:e.filter.busy,"primary-key":"id",hover:"",fields:e.fields,items:e.items,"show-empty":!0,"empty-text":e.$t("There are no records for the given criteria"),"tbody-tr-class":function(t,s){return e.isRowEditing(t)?"editing":null}},scopedSlots:e._u([{key:"table-colgroup",fn:function(e){return[t("col",{staticStyle:{width:"30%"}}),t("col",{staticStyle:{width:"15%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"10%"}}),t("col",{staticStyle:{width:"5%"}}),t("col",{staticStyle:{width:"250px"}})]}},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(fullName)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm}},[t("span",[t("img",{staticClass:"border rounded-circle",attrs:{src:s.item.getAvatarUrl("50x50"),height:"25px"}}),e._v(" "+e._s(s.item.firstName)+" "+e._s(s.item.lastName)+" ")]),e.isRowEditing(s)?t("template",{slot:"editing"},[t("div",{staticClass:"d-flex"},[t("div",{staticClass:"flex-grow-1 mr-1",staticStyle:{position:"relative"}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:2",expression:"'required|min:2'"}],attrs:{name:"firstName",size:"sm",state:e.$validateState("firstName",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.firstName,callback:function(t){e.$set(e.updateForm,"firstName",t)},expression:"updateForm.firstName"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("firstName",e.updateForm)))])],1),t("div",{staticClass:"flex-grow-1",staticStyle:{position:"relative"}},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:2",expression:"'required|min:2'"}],attrs:{name:"lastName",size:"sm",state:e.$validateState("lastName",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.lastName,callback:function(t){e.$set(e.updateForm,"lastName",t)},expression:"updateForm.lastName"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("lastName",e.updateForm)))])],1)]),e.$can("auth/user/reset_password",s.item)?t("div",{staticClass:"edit-tools-buttons"},[t("confirm-button",{staticStyle:{"margin-left":"-10px","margin-top":"10px"},attrs:{size:"sm",variant:"link","btn-class":"text-undecorated text-white","show-overlay":!1,"confirm-class":"btn-primary","confirm-title":e.$t("Reset")+" "+s.item.firstName+" "+e.$t("password")+"?","confirm-message":e.$t("We will send a new password to")+" "+s.item.email,"confirm-text":e.$t("Reset password")},on:{confirm:function(t){return e.resetPassword(s.item)}}},[e._v(e._s(e.$t("Reset password")))])],1):e._e()]):e._e()],2)]}},{key:"cell(email)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"email","static-value":s.item.email}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{name:"email",type:"email",size:"sm",state:e.$validateState("email",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.email,callback:function(t){e.$set(e.updateForm,"email",t)},expression:"updateForm.email"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("email",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(role)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"roleId","static-value":s.item.role?s.item.role.name:e.$t("N/A")}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-select",{attrs:{name:"roleId",size:"sm",state:e.$validateState("roleId",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.roleId,callback:function(t){e.$set(e.updateForm,"roleId",t)},expression:"updateForm.roleId"}},e._l(e.roles,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("roleId",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(companyRole)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"companyRoleId","static-value":s.item.companyRole?s.item.companyRole.name:e.$t("N/A")}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-select",{attrs:{name:"companyRoleId",size:"sm",state:e.$validateState("companyRoleId",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.companyRoleId,callback:function(t){e.$set(e.updateForm,"companyRoleId",t)},expression:"updateForm.companyRoleId"}},e._l(e.companyRoles,(function(s){return t("option",{key:s.id,domProps:{value:s.id}},[e._v(" "+e._s(s.name)+" ")])})),0),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("companyRoleId",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(yearlyCosts)",fn:function(s){return[t("table-editable-cell",{attrs:{row:s,editing:e.isRowEditing(s),item:e.updateForm,property:"yearlyCosts","static-value":e.$currency(s.item.yearlyCosts)}},[e.isRowEditing(s)?t("template",{slot:"editing"},[t("b-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:1|max_value:2147483647",expression:"'required|numeric|min_value:1|max_value:2147483647'"}],attrs:{name:"yearlyCosts",type:"number",size:"sm",state:e.$validateState("yearlyCosts",e.updateForm),disabled:e.updateForm.busy},model:{value:e.updateForm.yearlyCosts,callback:function(t){e.$set(e.updateForm,"yearlyCosts",e._n(t))},expression:"updateForm.yearlyCosts"}}),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("yearlyCosts",e.updateForm)))])],1):e._e()],2)]}},{key:"cell(actions)",fn:function(s){return[e.isRowEditing(s)?t("div",{staticClass:"text-right"},[t("table-edit-tools-buttons",{attrs:{item:s.item,"show-save-button":e.$can("auth/user/update",s.item),"disable-save-button":e.vErrors.any()||e.updateForm.busy,"show-delete-button":e.$can("auth/user/delete",s.item),loading:e.updateForm.busy,store:"user"},on:{cancel:function(t){return e.toggleItem(s.item)},delete:function(t){return e.toggleItem(null)},save:function(t){return e.saveItem(e.updateForm)}}})],1):t("table-tools-buttons",{attrs:{item:s.item,"show-edit-button":e.$can("auth/user/update",s.item),"show-delete-button":e.$can("auth/user/delete",s.item),store:"user"},on:{editItem:function(t){return e.toggleItem(s.item)}}})]}}])})],1)],1)])},i=[],a=s("c7eb"),n=s("1da1"),o=s("5530"),c=s("2f62"),l=s("9fee"),u={components:{},data:function(){return{currentItem:null,currentRowDetails:null,resetingPassword:!1,updateForm:null,filter:{busy:!1}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({items:"user/filteredItems",showInnerOverlayOnTop:"app/show_inner_overlay_on_top",companyRoles:"companyRole/all",roles:"role/all"})),{},{fields:{get:function(){return[{key:"fullName",label:this.$t("Name"),sortable:!0},{key:"email",label:this.$t("Email"),sortable:!0},{key:"companyRole",label:this.$t("Role"),sortable:!0},{key:"yearlyCosts",label:this.$t("Yearly Costs"),sortable:!0},{key:"role",label:this.$t("Permissions"),sortable:!0},{key:"lang",label:this.$t("Lang"),sortable:!0},{key:"actions",label:this.$t("Manage"),class:"actions"}]}}}),mounted:function(){var e=this;return Object(n["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("user/findAll",{force:!0,filter:e.filter}),e.$store.dispatch("companyRole/findAll"),e.$store.dispatch("role/findAll");case 3:case"end":return t.stop()}}),t)})))()},methods:{isRowEditing:function(e){return this.currentItem&&e&&this.currentItem.id===(e.item?e.item.id:e.id)},overlayClick:function(){this.currentItem&&this.toggleItem(null)},toggleItem:function(e){this.$validator.pause(),this.$validator.reset(),!e||this.currentItem&&this.currentItem.id===e.id?(this.currentItem=null,this.updateForm=null):(this.updateForm=new l["a"]({id:e.id,firstName:e.firstName,lastName:e.lastName,email:e.email,roleId:e.role?e.role.id:null,companyRoleId:e.companyRole?e.companyRole.id:null,yearlyCosts:e.yearlyCosts}),this.currentItem=e,this.$validator.reset(),this.$validator.resume()),this.$store.dispatch("app/toggleInnerOverlay")},saveItem:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$validator.validateAll();case 2:if(t.vErrors.any()){s.next=8;break}return s.next=5,t.$validator.reset();case 5:return s.next=7,t.$store.dispatch("user/update",e);case 7:t.toggleItem(null);case 8:case"end":return s.stop()}}),s)})))()},cancelResetPassword:function(){this.resetingPassword=null,this.currentItem||this.$store.dispatch("app/toggleInnerOverlay")},resetPassword:function(e){var t=this;return Object(n["a"])(Object(a["a"])().mark((function s(){return Object(a["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.$store.dispatch("user/resetPassword",new l["a"]({id:e.id},null));case 3:return s.prev=3,t.cancelResetPassword(),s.finish(3);case 6:case"end":return s.stop()}}),s,null,[[0,,3,6]])})))()}}},d=u,p=s("2877"),m=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=m.exports},f25b:function(e,t,s){},fb97:function(e,t){e.exports={functional:!0,render(e,t){const{_c:s,_v:r,data:i,children:a=[]}=t,{class:n,staticClass:o,style:c,staticStyle:l,attrs:u={},...d}=i;return s("svg",{class:[n,o],style:[c,l],attrs:Object.assign({viewBox:"0 0 7 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},a.concat([s("path",{attrs:{d:"M.457 7.715a.917.917 0 00.914.914h3.655a.917.917 0 00.914-.914V2.232H.457v5.483zM6.4.86H4.8L4.341.404H2.056L1.6.86H0v.914h6.4V.86z",fill:"#D64E4E"}})]))}}},fe48:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page animated fadeIn engage_container"},[e.currentItem||e.currentRowDetails?t("div",{staticClass:"overlay",class:{"top-all":this.showInnerOverlayOnTop},on:{click:e.overlayClick}}):e._e(),e.isLoading?t("page-loader"):t("div",{staticClass:"engage_container_content"},[t("engage-progress",{attrs:{items:e.getMilestones}}),t("engage-table",{attrs:{items:e.milestones}})],1)],1)},i=[],a=s("2909"),n=s("5530"),o=s("c7eb"),c=s("1da1"),l=(s("4e82"),s("2f62")),u=(s("99af"),s("a4d3"),s("e01a"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"engage_progress_container"},[e.innerOverlayOpen?t("inner-overlay",{staticStyle:{"z-index":"2"},on:{click:e.closeCreateForm}}):e._e(),e.items.length>0?t("div",{staticClass:"engage_progress_container-header-edit",class:{"is-elevated-layer":e.isEditing}},[t("div",{staticClass:"engage_progress_container_header-action"},[e.isEditing?t("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%"},on:{click:e.saveEdits}},[t("div",{staticClass:"engage_progress_container_header-action-edit"},[e.loading?t("div",{staticClass:"engage_progress_container_header-action-edit-spinner"},[t("b-spinner",{attrs:{small:""}})],1):t("div",{staticClass:"engage_progress_container_header-action-edit"},[t("i",{staticClass:"mdi mdi-pencil engage-header-edit-icon"}),t("span",{staticClass:"engage_progress_container-header-edit-text"},[e._v(e._s(e.$t("Save")))])])])]):t("div",{staticClass:"engage_progress_container_header-action-edit",on:{click:e.toggleEdit}},[t("i",{staticClass:"mdi mdi-pencil engage-header-edit-icon"}),t("span",{staticClass:"engage_progress_container-header-edit-text"},[e._v(e._s(e.$t("Edit")))])])])]):t("div",{staticStyle:{height:"55px"}}),t("div",{staticClass:"engage_progress_container-body"},[t("div",{directives:[{name:"dragscroll",rawName:"v-dragscroll.x",modifiers:{x:!0}}],staticClass:"engage_body_scrollContainer",attrs:{id:"engage_body_scrollContainer"}},e._l(e.getProgressPart,(function(s,r){return t("div",{key:r,staticClass:"engage_progress_container_body_item"},[t("progress-part",{attrs:{item:s,isEditing:e.isEditing,itemMeta:{itemIndex:r+1,count:e.getProgressPart.length}},on:{removePart:e.removeEditItem}},[t("div",{staticClass:"engage_progress_container-body-score",class:{"is-elevated-layer":e.isEditing}},[t("span",{staticClass:"engage_progress_container-body-score-text"},[e._v(" "+e._s(e.$t("requiredScore"))+" ")]),e.isEditing?t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editItems[r].requiredScore,expression:"editItems[index].requiredScore"}],staticClass:"form-control engage_progress_container-edit-input",staticStyle:{"border-radius":"20px"},attrs:{type:"text",placeholder:s.requiredScore},domProps:{value:e.editItems[r].requiredScore},on:{input:function(t){t.target.composing||e.$set(e.editItems[r],"requiredScore",t.target.value)}}})]):t("div",[t("span",{staticClass:"engage_progress_container-body-score-value"},[e._v(e._s(s.requiredScore?s.requiredScore:e.defaultItem.requiredScore)+" ")])])]),t("div",{staticClass:"engage_progress_container-body-text",class:{"is-elevated-layer":e.isEditing},attrs:{disabled:""}},[e.isEditing?t("b-card",{staticStyle:{padding:"10px",height:"150px"}},[t("b-card-title",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editItems[r].title,expression:"editItems[index].title"}],staticClass:"form-control engage_progress_container-edit-input",attrs:{type:"text",placeholder:s.title},domProps:{value:e.editItems[r].title},on:{input:function(t){t.target.composing||e.$set(e.editItems[r],"title",t.target.value)}}})]),t("div",{staticClass:"form-group"},[t("b-form-textarea",{staticClass:"form-control rounded-0",attrs:{"no-resize":"",trigger:"hover",placeholder:s.description,rows:"3"},model:{value:e.editItems[r].description,callback:function(t){e.$set(e.editItems[r],"description",t)},expression:"editItems[index].description"}})],1)],1):t("b-card",{staticStyle:{overflow:"hidden","max-height":"100%","min-height":"170px",padding:"10px"}},[t("b-card-title",[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{title:s.title?s.title:"",placement:"topright",variant:"light"},expression:"{\n                    title: part.title ? part.title : '',\n                    placement: 'topright',\n                    variant: 'light',\n                  }"}],staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{id:"body-text-title-".concat(s.id),disabled:e.isTextOverArea("body-text-title-".concat(s.id))}},[e._v(" "+e._s("".concat(r+1,". ").concat(s.title?s.title:e.defaultItem.title))+" ")])]),t("div",{staticStyle:{"max-height":"100px",overflow:"scroll"}},[t("span",{staticStyle:{overflow:"scroll"}},[e._v(" "+e._s(s.description?s.description:e.$t("No description"))+" ")])])],1)],1)]),t("progress-button",{attrs:{item:s,isEditing:e.isEditing,openFormId:e.openFormId,itemMeta:{itemIndex:r+1,count:e.getProgressPart.length,scores:e.getRequiredScores}},on:{toggle:e.closeCreateForm,close:e.closeCreateForm}})],1)})),0)])],1)}),d=[],p=(s("d3b7"),s("d81d"),s("25f0"),s("4de4"),s("6062"),s("3ca3"),s("ddb0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"engage_progress_item_container"},[t("div",{staticClass:"engage_progress_item_container-icons"},[t("div",{staticClass:"engage_progress_item_container-icons-badge-and-delete"},[t("div",[t("b-badge",{staticClass:"engage_progress_item_container-usercount",attrs:{variant:"primary"}},[t("b-avatar",{staticClass:"engage_progress_item_container-usercount-badge",attrs:{variant:"primary"}}),t("span",{staticClass:"engage_progress_item_container-usercount-text"},[e._v(e._s(e.getItemUsers)+" ")])],1)],1),t("progress-delete",{directives:[{name:"show",rawName:"v-show",value:e.isEditing&&!e.item.isDefault,expression:"isEditing && !item.isDefault"}],staticClass:"is-elevated-layer",attrs:{item:e.item},on:{remove:e.removeItem}})],1),t("div",{staticClass:"engage_progress_item_container-icons-milestone"},[t("div",{staticClass:"engage_progress_item_container-icons-milestone-line",class:{"milestone-line-active":1!==e.itemMeta.itemIndex}}),t("div",{staticClass:"engage_progress_item_container-icons-milestone-container"},[t("div",{class:e.getMilestoneRankIcon()})]),e.itemMeta.itemIndex!==e.itemMeta.count?t("div",{staticClass:"engage_progress_item_container-icons-milestone-line milestone-line-active"}):t("div",{staticClass:"engage_progress_item_container-icons-milestone-line line-last"},[e._m(0)])])]),e._t("default")],2)}),m=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"milestone-line line-last-container"},[t("div",{staticClass:"milestone-line line-last-container-line"})])}],f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"engage_progress_container_body_item-delete-container"},[t("confirm-button",{attrs:{confirmPlacement:"left",confirmMessage:e.$t("IssueEffectDeleteConfirmation"),showOverlay:!1,btnStyle:"place-content:center;display:flex;background:transparent;border:none;color:#000;align-items:center;box-shadow: none;"},on:{confirm:function(){return e.$emit("remove",e.item)}}},[t("div",{staticClass:"engage_progress_container_body_item-delete-wrapper"},[t("icoMilestoneRemove",{staticClass:"engage_progress_container_body_item-delete-icon",attrs:{width:"40px",height:"40px"}})],1)])],1)},v=[],h=s("8282"),b=s.n(h),g={components:{icoMilestoneRemove:b.a},props:{item:{type:Object,required:!0,default:function(){}}}},y=g,w=(s("07cc"),s("2877")),_=Object(w["a"])(y,f,v,!1,null,"05053369",null),x=_.exports,I={components:{"progress-delete":x},props:{isEditing:{type:Boolean,required:!1,default:function(){return!1}},item:{type:Object,required:!1,default:function(){}},itemMeta:{type:Object,required:!1,default:function(){}}},computed:{getItemUsers:function(){return this.item.users?new Set(this.item.users.map((function(e){return e.userId}))).size:""}},methods:{getMilestoneRankIcon:function(){return this.item&&this.item.isDefault?"milestone_rank_0":"milestone_rank_".concat(this.itemMeta.itemIndex)},removeItem:function(e){this.$emit("removePart",e)}}},O=I,k=(s("0e15"),s("2397"),Object(w["a"])(O,p,m,!1,null,"558f07b6",null)),C=k.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"engage_progress_container_body_item-container"},[e.itemMeta.itemIndex!==e.itemMeta.count?t("div",{staticClass:"engage_progress_container_body_item-action-center"},[t("b-button",{staticClass:"milestone-line line-center-container-icon",class:{buttonActivated:e.item.id===e.item._clickedIndex},attrs:{pill:"",variant:"outline-primary",id:"btnMilestone-".concat(e.item.id)},on:{click:function(t){return e.toggleCreateForm(e.item)}}},[t("i",{staticClass:"mdi mdi-plus"})])],1):t("div",{staticClass:"engage_progress_container_body_item-action-last"},[t("b-button",{staticClass:"milestone-line line-last-container-icon line-center-container-icon",class:{buttonActivated:e.item.id==e.item._clickedIndex},attrs:{pill:"",variant:"outline-primary",id:"btnMilestone-".concat(e.item.id)},on:{click:function(t){return e.toggleCreateForm(e.item)}}},[t("i",{staticClass:"mdi mdi-plus",staticStyle:{color:"#fff"}})])],1),t("b-popover",{ref:"popover",staticClass:"form-popover",attrs:{target:"btnMilestone-".concat(e.item.id),show:e.isPopoverOpen,placement:"bottom"}},[t("b-card",{staticStyle:{width:"300px"},attrs:{"no-body":""}},[t("b-card-body",[t("milestone-form",{attrs:{itemMeta:e.itemMeta,item:e.item},on:{close:e.closePopover}})],1)],1)],1)],1)},j=[],S=(s("498a"),function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"hide-labels",on:{submit:function(t){return t.preventDefault(),e.saveItem.apply(null,arguments)}}},[t("b-col",{staticClass:"col-12"},[t("div",{staticClass:"form-label-group required"},[t("div",{staticClass:"form-group"},[t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"},{name:"autofocus",rawName:"v-autofocus"}],attrs:{id:"title",autocomplete:"off",disabled:e.form.busy,placeholder:e.$t("Milestone title"),type:"text",name:"title",state:e.$validateState("title",e.form)},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"===typeof t?t.trim():t)},expression:"form.title"}}),t("label",{attrs:{for:"title"}},[e._v(e._s(e.$t("Milestone title")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("title",e.form)))])],1),t("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:e.getScoreValidator,expression:"getScoreValidator"}],attrs:{id:"requiredScore","max-length":15,autocomplete:"off",disabled:e.form.busy,placeholder:e.$t("requiredScore"),type:"number",name:"requiredScore",state:e.$validateState("requiredScore",e.form)},model:{value:e.form.requiredScore,callback:function(t){e.$set(e.form,"requiredScore",e._n(t))},expression:"form.requiredScore"}}),t("label",{attrs:{for:"requiredScore"}},[e._v(e._s(e.$t("requiredScore")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("requiredScore",e.form)))])],1),t("b-form-textarea",{directives:[{name:"autoresize",rawName:"v-autoresize"},{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticStyle:{"max-height":"150px"},attrs:{id:"description",disabled:e.form.busy,placeholder:e.$t("Milestone reward text"),name:"description",state:e.$validateState("description",e.form)},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),t("label",{attrs:{for:"description"}},[e._v(e._s(e.$t("Milestone description")))]),t("b-form-invalid-feedback",[e._v(e._s(e.$displayError("description",e.form)))]),t("b-card-footer",[t("loading-button",{staticStyle:{cursor:"pointer"},attrs:{disabled:e.vErrors.any()||e.form.busy||!e.form.requiredScore,loading:e.form.busy,size:"lg",block:"",type:"submit"}},[e._v(e._s(e.$t("Save changes")))])],1)],1)],1)}),E=[],T=(s("c740"),s("9fee")),R={data:function(){return{prevScore:0,nextScore:0,form:new T["a"]({id:null,title:null,description:null,requiredScore:null})}},computed:{getScoreValidator:{get:function(){return this.nextScore?"required|numeric|between:".concat(this.prevScore+1,",").concat(this.nextScore-1):"required|numeric|min_value:".concat(this.prevScore+1)}}},props:{itemMeta:{type:Object,required:!1,default:function(){}},item:{type:Object,required:!1,default:function(){}}},mounted:function(){this.item&&this.setScoresAround()},methods:{setScoresAround:function(){var e,t,s,r,i=this,a=function(){if(i.item)return i.itemMeta.scores.findIndex((function(e){return e.id===i.item.id}))},n=null!==(e=this.itemMeta.scores[a()])&&void 0!==e?e:null,o=null!==(t=this.itemMeta.scores[a()+1])&&void 0!==t?t:null;this.prevScore=null!==(s=null===n||void 0===n?void 0:n.requiredScore)&&void 0!==s?s:0,this.nextScore=null!==(r=null===o||void 0===o?void 0:o.requiredScore)&&void 0!==r?r:null},saveItem:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.busy=!0,s=new T["a"]({title:e.form.title,description:e.form.description,requiredScore:e.form.requiredScore}),t.next=4,e.$store.dispatch("milestone/create",s);case 4:e.form.busy=!1,e.$emit("close");case 6:case"end":return t.stop()}}),t)})))()}}},F=R,P=Object(w["a"])(F,S,E,!1,null,null,null),A=P.exports,D={components:{"milestone-form":A},props:{isEditing:{type:Boolean,required:!1,default:function(){return!1}},isDefault:{type:Boolean,required:!1,default:function(){return!1}},itemMeta:{type:Object,required:!1,default:function(){}},item:{type:Object,required:!1,default:function(){}},openFormId:{type:String,required:!1,default:function(){return null}}},computed:{isPopoverOpen:{get:function(){return this.openFormId==this.item.id}}},data:function(){return{popoverState:!1,clickedIndex:null}},methods:{closePopover:function(){this.$emit("close")},toggleCreateForm:function(e){this.$emit("toggle",e)}}},N=D,q=(s("ff19"),Object(w["a"])(N,$,j,!1,null,null,null)),M=q.exports,z=s("b517"),L={components:{"progress-part":C,"progress-button":M},props:{items:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{loading:!1,openFormId:null,defaultItem:{description:"description",id:"0",title:"title",isDefault:!0,requiredScore:0,userCount:0,users:[]},editItems:[{description:"description",id:"1",title:"title",requiredScore:0,userCount:0,users:[]}],isEditing:!1,isDefault:!1}},computed:{innerOverlayOpen:function(){return!!this.isEditing||(!!this.openFormId||(this.items.length>0?this.items.some((function(e){return e._clickedIndex})):this.editItems.some((function(e){return e._clickedIndex}))))},getProgressPart:function(){if(this.isEditing)return this.editItems;if(0==this.items.length){var e=(new z["a"]).deserialize(this.defaultItem);return e.isDefault=!0,[e]}return this.items},getRequiredScores:function(){return this.items.length>0?this.items.map((function(e){return{requiredScore:e.requiredScore,id:e.id}})):[{requiredScore:this.defaultItem.requiredScore,id:this.defaultItem.id}]}},methods:{isTextOverArea:function(e){this.$nextTick((function(){var t=document.getElementById(e.toString());if(t)return t.getBoundingClientRect().width<150}))},closeCreateForm:function(e){this.isEditing&&(this.isEditing=!1),!this.openFormId&&e?this.openFormId=e.id:this.openFormId=null},toggleEdit:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.items.length>0?e.editItems=e.items.map((function(e){return{id:e.id,requiredScore:e.requiredScore,title:e.title,description:e.description}})):e.editItems=[Object(n["a"])({},e.defaultItem)],e.isEditing=!e.isEditing;case 2:case"end":return t.stop()}}),t)})))()},removeEditItem:function(e){var t=this.editItems.filter((function(t){return t.id!==e.id}));this.editItems=Object(a["a"])(new Set(t))},saveEdits:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var s,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,s=Object(a["a"])(new Set(e.editItems.map((function(e){return{id:e.id,requiredScore:e.requiredScore,title:e.title,description:e.description}})))),r=new T["a"](Object(n["a"])({},s)),t.next=5,e.$store.dispatch("milestone/updateOrDeleteMany",r);case 5:return t.next=7,e.$store.dispatch("milestone/findAll",{force:!0});case 7:e.isEditing=!e.isEditing,e.openFormId=null,e.loading=!1;case 10:case"end":return t.stop()}}),t)})))()}}},V=L,B=(s("6c03"),Object(w["a"])(V,u,d,!1,null,null,null)),U=B.exports,H=function(){var e=this,t=e._self._c;return t("div",{staticClass:"engage_table_container"},[t("div",{staticClass:"table-responsive",staticStyle:{overflow:"visible"}},[t("b-table",{staticClass:"t01",staticStyle:{background:"#fff"},attrs:{"sort-icon-left":"","sort-by":"name",hover:"",fixed:"","sticky-header":"",fields:e.fields,items:e.getMilestoneUsers,"table-class":"engage_table","show-empty":!0,"empty-text":e.$t("There are no records for the given criteria")},scopedSlots:e._u([{key:"table-colgroup",fn:function(){return[t("col",{staticStyle:{width:"25%"}}),t("col",{staticStyle:{width:"25%"}}),t("col",{staticStyle:{width:"25%"}}),t("col",{staticStyle:{width:"25%"}})]},proxy:!0},{key:"empty",fn:function(s){return[t("p",{staticClass:"alert alert-warning text-center"},[e._v(e._s(s.emptyText))])]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-primary my-2"},[t("b-spinner",{staticClass:"align-middle"})],1)]},proxy:!0},{key:"cell(name)",fn:function(s){return[s.item.user?t("div",[e._v(" "+e._s(s.item.user.firstName)+" "+e._s(s.item.user.lastName)+" ")]):e._e()]}},{key:"cell(score)",fn:function(s){return[s.item.engageScore?t("div",[e._v(e._s(s.item.engageScore))]):e._e()]}},{key:"cell(reward)",fn:function(s){return[s.item?t("div",[e._v(e._s(e.getValueRank(s.item)))]):e._e()]}},{key:"cell(action)",fn:function(s){return[s.item?t("div",[t("loading-button",{style:s.item.rewarded?"cursor:not-allowed":"cursor:pointer",attrs:{type:"submit",size:"lg",variant:s.item.rewarded?"outline-primary":"success",disabled:e.filter.busy||s.item.rewarded||e.vErrors.any(),loading:e.filter.busy&&e.isLoadingRow(s),block:!0},on:{click:function(t){return e.reward(s)}}},[e._v(e._s(e.getRowItemRewarded(s.item)))])],1):e._e()]}}])})],1)])},Y=[],W=(s("0481"),s("4069"),s("7db0"),{props:{items:{type:Array,required:!1,default:function(){return[]}},users:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{store:"milestone",loadingId:null,filter:{busy:!1}}},computed:{getMilestoneUsers:function(){var e=this.items.map((function(e){return e.users}));return e.length>0?this.items.map((function(e){return e.users})).flat().filter((function(e){return!e.rewarded})):[]},fields:{get:function(){return[{key:"name",label:this.$t("Username"),sortable:!0,thClass:"engage_table_header"},{key:"score",label:this.$t("currentValue"),sortable:!0,thClass:"engage_table_header"},{key:"reward",label:this.$t("rewardAchieved"),sortable:!0,thClass:"engage_table_header"},{key:"action",label:this.$t("rewardGiven"),class:"action",thClass:"engage_table_header"}]}}},methods:{isLoadingRow:function(e){return this.loadingId==e.index},getRowItemRewarded:function(e){return e.rewarded?this.$t("Confirmed"):this.$t("Confirm")},getValueRank:function(e){var t=e.milestoneId,s="";if(this.items.length>0){var r=this.items.find((function(e){return e.id===t}));s=r?r.title:""}return s},reward:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function s(){var r;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.loadingId=e.index,e.item.rewarded){s.next=7;break}return t.filter.busy=!0,r=new T["a"]({id:e.item.id,rewarded:!e.item.rewarded,milestoneId:e.item.milestoneId}),s.next=6,t.$store.dispatch("milestone/reward",r);case 6:t.filter.busy=!1;case 7:case"end":return s.stop()}}),s)})))()}}}),G=W,J=(s("705f"),Object(w["a"])(G,H,Y,!1,null,null,null)),K=J.exports,Z={data:function(){return{isLoading:null,filter:{busy:!1},currentItem:null,currentRowDetails:null}},components:{"engage-progress":U,"engage-table":K},mounted:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$store.dispatch("milestone/findAll",{force:!0});case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()},computed:Object(n["a"])(Object(n["a"])({},Object(l["b"])({milestones:"milestone/filteredItems"})),{},{getMilestones:function(){var e=Object(a["a"])(this.milestones).sort((function(e,t){return e.requiredScore>t.requiredScore?1:-1}));return e}})},X=Z,Q=(s("d8cd"),Object(w["a"])(X,r,i,!1,null,"aa64f75a",null));t["default"]=Q.exports},ff0c:function(e,t,s){},ff19:function(e,t,s){"use strict";s("e988")}}]);