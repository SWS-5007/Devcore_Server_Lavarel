(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b8a91"],{3042:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("a4d3"),a("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"idea-detail",staticStyle:{width:"100%"}},[t.idea?e("b-card",{staticClass:"rounded",attrs:{"no-body":""}},[e("b-card-header",[e("div",{staticStyle:{"line-height":"1em"}},[e("nav",{staticClass:"m-0 p-0 d-inline-block",attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb text-capitalizes bg-transparent m-0 p-0"},[t.process?e("li",{staticClass:"breadcrumb-item text-overflow"},[e("i",{staticClass:"mdi mdi-flask-empty text-gray"}),t._v("   "),e("a",{staticClass:"text-gray",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),t.breadcrumbClick(e,"process")}}},[t._v(t._s(t.process.title))])]):t._e(),t.stage?e("li",{staticClass:"breadcrumb-item text-overflow"},[e("a",{staticClass:"text-gray",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),t.breadcrumbClick(e,"stage")}}},[t._v(t._s(t.stage.title))])]):t._e(),t.operation?e("li",{staticClass:"breadcrumb-item text-overflow"},[e("a",{staticClass:"text-gray",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),t.breadcrumbClick(e,"operation")}}},[t._v(t._s(t.operation.title))])]):t._e(),t.phase?e("li",{staticClass:"breadcrumb-item text-overflow"},[e("a",{staticClass:"text-gray",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),t.breadcrumbClick(e,"phase")}}},[t._v(t._s(t.phase.title))])]):t._e(),t.idea.tool&&t.idea.tool.id?e("li",{staticClass:"breadcrum-item text-overflow ml-1"},[t._v("  |  "),e("a",{staticClass:"text-gray",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),t.setCurrentTool(e,t.idea.tool.id)}}},[e("i",{staticClass:"mdi mdi-tools"}),t._v(" "+t._s(t.idea.tool.name)+" ")])]):t._e()])])])]),t.idea.hasReviews?e("div",{staticClass:"bg-gray d-flex flex-column justify-content-center",staticStyle:{"min-height":"200px"}},[e("report-chart",{attrs:{idea:t.idea}})],1):t._e(),e("perfect-scrollbar",{staticStyle:{"max-height":"500px"}},[e("b-card-body",{staticClass:"p-5",class:{"bg-gray":!t.idea.hasReviews},staticStyle:{overflow:"scroll"}},[e("h3",{staticClass:"h6 text-uppercase"},[t._v(t._s(t.$t("Idea description")))]),e("p",{staticClass:"text-gray text-justify",staticStyle:{"max-height":"400px",overflow:"scroll"}},[t._v(" "+t._s(t.idea.description||t.$t("No description"))+" ")])])],1),e("b-card-footer",{staticClass:"p-3 pb-5"},[e("div",{staticClass:"footer-details d-flex flex-row mb-4"},[e("div",{staticClass:"files border-right px-4",staticStyle:{width:"50%"}},[e("h4",{staticClass:"h6 text-uppercase text-left"},[t._v(t._s(t.$t("Guide")))]),t.idea.hasFile?e("ul",{staticClass:"list-unstyled"},t._l(t.idea.files,(function(a){return e("li",{key:a.id,staticClass:"list-item font-13x text-gray"},[e("a",{staticClass:"text-gray",attrs:{href:a.downloadUrl,target:"_blank"}},[t._v(" "+t._s(t.$t("Download"))+" ")])])})),0):e("span",{staticClass:"text-gray"},[t._v(t._s(t.$t("No guide attached")))])]),e("div",{staticClass:"author px-4",staticStyle:{width:"50%"}},[e("h4",{staticClass:"h6 text-uppercase text-left"},[t._v(" "+t._s(t.$t("Submitted by"))+" ")]),e("author-time",{staticClass:"d-inline-block",attrs:{user:t.idea.author,anonymous:t.idea.anonymous,time:t.idea.createdAt}})],1)]),e("div",{staticClass:"text-center d-flex flex-row justify-content-center"},["NEW"===t.idea.status&&t.$can("improve/idea/change_status",t.idea)?e("loading-button",{staticStyle:{width:"120px !important"},attrs:{variant:"primary",size:"lg",loading:t.editForm&&t.editForm.busy},on:{click:t.updateStatus}},[t._v(t._s(t.$t("Test")))]):t._e(),"TESTING"===t.idea.status&&t.$can("improve/idea/change_status",t.idea)?e("loading-button",{staticStyle:{width:"120px !important"},attrs:{variant:"primary",size:"lg",loading:t.editForm&&t.editForm.busy},on:{click:t.updateStatus}},[t._v(t._s(t.$t("Adopt")))]):t._e(),t.$can("improve/idea/update",t.idea)?e("b-button",{staticClass:"ml-2",staticStyle:{width:"120px !important"},attrs:{variant:"outline-dark",size:"lg"},on:{click:t.toggleEdit}},[t._v(t._s(t.$t("Edit")))]):t._e(),t.$can("improve/idea/delete",t.idea)?e("confirm-button",{staticClass:"ml-2",staticStyle:{width:"120px !important"},attrs:{variant:"outline-dark",size:"lg","confirm-title":t.$t("Delete")+" "+t.idea.name+"?","confirm-message":t.$t("This action cannot be undone!")},on:{confirm:t.deleteItem}},[t._v(t._s(t.$t("Remove")))]):t._e()],1)])],1):t._e(),e("div",{staticClass:"border-top"},[e("b-col",[t.idea.improvementsCount>0?e("b-col",{attrs:{cols:"12 py-4 px-0"}},[e("h4",{staticClass:"text-center mb-4"},[t._v(" "+t._s(t.$t("Improvements"))+" "),e("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.idea.improvementsCount))])],1),e("div",{staticClass:"w-100",staticStyle:{position:"relative"}},[t.idea.improvements?e("div",t._l(t.idea.improvements,(function(a){return e("improvement-card",{key:a.id,attrs:{item:a,idea:t.idea},on:{reload:function(e){return t.reloadDetail(e)},confirm:function(e){return t.deleteImprovement(e)}}})})),1):e("div",{staticClass:"mx-auto text-center"},[e("b-spinner",{staticClass:"mx-auto",attrs:{variant:"primary"}})],1)])]):t._e(),t.idea.problemsCount>0?e("b-col",{class:{"border-top":t.idea.improvementsCount>0},attrs:{cols:"12 py-4 px-0"}},[e("h4",{staticClass:"text-center mb-4"},[t._v(" "+t._s(t.$t("Problems"))+" "),e("b-badge",{attrs:{variant:"danger"}},[t._v(t._s(t.idea.problemsCount))])],1),e("div",{staticClass:"w-100",staticStyle:{position:"relative"}},[t.idea.problems?e("div",t._l(t.idea.problems,(function(a){return e("improvement-card",{key:a.id,attrs:{item:a,idea:t.idea},on:{reload:function(e){return t.reloadDetail(e)},confirm:function(e){return t.deleteImprovement(e)}}})})),1):e("div",{staticClass:"mx-auto text-center"},[e("b-spinner",{staticClass:"mx-auto",attrs:{variant:"primary"}})],1)])]):t._e()],1)],1),e("b-row",[e("b-modal",{attrs:{title:t.$t("Edit idea"),size:"lg modal-idea-card col-6","hide-footer":""},model:{value:t.editing,callback:function(e){t.editing=e},expression:"editing"}},[t.editing?e("idea-form",{staticClass:"idea-card v2 p-0",attrs:{formFrom:"editIdea",item:t.idea},on:{cancel:t.toggleEdit,done:t.toggleEdit}}):t._e()],1)],1)],1)},i=[],r=a("c7eb"),o=a("1da1"),n=a("5530"),c=(a("7db0"),a("d3b7"),a("2f62")),d=a("9fee"),l=a("192e"),p=a("3528"),u=a("597e"),m={components:{"idea-form":l["default"],"improvement-card":p["default"],"report-chart":u["default"]},props:{idea:{required:!1}},data:function(){return{editing:!1,editForm:null,storeName:"idea"}},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])({allProcess:"process/all"})),{},{process:{get:function(){var t=this;return this.allProcess.find((function(e){return e.id===t.idea.processId}))}},stage:{get:function(){var t=this;return this.process?this.process.stages.find((function(e){return e.id===t.idea.stageId})):null}},operation:{get:function(){var t=this;return this.stage?this.stage.operations.find((function(e){return e.id===t.idea.operationId})):null}},phase:{get:function(){var t=this;return this.operation?this.operation.phases.find((function(e){return e.id===t.idea.phaseId})):null}}}),mounted:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.storeName="PROCESS"===t.idea.type?"idea":"toolIdea",e.next=3,t.$store.dispatch("".concat(t.storeName,"/findById"),{id:t.idea.id,force:!0});case 3:case"end":return e.stop()}}),e)})))()},methods:{closed:function(){this.$emit("closed")},deleteImprovement:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var s;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=new d["a"]({id:e.idea.id,improvement_id:t.id}),a.next=3,e.$store.dispatch("".concat(e.storeName,"/deleteImprovement"),s);case 3:return a.next=5,e.$store.dispatch("".concat(e.storeName,"/findById"),{id:e.idea.id,force:!0});case 5:case"end":return a.stop()}}),a)})))()},reloadDetail:function(){this.closed()},toggleEdit:function(){this.editing=!this.editing},updateStatus:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.editForm=new d["a"]({id:t.idea.id,status:"NEW"===t.idea.status?"TESTING":"ADOPTED"}),e.next=3,t.$store.dispatch("".concat(t.storeName,"/changeStatus"),t.editForm);case 3:t.$store.dispatch("".concat(t.storeName,"/findByProcess"),{id:t.idea.processId,force:!0}),t.closed();case 5:case"end":return e.stop()}}),e)})))()},deleteItem:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.editForm=new d["a"]({id:t.idea.id}),e.next=3,t.$store.dispatch("".concat(t.storeName,"/delete"),t.editForm);case 3:t.$store.dispatch("".concat(t.storeName,"/findByProcess"),{id:t.idea.processId,force:!0}),t.$store.dispatch("process/findById",{id:t.idea.processId,force:!0});case 5:case"end":return e.stop()}}),e)})))()},setCurrentTool:function(t,e){var a=this;return Object(o["a"])(Object(r["a"])().mark((function s(){return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.preventDefault(),a.$store.dispatch("companyTool/setCurrent",{section:"toolIdeas",tool:{id:e}});case 2:case"end":return s.stop()}}),s)})))()},breadcrumbClick:function(t,e){switch(t.preventDefault(),e){case"process":this.$store.dispatch("process/setCurrentProcess",{section:"PROCESS"===this.idea.type?"ideas":"toolIdeas",process:this.process,stage:null,operation:null,phase:null});break;case"stage":this.$store.dispatch("process/setCurrentProcess",{section:"PROCESS"===this.idea.type?"ideas":"toolIdeas",process:this.process,stage:this.stage,operation:null,phase:null});break;case"operation":this.$store.dispatch("process/setCurrentProcess",{section:"PROCESS"===this.idea.type?"ideas":"toolIdeas",process:this.process,stage:this.stage,operation:this.operation,phase:null});break;case"phase":this.$store.dispatch("process/setCurrentProcess",{section:"PROCESS"===this.idea.type?"ideas":"toolIdeas",process:this.process,stage:this.stage,operation:this.operation,phase:this.phase});break}}}},h=m,f=a("2877"),b=Object(f["a"])(h,s,i,!1,null,null,null);e["default"]=b.exports}}]);